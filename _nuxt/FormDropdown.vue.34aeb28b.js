import{d as S,b as $,n as m,o as j,c as x,ai as z,g as v,h as y,q as r,z as b,j as a,B as g,i as A,aq as E,as as F,y as _,F as N,r as q,aI as M,D as T}from"./entry.7726ca09.js";function O(u){let c,l=u[0],d=1;for(;d<u.length;){const t=u[d],p=u[d+1];if(d+=2,(t==="optionalAccess"||t==="optionalCall")&&l==null)return;t==="access"||t==="optionalAccess"?(c=l,l=p(l)):(t==="call"||t==="optionalCall")&&(l=p((...h)=>l.call(c,...h)),c=void 0)}return l}const H={class:"relative w-[12.5rem]"},R={class:"pointer-events-none -mb-2 transform-gpu whitespace-nowrap px-2 transition-all"},U={class:"line-clamp-1 text-fonts-200"},G={class:"flex h-full w-full flex-col gap-2 overflow-auto px-2","aria-labelledby":"dropdownMenuButton"},J={key:0,class:"mb-2 w-full"},K={key:1},P=["onClick"],X=S({__name:"FormDropdown",props:{multiSelection:{type:Boolean},title:{},style:{},hasDefaultAll:{type:Boolean},selectedOption:{},selectedOptionArray:{},searchable:{type:Boolean},list:{}},emits:["update:modelValue","onChange"],setup(u,{emit:c}){const l=u,{t:d}=$(),t=m(!1),p=m(),h=m(null),f=m(""),L=[{title:"item1",value:"number 1"},{title:"item2",value:"number 2"}],n=m([]);j(()=>{l.hasDefaultAll?n.value=l.selectedOptionArray?l.selectedOptionArray:l.selectedOption?[l.selectedOption||"ALL"]:["ALL"]:n.value=l.selectedOptionArray?l.selectedOptionArray:l.selectedOption!==void 0?[l.selectedOption]:[]});async function C(){t.value=!0,await M(100),O([h,"access",e=>e.value,"optionalAccess",e=>e.focusOnInput,"call",e=>e()])}function k(){t.value=!1}function w(){const e=n.value.length?n.value:["ALL"];c("update:modelValue",e),c("onChange",e)}function B(){n.value=["ALL"],w(),t.value=!1}function D(e){if(l.multiSelection)return n.value=n.value.filter(s=>s!=="ALL"),n.value.includes(e)?(n.value=n.value.filter(s=>s!==e),n.value.length===0&&(n.value=["ALL"]),w()):(n.value.push(e),w());n.value=[e],w(),t.value=!1}const V=x(()=>(l.list||L).filter(s=>s.title.toLowerCase().includes(f.value.toLowerCase())));z(p,()=>{t.value&&(t.value=!1)});const I=x(()=>{const e=l.list||L;return n.value.map(s=>s==="ALL"?d("form.dropdown.default"):O([e,"access",i=>i.find,"call",i=>i(o=>o.value===s),"optionalAccess",i=>i.title])||s)});return(e,s)=>{const i=T;return v(),y("div",{ref_key:"dropdown",ref:p,class:"text-sm"},[r("div",H,[r("fieldset",{class:b(["input outline-fonts-[50] relative my-2 flex w-full cursor-pointer flex-row items-center justify-between gap-2 rounded-xl border-2 p-2 px-4 text-fonts-50 outline-offset-2 transition-colors",[{"!border-primary-500":a(t)},e.style.dimmed?"border-fonts-300":"border-fonts-50"]]),"aria-haspopup":"true","aria-expanded":"false",onClick:s[0]||(s[0]=o=>a(t)?k():C())},[r("legend",R,g(e.title),1),r("p",U,g([...a(I)].join(", ")),1),A(i,{name:"ph:caret-down-bold",class:b([{"rotate-180":a(t)},"transition-transform"])},null,8,["class"])],2),r("div",{class:b(["invisible absolute z-20 flex max-h-[15em] w-full -translate-y-2 flex-col gap-1 rounded-xl px-1 py-2 opacity-0 transition-all",[{"!visible !translate-y-0 !opacity-100":a(t)},e.style.foreground]])},[r("ul",G,[e.searchable?(v(),y("li",J,[A(a(F),{ref_key:"searchInputEl",ref:h,modelValue:a(f),"onUpdate:modelValue":s[1]||(s[1]=o=>E(f)?f.value=o:null),name:"dropdown-name-searchbox",label:e.$t("form.dropdown.search"),"label-bg":e.style.foreground,class:"text-xs",icon:"ph:magnifying-glass-fill"},null,8,["modelValue","label","label-bg"])])):_("",!0),!a(f)&&e.hasDefaultAll?(v(),y("li",K,[r("button",{type:"button",class:b([{"bg-primary-500 text-white hover:!bg-primary-500":a(n).includes("ALL")},"10 flex w-full rounded-md px-4 py-2 hover:bg-fonts-50/10"]),onClick:B},g(e.$t("form.dropdown.default")),3)])):_("",!0),(v(!0),y(N,null,q(a(V),o=>(v(),y("li",{key:o.value},[r("button",{type:"button",class:b([{"bg-primary-500 text-white hover:!bg-primary-500":a(n).includes(o.value)},"10 flex w-full rounded-md px-4 py-2 hover:bg-fonts-50/10"]),onClick:Q=>D(o.value)},g(o.title),11,P)]))),128))])],2)])],512)}}});export{X as _};
