import{at as $e,d as Q,n as S,o as V,au as Ce,g as b,h as x,k as N,y as A,z as M,j as p,i as I,w as q,q as v,C as Z,T as H,B as E,P as Y,_ as Ie,D as ve,G as te,H as ae,I as J,ae as Ae,ai as B,b as le,v as U,F as R,r as z,al as X,m as Be,c as O,ak as re,am as Ee,an as De,p as ee,f as Fe,A as Le,$ as Oe}from"./entry.5ebf2e92.js";function be(){return{removeFocus:f=>{const t=document.getElementById(f);if(!t)return console.error(`Element with id ${f} not found`);t.setAttribute("tabindex","-1"),t.querySelectorAll("*").forEach(k=>k.setAttribute("tabindex","-1"))}}}async function me(){console.log("30nama Player v6.0.0"),await $e(()=>import("./jwplayer.8.27.1.22b8f9e1.js"),[],import.meta.url);const u=window.jwplayer;return window.jwplayer.key="Pha4C3UB2JzMWjqT8w1F793Ujv6hTVbk+3KoY/G7Gn4=",u}const ge={controls:!0,fullscreen:"true",displaytitle:!0,renderCaptionsNatively:!1,autostart:!1,width:"100%",horizontalVolumeSlider:!0,aboutlink:"https://30nama.com",abouttext:"30nama",safarihlsjs:!0,pipIcon:"disabled",skin:{name:"30nama"}},_e={fa:{airplay:"ایرپلی",audioTracks:"کانال های صوتی",auto:"خودکار",buffer:"بافر",captionsStyles:"سبک‌های زیرنویس",cast:"پخش",cc:"زیرنویس",close:"بستن",displayHeading:"نمایش سربرگ",exitFullscreen:"خروج از حالت تمام صفحه",fullscreen:"تمام صفحه",hd:"HD",liveBroadcast:"پخش زنده",logo:"لوگو",mute:"سکوت",next:"بعدی",nextUp:"قسمت بعد",notLive:"زنده نیست",off:"خاموش",pause:"توقف",pipIcon:"تصویر در تصویر",play:"پخش",playback:"پخش مجدد",playbackRates:"سرعت پخش",player:"پخش کننده",poweredBy:"قدرت گرفته از",prev:"قبلی",related:"مرتبط",replay:"پخش مجدد",rewind:"بازگرداندن",settings:"تنظیمات",slider:"اسلایدر",stop:"توقف",unmute:"باز کردن صدا",videoInfo:"اطلاعات ویدئو",volume:"صدا",volumeSlider:"اسلایدر صدا",advertising:{admessage:"پیام تبلیغاتی",cuetext:"متن راهنما",podmessage:"پیام پادکست",skipmessage:"پیام رد کردن",skiptext:"رد کردن"},shortcuts:{captionsToggle:"تغییر زیرنویس",decreaseVolume:"کاهش صدا",fullscreenToggle:"تغییر حالت تمام صفحه",increaseVolume:"افزایش صدا",keyboardShortcuts:"میانبرهای صفحه کلید",playPause:"پخش / توقف",seekBackward:"پرش به عقب",seekForward:"پرش به جلو",seekPercent:"درصد زمان ویدیو",spacebar:"space",volumeToggle:"تغییر صدا"},sharing:{heading:"اشتراک گذاری",link:"لینک"},errors:{badConnection:"اتصال بد",cantLoadPlayer:"بارگذاری پخش کننده ممکن نیست",cantPlayInBrowser:"پخش در این مرورگر ممکن نیست",cantPlayVideo:"پخش ویدئو ممکن نیست",errorCode:"کد خطا",liveStreamDown:"پخش زنده خاموش است",protectedContent:"محتوای محافظت شده",technicalError:"خطای فنی"}}},he=u=>(te("data-v-1dd8d818"),u=u(),ae(),u),Ne={class:"relative h-full w-full"},Ve=he(()=>v("div",{id:"jwplayer-main-ads",class:"h-full w-full jwplayer-main-ads"},null,-1)),qe=he(()=>v("span",{class:"shadow"},null,-1)),Ue={key:0,class:"content"},Re={key:0,class:"local-numbers w-4 text-left"},ze=Q({__name:"Player2Ads",props:{adTitle:{},skip:{},video:{},callbackUrl:{}},emits:["onVideoEnded","onPlay","onPause","onPlayerReady","reloadPlayer","playNextEpisode","onSeek","onProgress"],setup(u,{emit:f}){const t=u,{removeFocus:s}=be();function k(){l.value=this.setup({...ge,title:t.adTitle,sources:[{file:t.video,label:"AUTO"}],intl:_e,autostart:!0})}async function h(){await Y(),s("jwplayer-main-ads"),o.value=!0,f("onPlayerReady")}function g(){k.bind(this)()}const o=S(!1),c=S(0),n=S(!1),l=S();V(async()=>{const y=(await me())("jwplayer-main-ads");k.bind(y)(),y.on("ready",h.bind(y)),y.on("complete",()=>f("onVideoEnded")),y.on("play",()=>f("onPlay")),y.on("pause",()=>f("onPause")),y.on("seek",e=>{var m;n.value=Math.round(e.offset)!==Math.round(c.value),n.value?(m=l.value)==null||m.seek(c.value):n.value=!1,f("onSeek",e)}),y.on("time",e=>{e.currentTime&&t.skip&&(i.value=Math.floor(e.currentTime/t.skip*100)),n.value||(c.value=e.currentTime),f("onProgress",e)}),y.on("fullscreen",e=>{var m;return!e.fullscreen&&((m=document.getElementById("main-scroller"))==null?void 0:m.scrollTo({top:0}))}),y.on("error",e=>{console.log("error",e),e.code===233001&&g.bind(y)(),e.code===333001&&g.bind(y)(),e.code>=333400&&e.code<=333599&&g.bind(y)(),e.code>=233400&&e.code<=233599&&g.bind(y)()})}),Ce(()=>{l.value&&(l.value.stop(),l.value.remove())});const i=S(0);return(_,y)=>{const e=Ie,m=ve;return b(),x("div",Ne,[Ve,_.callbackUrl?(b(),N(e,{key:0,class:"absolute inset-0 top-0 h-2/3 cursor-pointer",to:_.callbackUrl,external:"",target:"_blank"},null,8,["to"])):A("",!0),_.skip?(b(),x("div",{key:1,class:M(["absolute bottom-32 z-50 mx-8",{"pointer-events-none opacity-50":p(i)<100}])},[I(H,{name:"actions",appear:""},{default:q(()=>[_.skip?(b(),x("span",{key:"intro",class:"action",onClick:y[0]||(y[0]=a=>f("onVideoEnded"))},[v("span",{class:"bar",style:Z(`transform: scaleX(${p(i)/100})`)},null,4),qe,p(l)?(b(),x("div",Ue,[I(H,{name:"fade-preset",mode:"out-in"},{default:q(()=>{var a;return[p(i)<100?(b(),x("p",Re,E(_.skip-Math.floor(((a=p(l))==null?void 0:a.getPosition())||0)),1)):(b(),N(m,{key:"icon",name:"ph:skip-forward-bold"}))]}),_:1}),v("p",null,E(_.$t("skip")),1)])):A("",!0)])):A("",!0)]),_:1})],2)):A("",!0)])}}});const Qe=J(ze,[["__scopeId","data-v-1dd8d818"]]);var we={exports:{}};(function(u,f){var t=function(){var s={};s.fromVtt=function(o,c,n){var l=!!n;o=o.replace(/\r/g,"");var i=/(\d+)?\n?(\d{2}:\d{2}:\d{2}[,.]\d{3}) --> (\d{2}:\d{2}:\d{2}[,.]\d{3}).*\n/g;o=o.split(i),o.shift();for(var _=[],y=0;y<o.length;y+=4){var e=o[y+3];l&&(e=e.split(`
`),e.shift(),e=e.join(`
`)),e.trim().length!==0&&_.push({id:o[y]?+o[y].trim():_.length+1,startTime:k(o[y+1].trim(),c),endTime:k(o[y+2].trim(),c),text:e.trim()})}return _},s.toVtt=function(o){if(!o instanceof Array)return"";for(var c="",n=0;n<o.length;n++){var l=o[n];!isNaN(l.startTime)&&!isNaN(l.endTime)&&(l.startTime=g(parseInt(l.startTime,10)),l.endTime=g(parseInt(l.endTime,10))),c+=l.id+`\r
`,c+=l.startTime+" --> "+l.endTime+`\r
`,c+=l.text.replace(`
`,`\r
`)+`\r
\r
`}return c};var k=function(o,c){return c==="ms"?h(o):c==="s"?h(o)/1e3:o},h=function(o){var c=/(\d+):(\d{2}):(\d{2})[,.](\d{3})/,n=c.exec(o);if(n===null)return 0;for(var l=1;l<5;l++)n[l]=parseInt(n[l],10),isNaN(n[l])&&(n[l]=0);return n[1]*36e5+n[2]*6e4+n[3]*1e3+n[4]},g=function(o){var c=[36e5,6e4,1e3],n=[];for(var l in c){var i=(o/c[l]>>0).toString();i.length<2&&(i="0"+i),o%=c[l],n.push(i)}var _=o.toString();if(_.length<3)for(l=0;l<=3-_.length;l++)_="0"+_;return n.join(":")+","+_};return s}();u.exports=t})(we);var Me=we.exports;const He=Ae(Me),Xe={class:"jw-text-track-container jw-reset !absolute !m-[1.5%]"},Ge={key:0,class:"jw-text-track-display fa"},Ye={class:"flex flex-col items-center gap-1"},Je=["innerHTML"],Ke={key:1,class:"jw-text-track-display en"},We={class:"flex flex-col items-center gap-1"},Ze=["innerHTML"],et=Q({__name:"Player2Subtitles",props:{playerData:{},playerId:{}},setup(u){const f=u,t=B("preferredLanguage","fa"),s=B("preferredSize","0.75"),k=B("preferredColor","#FFF"),h=B("preferredBackground","acrylic"),{t:g}=le(),o=window.jwplayer("jwplayer-main"),c=[];V(()=>{const e=f.playerData.subtitle;e&&(e.en&&c.push({file:e.en,label:g("subtitle.english"),kind:"captions",language:"en",default:t.value==="en"}),e.fa&&c.push({file:e.fa,label:g("subtitle.persian"),kind:"captions",language:"fa",default:t.value==="fa"}),i())});const n=S({fa:[],en:[]}),l=S(o.getPosition()*1e3||0);async function i(){for(const e of c){if(!e.language)continue;const m=await $fetch(e.file),a=He.fromVtt(m,"ms");n.value[e.language]=a}y.value=new Date().getTime()}o.on("time",e=>l.value=Math.round(e.currentTime*1e3));function _(e){const m=e.find(a=>a.startTime<=l.value&&a.endTime>=l.value);return m!=null&&m.text.includes(`
`)?m.text.split(`
`):[m==null?void 0:m.text]}const y=S(new Date().getTime());return U([h,k,s,t],()=>y.value=new Date().getTime()),(e,m)=>(b(),N(X,{key:p(y),to:`#${e.playerId} .jw-captions`},[v("div",Xe,[p(t)==="fa"||p(t)==="fa+en"?(b(),x("div",Ge,[v("div",Ye,[(b(!0),x(R,null,z(_(p(n).fa),a=>(b(),x("pre",{key:a,class:"font-IRANSansX jw-text-track-cue empty:invisible",innerHTML:a},null,8,Je))),128))])])):A("",!0),p(t)==="en"||p(t)==="fa+en"?(b(),x("div",Ke,[v("div",We,[(b(!0),x(R,null,z(_(p(n).en),a=>(b(),x("pre",{key:a,class:"font-IRANSansX jw-text-track-cue empty:invisible",innerHTML:a},null,8,Ze))),128))])])):A("",!0)])],8,["to"]))}}),tt=u=>(te("data-v-5e1a5fa3"),u=u(),ae(),u),at={key:0,title:"",class:"child-item auto-dir bg-bg-13/50 border-bg-1/10 absolute bottom-full -right-[8em] z-20 mb-7 flex h-[18rem] w-[35rem] cursor-default rounded-xl border-2 p-4 backdrop-blur-lg"},lt={class:"flex flex-col flex-nowrap gap-8 overflow-y-auto px-2 w-full"},nt=["aria-label"],st={class:"flex w-full flex-row flex-nowrap items-center gap-2"},ot={class:"!text-fonts-200 whitespace-nowrap font-semibold"},rt=tt(()=>v("span",{class:"bg-bg-10 h-1 w-full rounded-full"},null,-1)),it={class:"flex flex-row flex-wrap items-center gap-4 !text-xs"},ut=["onClick"],fe=".jw-subtitles-icon",ct=Q({__name:"Player2SubtitlesSettings",props:{playerData:{},playerId:{}},setup(u){const f=u,{t}=le(),{disableBackdrop:s}=Be(),k=O(()=>[{title:t("subtitle.subtitle"),lable:"subtitle",selectedOption:h.value,select:e=>h.value=e,options:[{title:t("subtitle.persian"),value:"fa"},{title:t("subtitle.english"),value:"en"},{title:t("subtitle.persianAndEnglish"),value:"fa+en"},{title:t("subtitle.withoutSubtitle"),value:"none"}].filter(e=>{var m,a,T,j;return e.value==="fa+en"?((m=f.playerData.subtitle)==null?void 0:m.fa)&&((a=f.playerData.subtitle)==null?void 0:a.en):e.value==="fa"?(T=f.playerData.subtitle)==null?void 0:T.fa:e.value==="en"?(j=f.playerData.subtitle)==null?void 0:j.en:!0})},{title:t("subtitle.subtitleSize"),lable:"subtitle size",selectedOption:g.value,select:e=>g.value=e,options:[{title:t("subtitle.small"),value:"0.5"},{title:t("subtitle.medium"),value:"0.75"},{title:t("subtitle.huge"),value:"1.25"},{title:t("subtitle.veryHuge"),value:"1.50"}]},{title:t("subtitle.subtitleColor"),lable:"subtitle text color",selectedOption:o.value,select:e=>o.value=e,options:[{title:t("subtitle.yellow"),value:"#FF0"},{title:t("subtitle.white"),value:"#FFF"},{title:t("subtitle.cyan"),value:"#0FF"},{title:t("subtitle.purple"),value:"#F0F"}]},{title:t("subtitle.subtitleBackground"),lable:"subtitle background color",selectedOption:c.value,select:e=>c.value=e,options:[{title:t("subtitle.transparent"),value:"0"},...s.value?[]:[{title:t("subtitle.acrylic"),value:"acrylic"}],{title:t("subtitle.dimedBlack"),value:"0.5"},{title:t("subtitle.black"),value:"1"}]}]),h=B("preferredLanguage","fa"),g=B("preferredSize","0.75"),o=B("preferredColor","#FFF"),c=B("preferredBackground","acrylic"),n=S(!1),l=document.querySelector(fe);re(l,()=>n.value=!1);const i=window.jwplayer("jwplayer-main");V(()=>{_()});function _(){const e=document.querySelector(".jw-captions");c.value==="acrylic"?e==null||e.classList.add("acrylic"):e==null||e.classList.remove("acrylic"),c.value==="acrylic"&&s.value&&(console.log("hello?"),e==null||e.classList.remove("acrylic"),c.value="0");try{i.setCaptions({color:o.value,fontSize:16*Number(g.value),backgroundOpacity:Number(c.value)*100})}catch(m){console.error("updateCaptionStyle",m)}}function y(e){try{const m=i.getCaptionsList().findIndex(a=>(a.language||"none")===e);i.setCurrentCaptions(m)}catch(m){console.error("changeCaptionLanguage",m)}}return U(h,y),U([c,o,g],_),(e,m)=>(b(),N(X,{to:`#${e.playerId} ${fe}`},[v("div",{class:"flex inset-0 absolute",onClick:m[0]||(m[0]=a=>n.value=!p(n))}),I(H,{name:"player-options"},{default:q(()=>[p(n)?(b(),x("div",at,[v("div",lt,[(b(!0),x(R,null,z(p(k),a=>(b(),x("section",{key:a.lable,"aria-label":a.lable,class:"flex w-full flex-col gap-8 text-base"},[v("header",st,[v("h6",ot,E(a.title),1),rt]),v("ul",it,[(b(!0),x(R,null,z(a.options,T=>(b(),x("li",{key:T.title,class:M(["local-numbers bg-bg-11/50 hover:bg-bg-11 flex min-w-[9em] !cursor-pointer justify-center rounded-xl p-2 transition-colors",{"!bg-primary-500 !hover:bg-bg-primary-500 !cursor-default":a.selectedOption===T.value}]),onClick:j=>a.select(T.value)},E(T.title),11,ut))),128))])],8,nt))),128))])])):A("",!0)]),_:1})],8,["to"]))}});const dt=J(ct,[["__scopeId","data-v-5e1a5fa3"]]),pt=u=>(te("data-v-fb676fb3"),u=u(),ae(),u),ft={key:0,title:"",class:"child-item auto-dir bg-bg-13/50 border-bg-1/10 absolute bottom-full -right-[10.8rem] z-20 mb-7 flex h-[18rem] w-[35rem] cursor-default rounded-xl border-2 p-4 backdrop-blur-lg"},yt={class:"flex flex-col flex-nowrap gap-8 overflow-y-auto px-2 w-full"},vt=["aria-label"],bt={class:"flex w-full flex-row flex-nowrap items-center gap-2"},mt={class:"!text-fonts-200 whitespace-nowrap font-semibold"},gt=pt(()=>v("span",{class:"bg-bg-10 h-1 w-full rounded-full"},null,-1)),_t={class:"flex flex-row flex-wrap items-center gap-4 !text-xs"},ht=["onClick"],ye=".jw-settings-icon",wt=Q({__name:"Player2Settings",props:{playerData:{},playerId:{}},emits:["reloadPlayer"],setup(u,{emit:f}){const t=u,{t:s}=le(),k=O(()=>t.playerData.file.m3u8.some(a=>Object.keys(a).includes("2ch"))),h=O(()=>t.playerData.file.m3u8.some(a=>Object.keys(a).includes("6ch"))),g=S([]),o=O(()=>[...g.value.length>1?[{title:s("language"),label:"Audio track",selectedOption:l.value,select:a=>l.value=a,options:g.value.map(a=>({title:s(`langCode.${a}`),value:a}))}]:[],...k.value||h.value?[{title:s("playerSettings.audioChannels"),label:"Audio channel",selectedOption:c.value,select:a=>c.value=a,options:[{title:s("playerSettings.auto"),value:"default"},...h.value?[{title:s("playerSettings.6Channels"),value:"6ch"}]:[],...k.value?[{title:s("playerSettings.2Channels"),value:"2ch"}]:[]]}]:[],{title:s("playerSettings.playbackSpeed"),label:"Playback speed",selectedOption:n.value,select:a=>n.value=a,options:[{title:"0.5",value:"0.5"},{title:s("playerSettings.normal"),value:"1"},{title:"1.5",value:"1.5"},{title:"2",value:"2"}]}]),c=B("preferredAudioChannel","default"),n=B("preferredPlaybackSpeed","1"),l=B("preferredAudioTrack","en"),i=S(!1),_=document.querySelector(ye);re(_,()=>i.value=!1);const y=window.jwplayer("jwplayer-main");V(()=>e()),V(()=>{const a=[...new Set(y.getAudioTracks().filter(T=>T.language).map(T=>T.language))];a.length&&(g.value=a)}),y.on("audioTracks",async a=>{var C;const T=[...new Set(a.tracks.filter(P=>P.language).map(P=>P.language))];if(g.value=T,!T.length)return;const w=(C=T.reduce((P,F)=>(P[F]=a.tracks.filter(L=>L.language===F),P),{})[l.value][0])==null?void 0:C.hlsjsIndex;w===-1||a.currentTrack===w||(await Y(),y.setCurrentAudioTrack(w))});function e(){try{y.setPlaybackRate(Number(n.value))}catch(a){console.error("updatePlaybackSpeed",a)}}function m(){var C;const a=y.getAudioTracks(),T=[...new Set(a.filter(P=>P.language).map(P=>P.language))];if(!T.length)return;const w=(C=T.reduce((P,F)=>(P[F]=a.filter(L=>L.language===F),P),{})[l.value][0])==null?void 0:C.hlsjsIndex;try{y.setCurrentAudioTrack(w)}catch(P){console.error("updateAudioTrack",P)}}return U(c,()=>setTimeout(()=>f("reloadPlayer"),100)),U(n,()=>e()),U(l,()=>m()),(a,T)=>(b(),N(X,{to:`#${a.playerId} ${ye}`},[v("div",{class:"flex inset-0 absolute",onClick:T[0]||(T[0]=j=>i.value=!p(i))}),I(H,{name:"player-options"},{default:q(()=>[p(i)?(b(),x("div",ft,[v("div",yt,[(b(!0),x(R,null,z(p(o),j=>(b(),x("section",{key:j.label,"aria-label":j.label,class:"flex w-full flex-col gap-8 text-base"},[v("header",bt,[v("h6",mt,E(j.title),1),gt]),v("ul",_t,[(b(!0),x(R,null,z(j.options,w=>(b(),x("li",{key:w.title,class:M(["local-numbers bg-bg-11/50 hover:bg-bg-11 flex min-w-[9em] !cursor-pointer justify-center rounded-xl p-2 transition-colors",{"!bg-primary-500 !hover:bg-bg-primary-500 !cursor-default":j.selectedOption===w.value}]),onClick:C=>j.select(w.value)},E(w.title),11,ht))),128))])],8,vt))),128))])])):A("",!0)]),_:1})],8,["to"]))}});const kt=J(wt,[["__scopeId","data-v-fb676fb3"]]),ie=u=>(te("data-v-9c452e8c"),u=u(),ae(),u),xt={class:"absolute bottom-32 right-4 flex flex-col gap-2 font-IRANSansX"},St=ie(()=>v("span",{class:"shadow"},null,-1)),Tt={class:"content"},Pt=ie(()=>v("span",{class:"shadow"},null,-1)),jt={class:"content"},$t=ie(()=>v("span",{class:"shadow"},null,-1)),Ct={class:"content"},It={class:"content"},At=Q({__name:"Player2SideActions",props:{options:{},playerId:{}},emits:["play-next-episode"],setup(u,{emit:f}){const t=u,s=window.jwplayer("jwplayer-main"),k=O(()=>{if(t.options.intro_start)return _(t.options.intro_start)}),h=O(()=>{if(t.options.intro_end)return _(t.options.intro_end)}),g=O(()=>{if(t.options.previously_start)return _(t.options.previously_start)}),o=O(()=>{if(t.options.previously_end)return _(t.options.previously_end)}),c=O(()=>{if(t.options.end)return _(t.options.end)}),n=S({visible:!1,progress:0}),l=S({visible:!1,progress:0}),i=S({visible:!1,progress:0});V(()=>s.on("time",Ee(w=>y(Math.floor(w.currentTime)),1e3)));function _(w){const[C,P,F]=w.split(":");return parseInt(C)*3600+parseInt(P)*60+parseInt(F)}function y(w){typeof k.value=="number"&&typeof h.value=="number"&&(w>=k.value&&w<=h.value?(n.value.visible=!0,n.value.progress=(w-k.value)/(h.value-k.value)):n.value.visible=!1),typeof g.value=="number"&&typeof o.value=="number"&&(w>=g.value&&w<=o.value?(l.value.visible=!0,l.value.progress=(w-g.value)/(o.value-g.value)):l.value.visible=!1),typeof c.value=="number"&&!t.options.isLastEpisode&&(w>=c.value?m():i.value.visible=!1)}const e=S({token:t.options.token,cancelled:!1,busy:!1});async function m(){if(e.value.busy||e.value.cancelled)return;i.value.visible=!0,e.value.busy=!0;const w=()=>{e.value.cancelled=!0,i.value.progress=0,e.value.busy=!1};for(let C=0;C<50;C++){if(e.value.cancelled||(await ee.core.delay(100),s.getState()==="paused"))return w();i.value.progress=C/50}if(e.value.cancelled)return w();await ee.core.delay(1100),f("play-next-episode")}function a(){typeof h.value=="number"&&s.seek(h.value)}function T(){typeof o.value=="number"&&s.seek(o.value)}function j(){typeof c.value=="number"&&f("play-next-episode")}return(w,C)=>{const P=ve;return b(),N(X,{to:`#${w.playerId}`},[v("div",xt,[I(De,{name:"actions",appear:""},{default:q(()=>[p(n).visible?(b(),x("span",{key:"intro",class:"action",onClick:a},[v("span",{class:"bar",style:Z(`transform: scaleX(${p(n).progress})`)},null,4),St,v("div",Tt,[I(P,{name:"ph:arrow-clockwise-bold"}),v("p",null,E(w.$t("skipIntro")),1)])])):A("",!0),p(l).visible?(b(),x("span",{key:"previous",class:"action",onClick:T},[v("span",{class:"bar",style:Z(`transform: scaleX(${p(l).progress})`)},null,4),Pt,v("div",jt,[I(P,{name:"ph:arrow-clockwise-bold"}),v("p",null,E(w.$t("skipPreviously")),1)])])):A("",!0),p(i).visible?(b(),x("span",{key:"next-episode",class:"action",onClick:j,onMouseenter:C[0]||(C[0]=F=>p(e).cancelled=!0)},[v("span",{class:M(["bar",{"!hidden":p(e).cancelled===!0}]),style:Z(`transform: scaleX(${p(i).progress})`)},null,6),$t,v("div",Ct,[I(P,{name:"ph:skip-forward-bold"}),v("p",It,E(w.$t("nextEpisode")),1)])],32)):A("",!0)]),_:1})])],8,["to"])}}});const Bt=J(At,[["__scopeId","data-v-9c452e8c"]]),Et={class:"relative h-full flex items-center"},Dt={key:0,class:"auto-label flex px-2 py-[0.1rem] text-[10px] rounded-full bg-primary-500 absolute -top-[0.5rem] font-bold -right-[1rem]"},Ft={class:"font-semibold"},Lt={key:0,title:"",class:"child-item auto-dir bg-bg-13/50 border-bg-1/10 absolute bottom-full right-1/2 translate-x-1/2 z-[100] mb-7 flex min-h-[10em] w-[13em] cursor-default rounded-xl border-2 py-4 backdrop-blur-lg"},Ot={class:"flex w-full flex-col flex-nowrap gap-8 overflow-y-auto"},Nt={class:"flex w-full flex-col gap-4 text-base"},Vt={class:"flex flex-col gap-2"},qt=["onClick"],Ut={class:"relative"},oe=".jw-quality-selector-icon",Rt=Q({__name:"Player2Quality",props:{playerData:{},playerId:{}},emits:["reloadPlayer"],setup(u){const f=window.jwplayer("jwplayer-main"),t=B("preferredQuality","AUTO"),s=S([]),k=S(t.value!=="AUTO"?t.value:"720p");function h(n){const l=n===-1?0:n;if(o.value=!1,!f)return;const i=s.value[l];t.value=i.label,f.setCurrentQuality(l)}function g(n){s.value=n.map(i=>({label:i.label.includes("p")?i.label:"AUTO",bitrate:i.bitrate,width:i.width,height:i.height}));const l=s.value.findIndex(i=>i.label===t.value);h(l)}f.on("levels",n=>{g(n.levels)}),V(()=>{const n=f.getQualityLevels();n&&n.length&&g(n)}),f.on("visualQuality",n=>{if(!n.level)return;const l=s.value[n.level.index];k.value=l.label});const o=S(!1),c=document.querySelector(oe);return re(c,()=>o.value=!1),(n,l)=>(b(),N(X,{to:`#${n.playerId} ${oe}`},[v("div",{class:"flex inset-0 absolute z-10",onClick:l[0]||(l[0]=i=>o.value=!p(o))}),(b(),N(X,{to:oe},[v("div",Et,[p(t)==="AUTO"?(b(),x("span",Dt,E(n.$t("auto")),1)):A("",!0),v("span",Ft,E(p(k)),1)])])),I(H,{name:"player-options"},{default:q(()=>[p(o)?(b(),x("div",Lt,[v("div",Ot,[v("section",Nt,[v("ul",Vt,[(b(!0),x(R,null,z(p(s),i=>(b(),x("li",{key:i.label,class:M(["hover:bg-bg-1/10 hover:!text-fonts-50 !text-fonts-200 relative flex w-full min-w-[9em] cursor-pointer items-center justify-center gap-2 p-3 transition-colors",{"!bg-bg-1/10 !hover:bg-bg-1/20 !text-fonts-50 !cursor-default":i.label===p(t)}]),onClick:_=>h(p(s).indexOf(i))},[v("span",{class:M(["bg-primary-500 shadow-primary-500 absolute left-2 top-1/2 h-1/2 w-[2px] -translate-y-1/2 rounded-full opacity-0 shadow-[0_0_8px_1px]",{"!opacity-100":i.label===p(t)}])},null,2),v("div",Ut,E(i.label.replace("AUTO",n.$t("auto"))),1)],10,qt))),128))])])])])):A("",!0)]),_:1})],8,["to"]))}});const zt=J(Rt,[["__scopeId","data-v-8fc2616d"]]),Qt=""+new URL("Settings.2d4e702a.svg",import.meta.url).href;function Mt({t:u}){return this.addButton(Qt,u("settings.settings"),()=>{},"jw-settings","clickable-btn jw-settings-icon")}function Ht({t:u}){const f=()=>{};return this.addButton("",u("qualitySelector"),f,"jw-quality-selector","clickable-btn jw-quality-selector-icon")}const Xt=""+new URL("ClosedCaptioning.9039dab5.svg",import.meta.url).href;function Gt({t:u}){const f=()=>{};return this.addButton(Xt,u("subtitleSettings"),f,"jw-subtitles","clickable-btn jw-subtitles-icon")}const Yt=""+new URL("Cards.1c7501fb.svg",import.meta.url).href;function Jt({t:u,playerData:f}){const t=()=>{this.pause(),this.getFullscreen()&&this.setFullscreen(!1),setTimeout(()=>{var s;return(s=document.querySelector(".selected-episode"))==null?void 0:s.scrollIntoView({behavior:"smooth",block:"center"})},100)};return this.addButton(Yt,u("episodeSelector"),t,"jw-episode-selector",`clickable-btn jw-episode-selector-icon ${f.info.isSeries?"":"jw-hidden"}`)}const Kt=""+new URL("SkipForward.26508f6e.svg",import.meta.url).href;function Wt({t:u,$emit:f,playerData:t}){var g;const s=()=>f("playNextEpisode");this.addButton(Kt,u("nextEpisode"),s,"jw-skip-episode","jw-skip-episode-icon");const k=document.querySelector(".jw-skip-episode-icon");if(!k)return;k.style.display=t.options.isLastEpisode||!t.info.isSeries?"none":"inherit";const h=document.querySelector(".jw-icon-volume");(g=h==null?void 0:h.parentElement)==null||g.insertBefore(k,h==null?void 0:h.previousSibling)}const Zt=""+new URL("ArrowClockwise.985ddcef.svg",import.meta.url).href;function ea({t:u}){var h,g;const f=()=>this.seek(this.getPosition()+10);this.addButton(Zt,u("forward"),f,"jw-forward","jw-forward-icon");const t=document.querySelector(".jw-icon-playback"),s=document.querySelector(".jw-skip-episode-icon"),k=document.querySelector(".jw-forward-icon");t&&s&&((h=t.parentNode)==null||h.insertBefore(t,s)),s&&k&&((g=s.parentNode)==null||g.insertBefore(k,s))}const ta=[Jt,Ht,Gt,Mt,Wt,ea];function aa(u){ta.forEach(f=>f.bind(this)(u))}const la={class:"flex w-full h-full relative"},na={key:"ads-player",class:"absolute z-40 h-full w-full"},sa=v("div",{id:"jwplayer-main",class:"h-full"},null,-1),ra=Q({__name:"Player2Main",props:{playerData:{}},emits:["onVideoEnded","onPlay","onPause","onPlayerReady","reloadPlayer","playNextEpisode","onSeek","onProgress"],setup(u,{expose:f,emit:t}){const s=u,{t:k}=le(),{removeFocus:h}=be(),g=B("preferredAudioChannel","default"),o=B("preferredQuality","AUTO"),c=B("_nad",0);function n(){this.play();const r=document.querySelector(".jw-skip-episode-icon");r&&(r.style.display=s.playerData.options.isLastEpisode||!s.playerData.info.isSeries?"none":"inherit")}function l(r,d){const $={title:r.info.isSeries?r.info.title:r.info.displayName,description:r.info.isSeries?r.info.displayName:"",image:r.image.cover_webp||r.image.cover,sources:r.file.m3u8.map(D=>({file:D[g.value]||D.default,label:D.label.replace("خودکار","AUTO").toUpperCase(),default:D.label.replace("خودکار","AUTO").toUpperCase()===o.value}))};if(d!=null&&d.episodeChanged)return this.load([{...$}]),t("onPlayerReady"),this.once("meta",()=>this.seek(d.position)),n.bind(this)();a.value=this.setup({...ge,...$,intl:_e,autostart:!0}),this.once("meta",y.bind(this))}async function i(){await Y();const r=aa.bind(this),d={$emit:t,playerData:s.playerData,t:k};r(d),h("jwplayer-main"),m.value=!0,t("onPlayerReady")}function _(){const r=s.playerData.ads;r&&c.value!==-1&&(c.value>new Date().getTime()||ke.bind(this)(r))}function y(){s.playerData.info.time&&this.seek(s.playerData.info.time)}function e(r=0){l.bind(this)(s.playerData,{episodeChanged:!0,position:r})}const m=S(!1),a=S(),T=S();V(async()=>{W();const d=(await me())("jwplayer-main");l.bind(d)(s.playerData),d.on("ready",i.bind(d)),d.on("complete",()=>t("onVideoEnded")),d.on("play",()=>{_.bind(d)(),t("onPlay")}),d.on("pause",()=>t("onPause")),d.on("seek",$=>t("onSeek",$)),d.on("time",$=>{t("onProgress",$)}),d.on("fullscreen",$=>{var D;return!$.fullscreen&&((D=document.getElementById("main-scroller"))==null?void 0:D.scrollTo({top:0}))}),d.on("error",async $=>{var D;console.log("error",$),$.code===233001&&e.bind(d)(d.getPosition()),$.code===333001&&e.bind(d)(d.getPosition()),$.code>=333400&&$.code<=333599&&e.bind(d)(d.getPosition()),$.code>=233400&&$.code<=233599&&e.bind(d)(d.getPosition()),await Y(),(D=document.querySelector(".jw-error-msg"))==null||D.append(T.value)})}),Fe(()=>{a.value&&(a.value.stop(),a.value.remove())});const j=()=>{var r;return(r=a.value)==null?void 0:r.play()},w=()=>{var r;return(r=a.value)==null?void 0:r.pause()},C=r=>{var d;return(d=a.value)==null?void 0:d.seek(r)},P=r=>{var d;return(d=a.value)==null?void 0:d.setFullscreen(r)},F=()=>{var r;return(r=a.value)==null?void 0:r.getFullscreen()};f({play:j,pause:w,seek:C,isFullscreen:F,setFullscreen:P,updatePlayerData:l,playerInstance:a});const L=S(!1);U(L,async()=>{var d;if(L.value===!1)return;const r=((d=a.value)==null?void 0:d.getState())!=="playing";for(;L.value;)w(),F()&&P(!1),await ee.core.delay(250);r||j()});const ne=S(!1),K=S(),ue=S(),ce=S(),de=S(""),pe=S("#");function W(r){r&&(c.value=new Date().getTime()+864e5),ne.value=!1,L.value=!1}async function ke(r){for(W(),await Y(),L.value=!0,ne.value=!0,pe.value=r.link,ce.value=r.skipAfter,ue.value=r.title,de.value=r.video;!document.getElementById("ad-player");)await ee.core.delay(50);this.pause(),K.value=document.getElementById("ad-player"),K.value.src=r.video,K.value.play(),K.value.onended=()=>W(!0)}return(r,d)=>{const $=Qe,D=et,xe=dt,Se=kt,Te=Bt,Pe=zt,je=Oe;return b(),x("div",la,[I(H,{name:"fade-preset"},{default:q(()=>[p(ne)?(b(),x("div",na,[r.playerData.ads?(b(),N($,{key:0,"ad-title":p(ue),video:p(de),"callback-url":p(pe),skip:p(ce),onOnVideoEnded:d[0]||(d[0]=se=>W(!0))},null,8,["ad-title","video","callback-url","skip"])):A("",!0)])):A("",!0)]),_:1}),sa,p(m)?(b(),x("span",{key:r.playerData.info.file_id},[I(D,{"player-data":r.playerData,"player-id":"jwplayer-main"},null,8,["player-data"]),I(xe,{"player-data":r.playerData,"player-id":"jwplayer-main"},null,8,["player-data"]),I(Se,{"player-id":"jwplayer-main","player-data":r.playerData,onReloadPlayer:d[1]||(d[1]=se=>{var G;return e.bind(p(a))((G=p(a))==null?void 0:G.getPosition())})},null,8,["player-data"]),I(Te,{options:r.playerData.options,"player-id":"jwplayer-main",onPlayNextEpisode:d[2]||(d[2]=se=>t("playNextEpisode"))},null,8,["options"]),I(Pe,{"player-data":r.playerData,"player-id":"jwplayer-main"},null,8,["player-data"]),v("div",{ref_key:"errorButton",ref:T,class:"retry hidden"},[I(je,{class:"btn-primary text-sm ms-8 whitespace-nowrap",onClick:d[3]||(d[3]=se=>{var G;return e.bind(p(a))((G=p(a))==null?void 0:G.getPosition())})},{default:q(()=>[Le(E(r.$t("retry")),1)]),_:1})],512)])):A("",!0)])}}});export{ra as _};
