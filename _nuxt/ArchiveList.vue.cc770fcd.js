import{_ as w}from"./SortByDropdown.vue.1e2b17b4.js";import{_ as R}from"./TitleList.vue.31935ed7.js";import{d as B,P,z as S,r as n,Q as E,l as _,S as q,o as x,e as k,h as y,w as L,g as a,I as M,F as N}from"./entry.facd84ab.js";import{u as O}from"./useArchiveIcon.18656aa1.js";const T={class:"flex min-h-full w-full flex-col"},z=B({__name:"ArchiveList",props:{slug:null},setup(m){const r=m,p=P(),A=S(),l=n(!0),u=E(),C=_(()=>{var e;return(e=[...p.categories,...p.genres].find(s=>s.slug===r.slug))==null?void 0:e.name}),c=n(),v=n(),i=_(()=>u.query.sortBy||"relevant"),g=u.query.stream==="true",f=n({}),d=n(i.value);async function h(e,s){var o;s!==d.value&&(f.value={},d.value=s),l.value=!0;const t=await M("ARCHIVE::"+[r.slug].join(",")+e+s+g,()=>N.API.actions.archive([r.slug],g,e,s));c.value=t,l.value=!1,t&&((o=c.value)!=null&&o.error&&A(c.value.msg,"ERROR"),f.value[e]=t.result.posts,v.value={pages:t.result.pages,page:t.result.page,total:t.result.total})}return q(()=>{const e=Number(u.query.page||"1");h(e,i.value)}),(e,s)=>{const t=w,o=R;return x(),k("div",T,[y(o,{"secondary-title-type":"",transparent:"",class:"min-h-full",title:a(C)||"",icon:("useArchiveIcon"in e?e.useArchiveIcon:a(O))(m.slug),"is-loading":a(l),data:a(f),"result-info":a(v),onPageChanged:s[0]||(s[0]=I=>h(I,a(i)))},{header:L(()=>[y(t)]),_:1},8,["title","icon","is-loading","data","result-info"])])}}});export{z as _};
