import{at as Te,d as U,n as x,o as R,au as Ce,g as m,h as k,k as E,y as j,z as O,j as p,i as $,w as D,q as y,C as W,T as z,B as C,P as Z,_ as Ie,D as ve,G as te,H as le,I as Y,ae as Be,ai as T,b as ae,v as M,F as V,r as q,al as Q,m as Ae,c as N,ak as re,am as Ee,an as Fe,p as ee,f as Le,A as De,$ as Ne}from"./entry.86c4bbf1.js";function be(){return{removeFocus:f=>{const t=document.getElementById(f);if(!t)return console.error(`Element with id ${f} not found`);t.setAttribute("tabindex","-1"),t.querySelectorAll("*").forEach(w=>w.setAttribute("tabindex","-1"))}}}async function me(){console.log("30nama Player v6.0.0"),await Te(()=>import("./jwplayer.8.27.1.22b8f9e1.js"),[],import.meta.url);const o=window.jwplayer;return window.jwplayer.key="Pha4C3UB2JzMWjqT8w1F793Ujv6hTVbk+3KoY/G7Gn4=",o}const _e={controls:!0,fullscreen:"true",displaytitle:!0,renderCaptionsNatively:!1,autostart:!1,width:"100%",horizontalVolumeSlider:!0,aboutlink:"https://30nama.com",abouttext:"30nama",safarihlsjs:!0,pipIcon:"disabled",skin:{name:"30nama"}},ge={fa:{airplay:"ایرپلی",audioTracks:"کانال های صوتی",auto:"خودکار",buffer:"بافر",captionsStyles:"سبک‌های زیرنویس",cast:"پخش",cc:"زیرنویس",close:"بستن",displayHeading:"نمایش سربرگ",exitFullscreen:"خروج از حالت تمام صفحه",fullscreen:"تمام صفحه",hd:"HD",liveBroadcast:"پخش زنده",logo:"لوگو",mute:"سکوت",next:"بعدی",nextUp:"قسمت بعد",notLive:"زنده نیست",off:"خاموش",pause:"توقف",pipIcon:"تصویر در تصویر",play:"پخش",playback:"پخش مجدد",playbackRates:"سرعت پخش",player:"پخش کننده",poweredBy:"قدرت گرفته از",prev:"قبلی",related:"مرتبط",replay:"پخش مجدد",rewind:"بازگرداندن",settings:"تنظیمات",slider:"اسلایدر",stop:"توقف",unmute:"باز کردن صدا",videoInfo:"اطلاعات ویدئو",volume:"صدا",volumeSlider:"اسلایدر صدا",advertising:{admessage:"پیام تبلیغاتی",cuetext:"متن راهنما",podmessage:"پیام پادکست",skipmessage:"پیام رد کردن",skiptext:"رد کردن"},shortcuts:{captionsToggle:"تغییر زیرنویس",decreaseVolume:"کاهش صدا",fullscreenToggle:"تغییر حالت تمام صفحه",increaseVolume:"افزایش صدا",keyboardShortcuts:"میانبرهای صفحه کلید",playPause:"پخش / توقف",seekBackward:"پرش به عقب",seekForward:"پرش به جلو",seekPercent:"درصد زمان ویدیو",spacebar:"space",volumeToggle:"تغییر صدا"},sharing:{heading:"اشتراک گذاری",link:"لینک"},errors:{badConnection:"اتصال بد",cantLoadPlayer:"بارگذاری پخش کننده ممکن نیست",cantPlayInBrowser:"پخش در این مرورگر ممکن نیست",cantPlayVideo:"پخش ویدئو ممکن نیست",errorCode:"کد خطا",liveStreamDown:"پخش زنده خاموش است",protectedContent:"محتوای محافظت شده",technicalError:"خطای فنی"}}},he=o=>(te("data-v-1dd8d818"),o=o(),le(),o),Ve={class:"relative h-full w-full"},qe=he(()=>y("div",{id:"jwplayer-main-ads",class:"h-full w-full jwplayer-main-ads"},null,-1)),Ue=he(()=>y("span",{class:"shadow"},null,-1)),Re={key:0,class:"content"},Oe={key:0,class:"local-numbers w-4 text-left"},ze=U({__name:"Player2Ads",props:{adTitle:{},skip:{},video:{},callbackUrl:{}},emits:["onVideoEnded","onPlay","onPause","onPlayerReady","reloadPlayer","playNextEpisode","onSeek","onProgress"],setup(o,{emit:f}){const t=o,{removeFocus:r}=be();function w(){l.value=this.setup({..._e,title:t.adTitle,sources:[{file:t.video,label:"AUTO"}],intl:ge,autostart:!0})}async function _(){await Z(),r("jwplayer-main-ads"),n.value=!0,f("onPlayerReady")}function g(){w.bind(this)()}const n=x(!1),c=x(0),a=x(!1),l=x();R(async()=>{const b=(await me())("jwplayer-main-ads");w.bind(b)(),b.on("ready",_.bind(b)),b.on("complete",()=>f("onVideoEnded")),b.on("play",()=>f("onPlay")),b.on("pause",()=>f("onPause")),b.on("seek",e=>{var h;a.value=Math.round(e.offset)!==Math.round(c.value),a.value?(h=l.value)==null||h.seek(c.value):a.value=!1,f("onSeek",e)}),b.on("time",e=>{e.currentTime&&t.skip&&(d.value=Math.floor(e.currentTime/t.skip*100)),a.value||(c.value=e.currentTime),f("onProgress",e)}),b.on("fullscreen",e=>{var h;return!e.fullscreen&&((h=document.getElementById("main-scroller"))==null?void 0:h.scrollTo({top:0}))}),b.on("error",e=>{console.log("error",e),e.code===233001&&g.bind(b)(),e.code===333001&&g.bind(b)(),e.code>=333400&&e.code<=333599&&g.bind(b)(),e.code>=233400&&e.code<=233599&&g.bind(b)()})}),Ce(()=>{l.value&&(l.value.stop(),l.value.remove())});const d=x(0);return(v,b)=>{const e=Ie,h=ve;return m(),k("div",Ve,[qe,v.callbackUrl?(m(),E(e,{key:0,class:"absolute inset-0 top-0 h-2/3 cursor-pointer",to:v.callbackUrl,external:"",target:"_blank"},null,8,["to"])):j("",!0),v.skip?(m(),k("div",{key:1,class:O(["absolute bottom-32 z-50 mx-8",{"pointer-events-none opacity-50":p(d)<100}])},[$(z,{name:"actions",appear:""},{default:D(()=>[v.skip?(m(),k("span",{key:"intro",class:"action",onClick:b[0]||(b[0]=i=>f("onVideoEnded"))},[y("span",{class:"bar",style:W(`transform: scaleX(${p(d)/100})`)},null,4),Ue,p(l)?(m(),k("div",Re,[$(z,{name:"fade-preset",mode:"out-in"},{default:D(()=>{var i;return[p(d)<100?(m(),k("p",Oe,C(v.skip-Math.floor(((i=p(l))==null?void 0:i.getPosition())||0)),1)):(m(),E(h,{key:"icon",name:"ph:skip-forward-bold"}))]}),_:1}),y("p",null,C(v.$t("skip")),1)])):j("",!0)])):j("",!0)]),_:1})],2)):j("",!0)])}}});const Me=Y(ze,[["__scopeId","data-v-1dd8d818"]]);var we={exports:{}};(function(o,f){var t=function(){var r={};r.fromVtt=function(n,c,a){var l=!!a;n=n.replace(/\r/g,"");var d=/(\d+)?\n?(\d{2}:\d{2}:\d{2}[,.]\d{3}) --> (\d{2}:\d{2}:\d{2}[,.]\d{3}).*\n/g;n=n.split(d),n.shift();for(var v=[],b=0;b<n.length;b+=4){var e=n[b+3];l&&(e=e.split(`
`),e.shift(),e=e.join(`
`)),e.trim().length!==0&&v.push({id:n[b]?+n[b].trim():v.length+1,startTime:w(n[b+1].trim(),c),endTime:w(n[b+2].trim(),c),text:e.trim()})}return v},r.toVtt=function(n){if(!n instanceof Array)return"";for(var c="",a=0;a<n.length;a++){var l=n[a];!isNaN(l.startTime)&&!isNaN(l.endTime)&&(l.startTime=g(parseInt(l.startTime,10)),l.endTime=g(parseInt(l.endTime,10))),c+=l.id+`\r
`,c+=l.startTime+" --> "+l.endTime+`\r
`,c+=l.text.replace(`
`,`\r
`)+`\r
\r
`}return c};var w=function(n,c){return c==="ms"?_(n):c==="s"?_(n)/1e3:n},_=function(n){var c=/(\d+):(\d{2}):(\d{2})[,.](\d{3})/,a=c.exec(n);if(a===null)return 0;for(var l=1;l<5;l++)a[l]=parseInt(a[l],10),isNaN(a[l])&&(a[l]=0);return a[1]*36e5+a[2]*6e4+a[3]*1e3+a[4]},g=function(n){var c=[36e5,6e4,1e3],a=[];for(var l in c){var d=(n/c[l]>>0).toString();d.length<2&&(d="0"+d),n%=c[l],a.push(d)}var v=n.toString();if(v.length<3)for(l=0;l<=3-v.length;l++)v="0"+v;return a.join(":")+","+v};return r}();o.exports=t})(we);var Qe=we.exports;const He=Be(Qe),Xe={class:"jw-text-track-container jw-reset !absolute !m-[1.5%]"},Ge={key:0,class:"jw-text-track-display fa"},Ye={class:"flex flex-col items-center gap-1"},Je=["innerHTML"],Ke={key:1,class:"jw-text-track-display en"},We={class:"flex flex-col items-center gap-1"},Ze=["innerHTML"],et=U({__name:"Player2Subtitles",props:{playerData:{},playerId:{}},setup(o){const f=o,t=T("preferredLanguage","fa"),r=T("preferredSize","0.75"),w=T("preferredColor","#FFF"),_=T("preferredBackground","acrylic"),{t:g}=ae(),n=window.jwplayer("jwplayer-main"),c=[];R(()=>{const e=f.playerData.subtitle;e&&(e.en&&c.push({file:e.en,label:g("subtitle.english"),kind:"captions",language:"en",default:t.value==="en"}),e.fa&&c.push({file:e.fa,label:g("subtitle.persian"),kind:"captions",language:"fa",default:t.value==="fa"}),d())});const a=x({fa:[],en:[]}),l=x(n.getPosition()*1e3||0);async function d(){for(const e of c){if(!e.language)continue;const h=await $fetch(e.file),i=He.fromVtt(h,"ms");a.value[e.language]=i}b.value=new Date().getTime()}n.on("time",e=>l.value=Math.round(e.currentTime*1e3));function v(e){const h=e.find(i=>i.startTime<=l.value&&i.endTime>=l.value);return h!=null&&h.text.includes(`
`)?h.text.split(`
`):[h==null?void 0:h.text]}const b=x(new Date().getTime());return M([_,w,r,t],()=>b.value=new Date().getTime()),(e,h)=>(m(),E(Q,{key:p(b),to:`#${e.playerId} .jw-captions`},[y("div",Xe,[p(t)==="fa"||p(t)==="fa+en"?(m(),k("div",Ge,[y("div",Ye,[(m(!0),k(V,null,q(v(p(a).fa),i=>(m(),k("pre",{key:i,class:"font-IRANSansX jw-text-track-cue empty:invisible",innerHTML:i},null,8,Je))),128))])])):j("",!0),p(t)==="en"||p(t)==="fa+en"?(m(),k("div",Ke,[y("div",We,[(m(!0),k(V,null,q(v(p(a).en),i=>(m(),k("pre",{key:i,class:"font-IRANSansX jw-text-track-cue empty:invisible",innerHTML:i},null,8,Ze))),128))])])):j("",!0)])],8,["to"]))}}),tt=o=>(te("data-v-5e1a5fa3"),o=o(),le(),o),lt={key:0,title:"",class:"child-item auto-dir bg-bg-13/50 border-bg-1/10 absolute bottom-full -right-[8em] z-20 mb-7 flex h-[18rem] w-[35rem] cursor-default rounded-xl border-2 p-4 backdrop-blur-lg"},at={class:"flex flex-col flex-nowrap gap-8 overflow-y-auto px-2 w-full"},nt=["aria-label"],st={class:"flex w-full flex-row flex-nowrap items-center gap-2"},ot={class:"!text-fonts-200 whitespace-nowrap font-semibold"},rt=tt(()=>y("span",{class:"bg-bg-10 h-1 w-full rounded-full"},null,-1)),it={class:"flex flex-row flex-wrap items-center gap-4 !text-xs"},ut=["onClick"],fe=".jw-subtitles-icon",ct=U({__name:"Player2SubtitlesSettings",props:{playerData:{},playerId:{}},setup(o){const f=o,{t}=ae(),{disableBackdrop:r}=Ae(),w=N(()=>[{title:t("subtitle.subtitle"),lable:"subtitle",selectedOption:_.value,select:e=>_.value=e,options:[{title:t("subtitle.persian"),value:"fa"},{title:t("subtitle.english"),value:"en"},{title:t("subtitle.persianAndEnglish"),value:"fa+en"},{title:t("subtitle.withoutSubtitle"),value:"none"}].filter(e=>{var h,i,I,F;return e.value==="fa+en"?((h=f.playerData.subtitle)==null?void 0:h.fa)&&((i=f.playerData.subtitle)==null?void 0:i.en):e.value==="fa"?(I=f.playerData.subtitle)==null?void 0:I.fa:e.value==="en"?(F=f.playerData.subtitle)==null?void 0:F.en:!0})},{title:t("subtitle.subtitleSize"),lable:"subtitle size",selectedOption:g.value,select:e=>g.value=e,options:[{title:t("subtitle.small"),value:"0.5"},{title:t("subtitle.medium"),value:"0.75"},{title:t("subtitle.huge"),value:"1.25"},{title:t("subtitle.veryHuge"),value:"1.50"}]},{title:t("subtitle.subtitleColor"),lable:"subtitle text color",selectedOption:n.value,select:e=>n.value=e,options:[{title:t("subtitle.yellow"),value:"#FF0"},{title:t("subtitle.white"),value:"#FFF"},{title:t("subtitle.cyan"),value:"#0FF"},{title:t("subtitle.purple"),value:"#F0F"}]},{title:t("subtitle.subtitleBackground"),lable:"subtitle background color",selectedOption:c.value,select:e=>c.value=e,options:[{title:t("subtitle.transparent"),value:"0"},...r.value?[]:[{title:t("subtitle.acrylic"),value:"acrylic"}],{title:t("subtitle.dimedBlack"),value:"0.5"},{title:t("subtitle.black"),value:"1"}]}]),_=T("preferredLanguage","fa"),g=T("preferredSize","0.75"),n=T("preferredColor","#FFF"),c=T("preferredBackground","acrylic"),a=x(!1),l=document.querySelector(fe);re(l,()=>a.value=!1);const d=window.jwplayer("jwplayer-main");R(()=>{v()});function v(){const e=document.querySelector(".jw-captions");c.value==="acrylic"?e==null||e.classList.add("acrylic"):e==null||e.classList.remove("acrylic"),c.value==="acrylic"&&r.value&&(console.log("hello?"),e==null||e.classList.remove("acrylic"),c.value="0");try{d.setCaptions({color:n.value,fontSize:16*Number(g.value),backgroundOpacity:Number(c.value)*100})}catch(h){console.error("updateCaptionStyle",h)}}function b(e){try{const h=d.getCaptionsList().findIndex(i=>(i.language||"none")===e);d.setCurrentCaptions(h)}catch(h){console.error("changeCaptionLanguage",h)}}return M(_,b),M([c,n,g],v),(e,h)=>(m(),E(Q,{to:`#${e.playerId} ${fe}`},[y("div",{class:"flex inset-0 absolute",onClick:h[0]||(h[0]=i=>a.value=!p(a))}),$(z,{name:"player-options"},{default:D(()=>[p(a)?(m(),k("div",lt,[y("div",at,[(m(!0),k(V,null,q(p(w),i=>(m(),k("section",{key:i.lable,"aria-label":i.lable,class:"flex w-full flex-col gap-8 text-base"},[y("header",st,[y("h6",ot,C(i.title),1),rt]),y("ul",it,[(m(!0),k(V,null,q(i.options,I=>(m(),k("li",{key:I.title,class:O(["local-numbers bg-bg-11/50 hover:bg-bg-11 flex min-w-[9em] !cursor-pointer justify-center rounded-xl p-2 transition-colors",{"!bg-primary-500 !hover:bg-bg-primary-500 !cursor-default":i.selectedOption===I.value}]),onClick:F=>i.select(I.value)},C(I.title),11,ut))),128))])],8,nt))),128))])])):j("",!0)]),_:1})],8,["to"]))}});const dt=Y(ct,[["__scopeId","data-v-5e1a5fa3"]]),pt=o=>(te("data-v-0e5f549f"),o=o(),le(),o),ft={key:0,title:"",class:"child-item auto-dir bg-bg-13/50 border-bg-1/10 absolute bottom-full -right-[10.8rem] z-20 mb-7 flex h-[18rem] w-[35rem] cursor-default rounded-xl border-2 p-4 backdrop-blur-lg"},yt={class:"flex flex-col flex-nowrap gap-8 overflow-y-auto px-2 w-full"},vt=["aria-label"],bt={class:"flex w-full flex-row flex-nowrap items-center gap-2"},mt={class:"!text-fonts-200 whitespace-nowrap font-semibold"},_t=pt(()=>y("span",{class:"bg-bg-10 h-1 w-full rounded-full"},null,-1)),gt={class:"flex flex-row flex-wrap items-center gap-4 !text-xs"},ht=["onClick"],ye=".jw-settings-icon",wt=U({__name:"Player2Settings",props:{playerId:{}},emits:["reloadPlayer"],setup(o,{emit:f}){const{t}=ae(),r=N(()=>[{title:t("playerSettings.audioChannels"),label:"Audio channel",selectedOption:w.value,select:l=>w.value=l,options:[{title:t("playerSettings.auto"),value:"default"},{title:t("playerSettings.6Channels"),value:"6ch"},{title:t("playerSettings.2Channels"),value:"2ch"}]},{title:t("playerSettings.playbackSpeed"),label:"Playback speed",selectedOption:_.value,select:l=>_.value=l,options:[{title:"0.5",value:"0.5"},{title:t("playerSettings.normal"),value:"1"},{title:"1.5",value:"1.5"},{title:"2",value:"2"}]}]),w=T("preferredAudioChannel","default"),_=T("preferredPlaybackSpeed","1"),g=x(!1),n=document.querySelector(ye);re(n,()=>g.value=!1);const c=window.jwplayer("jwplayer-main");R(()=>{a()});function a(){try{c.setPlaybackRate(Number(_.value))}catch(l){console.error("updatePlaybackSpeed",l)}}return M(w,()=>setTimeout(()=>f("reloadPlayer"),100)),M(_,()=>a()),(l,d)=>(m(),E(Q,{to:`#${l.playerId} ${ye}`},[y("div",{class:"flex inset-0 absolute",onClick:d[0]||(d[0]=v=>g.value=!p(g))}),$(z,{name:"player-options"},{default:D(()=>[p(g)?(m(),k("div",ft,[y("div",yt,[(m(!0),k(V,null,q(p(r),v=>(m(),k("section",{key:v.label,"aria-label":v.label,class:"flex w-full flex-col gap-8 text-base"},[y("header",bt,[y("h6",mt,C(v.title),1),_t]),y("ul",gt,[(m(!0),k(V,null,q(v.options,b=>(m(),k("li",{key:b.title,class:O(["local-numbers bg-bg-11/50 hover:bg-bg-11 flex min-w-[9em] !cursor-pointer justify-center rounded-xl p-2 transition-colors",{"!bg-primary-500 !hover:bg-bg-primary-500 !cursor-default":v.selectedOption===b.value}]),onClick:e=>v.select(b.value)},C(b.title),11,ht))),128))])],8,vt))),128))])])):j("",!0)]),_:1})],8,["to"]))}});const kt=Y(wt,[["__scopeId","data-v-0e5f549f"]]),ie=o=>(te("data-v-9c452e8c"),o=o(),le(),o),xt={class:"absolute bottom-32 right-4 flex flex-col gap-2 font-IRANSansX"},St=ie(()=>y("span",{class:"shadow"},null,-1)),Pt={class:"content"},$t=ie(()=>y("span",{class:"shadow"},null,-1)),jt={class:"content"},Tt=ie(()=>y("span",{class:"shadow"},null,-1)),Ct={class:"content"},It={class:"content"},Bt=U({__name:"Player2SideActions",props:{options:{},playerId:{}},emits:["play-next-episode"],setup(o,{emit:f}){const t=o,r=window.jwplayer("jwplayer-main"),w=N(()=>{if(t.options.intro_start)return v(t.options.intro_start)}),_=N(()=>{if(t.options.intro_end)return v(t.options.intro_end)}),g=N(()=>{if(t.options.previously_start)return v(t.options.previously_start)}),n=N(()=>{if(t.options.previously_end)return v(t.options.previously_end)}),c=N(()=>{if(t.options.end)return v(t.options.end)}),a=x({visible:!1,progress:0}),l=x({visible:!1,progress:0}),d=x({visible:!1,progress:0});R(()=>r.on("time",Ee(S=>b(Math.floor(S.currentTime)),1e3)));function v(S){const[A,L,H]=S.split(":");return parseInt(A)*3600+parseInt(L)*60+parseInt(H)}function b(S){typeof w.value=="number"&&typeof _.value=="number"&&(S>=w.value&&S<=_.value?(a.value.visible=!0,a.value.progress=(S-w.value)/(_.value-w.value)):a.value.visible=!1),typeof g.value=="number"&&typeof n.value=="number"&&(S>=g.value&&S<=n.value?(l.value.visible=!0,l.value.progress=(S-g.value)/(n.value-g.value)):l.value.visible=!1),typeof c.value=="number"&&!t.options.isLastEpisode&&(S>=c.value?h():d.value.visible=!1)}const e=x({token:t.options.token,cancelled:!1,busy:!1});async function h(){if(e.value.busy||e.value.cancelled)return;d.value.visible=!0,e.value.busy=!0;const S=()=>{e.value.cancelled=!0,d.value.progress=0,e.value.busy=!1};for(let A=0;A<50;A++){if(e.value.cancelled||(await ee.core.delay(100),r.getState()==="paused"))return S();d.value.progress=A/50}if(e.value.cancelled)return S();await ee.core.delay(1100),f("play-next-episode")}function i(){typeof _.value=="number"&&r.seek(_.value)}function I(){typeof n.value=="number"&&r.seek(n.value)}function F(){typeof c.value=="number"&&f("play-next-episode")}return(S,A)=>{const L=ve;return m(),E(Q,{to:`#${S.playerId}`},[y("div",xt,[$(Fe,{name:"actions",appear:""},{default:D(()=>[p(a).visible?(m(),k("span",{key:"intro",class:"action",onClick:i},[y("span",{class:"bar",style:W(`transform: scaleX(${p(a).progress})`)},null,4),St,y("div",Pt,[$(L,{name:"ph:arrow-clockwise-bold"}),y("p",null,C(S.$t("skipIntro")),1)])])):j("",!0),p(l).visible?(m(),k("span",{key:"previous",class:"action",onClick:I},[y("span",{class:"bar",style:W(`transform: scaleX(${p(l).progress})`)},null,4),$t,y("div",jt,[$(L,{name:"ph:arrow-clockwise-bold"}),y("p",null,C(S.$t("skipPreviously")),1)])])):j("",!0),p(d).visible?(m(),k("span",{key:"next-episode",class:"action",onClick:F,onMouseenter:A[0]||(A[0]=H=>p(e).cancelled=!0)},[y("span",{class:O(["bar",{"!hidden":p(e).cancelled===!0}]),style:W(`transform: scaleX(${p(d).progress})`)},null,6),Tt,y("div",Ct,[$(L,{name:"ph:skip-forward-bold"}),y("p",It,C(S.$t("nextEpisode")),1)])],32)):j("",!0)]),_:1})])],8,["to"])}}});const At=Y(Bt,[["__scopeId","data-v-9c452e8c"]]),Et={class:"relative h-full flex items-center"},Ft={key:0,class:"auto-label flex px-2 py-[0.1rem] text-[10px] rounded-full bg-primary-500 absolute -top-[0.5rem] font-bold -right-[1rem]"},Lt={class:"font-semibold"},Dt={key:0,title:"",class:"child-item auto-dir bg-bg-13/50 border-bg-1/10 absolute bottom-full right-1/2 translate-x-1/2 z-[100] mb-7 flex min-h-[10em] w-[13em] cursor-default rounded-xl border-2 py-4 backdrop-blur-lg"},Nt={class:"flex w-full flex-col flex-nowrap gap-8 overflow-y-auto"},Vt={class:"flex w-full flex-col gap-4 text-base"},qt={class:"flex flex-col gap-2"},Ut=["onClick"],Rt={class:"relative"},oe=".jw-quality-selector-icon",Ot=U({__name:"Player2Quality",props:{playerData:{},playerId:{}},emits:["reloadPlayer"],setup(o){const f=window.jwplayer("jwplayer-main"),t=T("preferredQuality","AUTO"),r=x([]),w=x(t.value!=="AUTO"?t.value:"720p");function _(a){if(n.value=!1,!f)return;const l=r.value[a];t.value=l.label,f.setCurrentQuality(a)}function g(a){r.value=a.map(d=>({label:d.label.includes("p")?d.label:"AUTO",bitrate:d.bitrate,width:d.width,height:d.height}));const l=r.value.findIndex(d=>d.label===t.value);_(l)}f.on("levels",a=>{g(a.levels)}),R(()=>{const a=f.getQualityLevels();a&&a.length&&g(a)}),f.on("visualQuality",a=>{if(!a.level)return;const l=r.value[a.level.index];w.value=l.label});const n=x(!1),c=document.querySelector(oe);return re(c,()=>n.value=!1),(a,l)=>(m(),E(Q,{to:`#${a.playerId} ${oe}`},[y("div",{class:"flex inset-0 absolute z-10",onClick:l[0]||(l[0]=d=>n.value=!p(n))}),(m(),E(Q,{to:oe},[y("div",Et,[p(t)==="AUTO"?(m(),k("span",Ft,C(a.$t("auto")),1)):j("",!0),y("span",Lt,C(p(w)),1)])])),$(z,{name:"player-options"},{default:D(()=>[p(n)?(m(),k("div",Dt,[y("div",Nt,[y("section",Vt,[y("ul",qt,[(m(!0),k(V,null,q(p(r),d=>(m(),k("li",{key:d.label,class:O(["hover:bg-bg-1/10 hover:!text-fonts-50 !text-fonts-200 relative flex w-full min-w-[9em] cursor-pointer items-center justify-center gap-2 p-3 transition-colors",{"!bg-bg-1/10 !hover:bg-bg-1/20 !text-fonts-50 !cursor-default":d.label===p(t)}]),onClick:v=>_(p(r).indexOf(d))},[y("span",{class:O(["bg-primary-500 shadow-primary-500 absolute left-2 top-1/2 h-1/2 w-[2px] -translate-y-1/2 rounded-full opacity-0 shadow-[0_0_8px_1px]",{"!opacity-100":d.label===p(t)}])},null,2),y("div",Rt,C(d.label.replace("AUTO",a.$t("auto"))),1)],10,Ut))),128))])])])])):j("",!0)]),_:1})],8,["to"]))}});const zt=Y(Ot,[["__scopeId","data-v-ee7e2125"]]),Mt=""+new URL("Settings.2d4e702a.svg",import.meta.url).href;function Qt({t:o}){return this.addButton(Mt,o("settings.settings"),()=>{},"jw-settings","clickable-btn jw-settings-icon")}function Ht({t:o}){const f=()=>{};return this.addButton("",o("qualitySelector"),f,"jw-quality-selector","clickable-btn jw-quality-selector-icon")}const Xt=""+new URL("ClosedCaptioning.9039dab5.svg",import.meta.url).href;function Gt({t:o}){const f=()=>{};return this.addButton(Xt,o("subtitleSettings"),f,"jw-subtitles","clickable-btn jw-subtitles-icon")}const Yt=""+new URL("Cards.1c7501fb.svg",import.meta.url).href;function Jt({t:o,playerData:f}){const t=()=>{this.pause(),this.getFullscreen()&&this.setFullscreen(!1),setTimeout(()=>{var r;return(r=document.querySelector(".selected-episode"))==null?void 0:r.scrollIntoView({behavior:"smooth",block:"center"})},100)};return this.addButton(Yt,o("episodeSelector"),t,"jw-episode-selector",`clickable-btn jw-episode-selector-icon ${f.info.isSeries?"":"jw-hidden"}`)}const Kt=""+new URL("SkipForward.26508f6e.svg",import.meta.url).href;function Wt({t:o,$emit:f,playerData:t}){var g;const r=()=>f("playNextEpisode");this.addButton(Kt,o("nextEpisode"),r,"jw-skip-episode","jw-skip-episode-icon");const w=document.querySelector(".jw-skip-episode-icon");if(!w)return;w.style.display=t.options.isLastEpisode||!t.info.isSeries?"none":"inherit";const _=document.querySelector(".jw-icon-volume");(g=_==null?void 0:_.parentElement)==null||g.insertBefore(w,_==null?void 0:_.previousSibling)}const Zt=""+new URL("ArrowClockwise.985ddcef.svg",import.meta.url).href;function el({t:o}){var _,g;const f=()=>this.seek(this.getPosition()+10);this.addButton(Zt,o("forward"),f,"jw-forward","jw-forward-icon");const t=document.querySelector(".jw-icon-playback"),r=document.querySelector(".jw-skip-episode-icon"),w=document.querySelector(".jw-forward-icon");t&&r&&((_=t.parentNode)==null||_.insertBefore(t,r)),r&&w&&((g=r.parentNode)==null||g.insertBefore(w,r))}const tl=[Jt,Ht,Gt,Qt,Wt,el];function ll(o){tl.forEach(f=>f.bind(this)(o))}const al={class:"flex w-full h-full relative"},nl={key:"ads-player",class:"absolute z-40 h-full w-full"},sl=y("div",{id:"jwplayer-main",class:"h-full"},null,-1),rl=U({__name:"Player2Main",props:{playerData:{}},emits:["onVideoEnded","onPlay","onPause","onPlayerReady","reloadPlayer","playNextEpisode","onSeek","onProgress"],setup(o,{expose:f,emit:t}){const r=o,{t:w}=ae(),{removeFocus:_}=be(),g=T("preferredAudioChannel","default"),n=T("preferredQuality","AUTO"),c=T("_nad",0);function a(){this.play();const s=document.querySelector(".jw-skip-episode-icon");s&&(s.style.display=r.playerData.options.isLastEpisode||!r.playerData.info.isSeries?"none":"inherit")}function l(s,u){const P={title:s.info.isSeries?s.info.title:s.info.displayName,description:s.info.isSeries?s.info.displayName:"",image:s.image.cover_webp||s.image.cover,sources:s.file.m3u8.map(B=>({file:B[g.value],label:B.label.replace("خودکار","AUTO").toUpperCase(),default:B.label.replace("خودکار","AUTO").toUpperCase()===n.value}))};if(u!=null&&u.episodeChanged)return this.load([{...P}]),t("onPlayerReady"),this.once("meta",()=>this.seek(u.position)),a.bind(this)();i.value=this.setup({..._e,...P,intl:ge,autostart:!0}),this.once("meta",b.bind(this))}async function d(){await Z();const s=ll.bind(this),u={$emit:t,playerData:r.playerData,t:w};s(u),_("jwplayer-main"),h.value=!0,t("onPlayerReady")}function v(){const s=r.playerData.ads;s&&c.value!==-1&&(c.value>new Date().getTime()||ke.bind(this)(s))}function b(){r.playerData.info.time&&this.seek(r.playerData.info.time)}function e(s=0){l.bind(this)(r.playerData,{episodeChanged:!0,position:s})}const h=x(!1),i=x(),I=x();R(async()=>{K();const u=(await me())("jwplayer-main");l.bind(u)(r.playerData),u.on("ready",d.bind(u)),u.on("complete",()=>t("onVideoEnded")),u.on("play",()=>{v.bind(u)(),t("onPlay")}),u.on("pause",()=>t("onPause")),u.on("seek",P=>t("onSeek",P)),u.on("time",P=>t("onProgress",P)),u.on("fullscreen",P=>{var B;return!P.fullscreen&&((B=document.getElementById("main-scroller"))==null?void 0:B.scrollTo({top:0}))}),u.on("error",async P=>{var B;console.log("error",P),P.code===233001&&e.bind(u)(u.getPosition()),P.code===333001&&e.bind(u)(u.getPosition()),P.code>=333400&&P.code<=333599&&e.bind(u)(u.getPosition()),P.code>=233400&&P.code<=233599&&e.bind(u)(u.getPosition()),await Z(),(B=document.querySelector(".jw-error-msg"))==null||B.append(I.value)})}),Le(()=>{i.value&&(i.value.stop(),i.value.remove())});const F=()=>{var s;return(s=i.value)==null?void 0:s.play()},S=()=>{var s;return(s=i.value)==null?void 0:s.pause()},A=s=>{var u;return(u=i.value)==null?void 0:u.seek(s)},L=s=>{var u;return(u=i.value)==null?void 0:u.setFullscreen(s)},H=()=>{var s;return(s=i.value)==null?void 0:s.getFullscreen()};f({play:F,pause:S,seek:A,isFullscreen:H,setFullscreen:L,updatePlayerData:l,playerInstance:i});const X=x(!1);M(X,async()=>{var u;if(X.value===!1)return;const s=((u=i.value)==null?void 0:u.getState())!=="playing";for(;X.value;)S(),H()&&L(!1),await ee.core.delay(250);s||F()});const ne=x(!1),J=x(),ue=x(),ce=x(),de=x(""),pe=x("#");function K(s){s&&(c.value=new Date().getTime()+864e5),ne.value=!1,X.value=!1}async function ke(s){for(K(),await Z(),X.value=!0,ne.value=!0,pe.value=s.link,ce.value=s.skipAfter,ue.value=s.title,de.value=s.video;!document.getElementById("ad-player");)await ee.core.delay(50);this.pause(),J.value=document.getElementById("ad-player"),J.value.src=s.video,J.value.play(),J.value.onended=()=>K(!0)}return(s,u)=>{const P=Me,B=et,xe=dt,Se=kt,Pe=At,$e=zt,je=Ne;return m(),k("div",al,[$(z,{name:"fade-preset"},{default:D(()=>[p(ne)?(m(),k("div",nl,[s.playerData.ads?(m(),E(P,{key:0,"ad-title":p(ue),video:p(de),"callback-url":p(pe),skip:p(ce),onOnVideoEnded:u[0]||(u[0]=se=>K(!0))},null,8,["ad-title","video","callback-url","skip"])):j("",!0)])):j("",!0)]),_:1}),sl,p(h)?(m(),k("span",{key:s.playerData.info.file_id},[$(B,{"player-data":s.playerData,"player-id":"jwplayer-main"},null,8,["player-data"]),$(xe,{"player-data":s.playerData,"player-id":"jwplayer-main"},null,8,["player-data"]),$(Se,{"player-id":"jwplayer-main",onReloadPlayer:u[1]||(u[1]=se=>{var G;return e.bind(p(i))((G=p(i))==null?void 0:G.getPosition())})}),$(Pe,{options:s.playerData.options,"player-id":"jwplayer-main",onPlayNextEpisode:u[2]||(u[2]=se=>t("playNextEpisode"))},null,8,["options"]),$($e,{"player-data":s.playerData,"player-id":"jwplayer-main"},null,8,["player-data"]),y("div",{ref_key:"errorButton",ref:I,class:"retry hidden"},[$(je,{class:"btn-primary text-sm ms-8 whitespace-nowrap",onClick:u[3]||(u[3]=se=>{var G;return e.bind(p(i))((G=p(i))==null?void 0:G.getPosition())})},{default:D(()=>[De(C(s.$t("retry")),1)]),_:1})],512)])):j("",!0)])}}});export{rl as _};
