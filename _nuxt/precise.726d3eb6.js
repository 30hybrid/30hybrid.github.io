import{_ as R}from"./TitleList.vue.59a6fc84.js";import{d as $,b as k,c as B,au as C,B as A,S as N,u as H,l as P,r as d,aD as L,X as D,D as E,o as p,e as y,g as o,f as w,t as q,x as I,K as j,H as K}from"./entry.b60e9b9d.js";import"./BaseTitleFrame.4428127e.js";import"./BaseScore.vue.04013e0c.js";import"./nuxt-link.f791d10e.js";import"./ContentPop-v2.vue.4191226c.js";function S(r){let n,s=r[0],l=1;for(;l<r.length;){const t=r[l],h=r[l+1];if(l+=2,(t==="optionalAccess"||t==="optionalCall")&&s==null)return;t==="access"||t==="optionalAccess"?(n=s,s=h(s)):(t==="call"||t==="optionalCall")&&(s=h((...g)=>s.call(n,...g)),n=void 0)}return s}const T={class:"flex min-h-full w-full flex-col"},F={key:0,class:"flex h-full w-full items-center justify-center"},M={class:"text-fonts-700 text-5xl font-bold"},O={key:1,class:"flex h-full w-full items-center justify-center"},Q={class:"text-fonts-700 text-5xl font-bold"},W=$({__name:"precise",setup(r){const{t:n}=k();B({title:()=>`${n("seo.30nama")} | ${n("seo.search")}`});const s=C(),l=A(),t=N(),{infiniteScrolling:h}=H(),g=P(()=>!!t.query.q&&S([t,"access",e=>e.query,"access",e=>e.q,"optionalAccess",e=>e.trim,"call",e=>e(),"access",e=>e.length])>=3),m=d(g.value),c=d(Number(t.query.page||"1")),i=d({}),b=d(),v=d("");async function _(e,u){if(!e.trim()||e.trim().length<3)return;e!==v.value&&(i.value={},v.value=e),m.value=!0;const a=await j(`SEARCH::${e}::${u}`,()=>K.API.actions.search(e,!1,u));if(!(t.query.q!==e||t.query.page&&Number(t.query.page)!==u)&&(m.value=!1,!!a)){if(a.error)return l(a.msg,"ERROR");i.value[u]=a.result.posts,b.value={pages:a.result.pages,page:a.result.page,total:a.result.total}}}function x(e){t.query.q&&_(t.query.q,e)}return L(()=>t.query.q,e=>{e&&_(e,c.value)},{debounce:300,immediate:!0}),D(()=>t.query.page,e=>{h.value||(c.value=e?Number(e):1,t.query.q&&_(t.query.q,c.value))}),E(()=>{const{replaceLastRoute:e}=s;e(t.fullPath)}),(e,u)=>{const a=R;return p(),y("div",T,[o(g)?!S([o,"call",f=>f(i),"access",f=>f[o(c)],"optionalAccess",f=>f.length])&&!o(m)?(p(),y("span",O,[w("h4",Q,q(o(i)[o(c)]?e.$t("noResult"):e.$t("searchNow")),1)])):(p(),I(a,{key:2,id:"title-list-result",title:e.$t("searchResults"),aligned:"",icon:"ph:magnifying-glass-fill",style:{background:"bg-bg-12",foreground:"bg-bg-11",shadowBack:"shadow-bg-12",shadowFore:"shadow-bg-11"},"is-loading":o(m),data:o(i),"result-info":o(b),onPageChanged:x},null,8,["title","is-loading","data","result-info"])):(p(),y("span",F,[w("h4",M,q(e.$t("searchNow")),1)]))])}}});export{W as default};
