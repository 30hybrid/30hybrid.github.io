import{_ as S}from"./SortByDropdown.vue.1a8ff7fb.js";import{_ as R}from"./TitleList.vue.0c5e30b4.js";import{d as A,V as B,n as p,a as x,m as L,c as v,W as P,g as $,h as b,i as w,w as E,j as i,X as I,p as k}from"./entry.7726ca09.js";import"./FormDropdown.vue.34aeb28b.js";import"./TitleFrame.5c33cbb4.js";import"./BaseScore.vue.3876596f.js";import"./ContentPop-v2.vue.fa64d954.js";function q(r){let c,e=r[0],t=1;for(;t<r.length;){const s=r[t],l=r[t+1];if(t+=2,(s==="optionalAccess"||s==="optionalCall")&&e==null)return;s==="access"||s==="optionalAccess"?(c=e,e=l(e)):(s==="call"||s==="optionalCall")&&(e=l((...u)=>e.call(c,...u)),c=void 0)}return e}const N={class:"flex min-h-full w-full flex-col"},O=A({__name:"[group]",setup(r){const c=B(),e=p(!0),t=x(),{infiniteScrolling:s}=L(),l=v(()=>t.params.group),u=p(),_=p(),d=v(()=>t.query.sortBy||"add_list"),m=p({}),g=p(d.value);function C(){switch(l.value){case"favorite":return"ph:heart-fill";case"watchlist":return"ph:eye-fill";case"downloadlist":return"ph:plus-circle-fill";case"notify":return"ph:bell-fill"}}async function h(n,o){o!==g.value&&(m.value={},g.value=o),e.value=!0;const a=await I("LIBRARY::"+l.value+n+o,()=>k.API.actions.user_list(l.value,n,o||"add_list"));u.value=a,e.value=!1,a&&(q([u,"access",f=>f.value,"optionalAccess",f=>f.error])&&c(u.value.msg,"ERROR"),m.value[n]=a.result.posts,_.value={pages:a.result.pages,page:a.result.page,total:a.result.total})}return P(()=>{const n=Number(t.query.page||"1");h(n,d.value)}),(n,o)=>{const a=S,f=R;return $(),b("div",N,[w(f,{"secondary-title-type":"",transparent:"",class:"min-h-full",title:n.$t(`sidebar.tree.profile.panel.${i(l)}`),icon:C(),"is-loading":i(e),data:i(m),"result-info":i(_),onPageChanged:o[0]||(o[0]=y=>i(s)&&h(y,i(d)))},{header:E(()=>[w(a)]),_:1},8,["title","icon","is-loading","data","result-info"])])}}});export{O as default};
