import{_ as k}from"./TitleList.vue.0c5e30b4.js";import{d as x,b as $,e as B,an as C,V as A,a as N,m as P,c as H,n as d,aw as L,v as j,f as E,g as p,h as y,j as n,q as w,B as q,k as I,X as D,p as T}from"./entry.7726ca09.js";import"./TitleFrame.5c33cbb4.js";import"./BaseScore.vue.3876596f.js";import"./ContentPop-v2.vue.fa64d954.js";function R(r){let o,s=r[0],l=1;for(;l<r.length;){const t=r[l],h=r[l+1];if(l+=2,(t==="optionalAccess"||t==="optionalCall")&&s==null)return;t==="access"||t==="optionalAccess"?(o=s,s=h(s)):(t==="call"||t==="optionalCall")&&(s=h((...g)=>s.call(o,...g)),o=void 0)}return s}const V={class:"flex min-h-full w-full flex-col"},F={key:0,class:"flex h-full w-full items-center justify-center"},K={class:"text-fonts-700 text-5xl font-bold"},M={key:1,class:"flex h-full w-full items-center justify-center"},O={class:"text-fonts-700 text-5xl font-bold"},J=x({__name:"precise",setup(r){const{t:o}=$();B({title:()=>`${o("seo.30nama")} | ${o("seo.search")}`});const s=C(),l=A(),t=N(),{infiniteScrolling:h}=P(),g=H(()=>!!t.query.q&&R([t,"access",e=>e.query,"access",e=>e.q,"optionalAccess",e=>e.trim,"call",e=>e(),"access",e=>e.length])>=3),m=d(g.value),c=d(Number(t.query.page||"1")),i=d({}),b=d(),v=d("");async function _(e,u){if(!e.trim()||e.trim().length<3)return;e!==v.value&&(i.value={},v.value=e),m.value=!0;const a=await D(`SEARCH::${e}::${u}`,()=>T.API.actions.search(e,!1,u));if(!(t.query.q!==e||t.query.page&&Number(t.query.page)!==u)&&(m.value=!1,!!a)){if(a.error)return l(a.msg,"ERROR");i.value[u]=a.result.posts,b.value={pages:a.result.pages,page:a.result.page,total:a.result.total}}}function S(e){t.query.q&&_(t.query.q,e)}return L(()=>t.query.q,e=>{e&&_(e,c.value)},{debounce:300,immediate:!0}),j(()=>t.query.page,e=>{h.value||(c.value=e?Number(e):1,t.query.q&&_(t.query.q,c.value))}),E(()=>{const{replaceLastRoute:e}=s;e(t.fullPath)}),(e,u)=>{const a=k;return p(),y("div",V,[n(g)?!R([n,"call",f=>f(i),"access",f=>f[n(c)],"optionalAccess",f=>f.length])&&!n(m)?(p(),y("span",M,[w("h4",O,q(n(i)[n(c)]?e.$t("noResult"):e.$t("searchNow")),1)])):(p(),I(a,{key:2,id:"title-list-result",title:e.$t("searchResults"),aligned:"",icon:"ph:magnifying-glass-fill",style:{background:"bg-bg-12",foreground:"bg-bg-11",shadowBack:"shadow-bg-12",shadowFore:"shadow-bg-11"},"is-loading":n(m),data:n(i),"result-info":n(b),onPageChanged:S},null,8,["title","is-loading","data","result-info"])):(p(),y("span",F,[w("h4",K,q(e.$t("searchNow")),1)]))])}}});export{J as default};
