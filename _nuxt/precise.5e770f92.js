import{_ as R}from"./TitleList.vue.0f0d459a.js";import{d as $,b as k,c as x,ar as S,J as N,$ as B,u as P,k as C,r as l,aw as H,V as L,m as E,o as i,e as f,g as a,f as y,t as _,F as I,aa as j,N as A}from"./entry.386a7022.js";import"./BaseTitleFrame.7d6aaabf.js";import"./BaseScore.vue.23daedd6.js";import"./nuxt-link.026b96dd.js";/* empty css                           */import"./ContentPop-v2.vue.e003b151.js";const D={class:"flex min-h-full w-full flex-col"},F={key:0,class:"flex h-full w-full items-center justify-center"},T={class:"text-fonts-700 text-5xl font-bold"},V={key:1,class:"flex h-full w-full items-center justify-center"},J={class:"text-fonts-700 text-5xl font-bold"},X=$({__name:"precise",setup(K){const{t:h}=k();x({title:()=>`${h("seo.30nama")} | ${h("seo.search")}`});const b=S(),w=N(),t=B(),{infiniteScrolling:q}=P(),d=C(()=>{var e;return!!t.query.q&&((e=t.query.q)==null?void 0:e.trim().length)>=3}),u=l(d.value),o=l(Number(t.query.page||"1")),r=l({}),m=l(),g=l("");async function c(e,n){if(!e.trim()||e.trim().length<3)return;e!==g.value&&(r.value={},g.value=e),u.value=!0;const s=await j(`SEARCH::${e}::${n}`,()=>A.API.actions.search(e,!1,n));if(!(t.query.q!==e||t.query.page&&Number(t.query.page)!==n)&&(u.value=!1,!!s)){if(s.error)return w(s.msg,"ERROR");r.value[n]=s.result.posts,m.value={pages:s.result.pages,page:s.result.page,total:s.result.total}}}function v(e){t.query.q&&c(t.query.q,e)}return H(()=>t.query.q,e=>{e&&c(e,o.value)},{debounce:300,immediate:!0}),L(()=>t.query.page,e=>{q.value||(o.value=e?Number(e):1,t.query.q&&c(t.query.q,o.value))}),E(()=>{const{replaceLastRoute:e}=b;e(t.fullPath)}),(e,n)=>{var p;const s=R;return i(),f("div",D,[a(d)?!((p=a(r)[a(o)])!=null&&p.length)&&!a(u)?(i(),f("span",V,[y("h4",J,_(a(r)[a(o)]?e.$t("noResult"):e.$t("searchNow")),1)])):(i(),I(s,{key:2,id:"title-list-result",title:e.$t("searchResults"),aligned:"",icon:"ph:magnifying-glass-fill",style:{background:"bg-bg-12",foreground:"bg-bg-11",shadowBack:"shadow-bg-12",shadowFore:"shadow-bg-11"},"is-loading":a(u),data:a(r),"result-info":a(m),onPageChanged:v},null,8,["title","is-loading","data","result-info"])):(i(),f("span",F,[y("h4",T,_(e.$t("searchNow")),1)]))])}}});export{X as default};
