import{_ as R}from"./TitleList.vue.e23ddc91.js";import{d as x,b as S,c as $,a7 as k,z as B,R as N,u as C,l as P,r as l,ag as H,Z as L,C as E,o as i,e as f,g as a,f as y,t as _,s as I,J as j,G as A}from"./entry.95f381ee.js";import"./BaseTitleFrame.a8eb45af.js";import"./BaseScore.vue.f1c66ac5.js";import"./nuxt-link.b23469bb.js";/* empty css                           */import"./ContentPop-v2.vue.6eb5320d.js";const D={class:"flex min-h-full w-full flex-col"},T={key:0,class:"flex h-full w-full items-center justify-center"},z={class:"text-fonts-700 text-5xl font-bold"},F={key:1,class:"flex h-full w-full items-center justify-center"},G={class:"text-fonts-700 text-5xl font-bold"},W=x({__name:"precise",setup(J){const{t:h}=S();$({title:()=>`${h("seo.30nama")} | ${h("seo.search")}`});const b=k(),q=B(),t=N(),{infiniteScrolling:v}=C(),d=P(()=>{var e;return!!t.query.q&&((e=t.query.q)==null?void 0:e.trim().length)>=3}),u=l(d.value),o=l(Number(t.query.page||"1")),r=l({}),g=l(),m=l("");async function c(e,n){if(!e.trim()||e.trim().length<3)return;e!==m.value&&(r.value={},m.value=e),u.value=!0;const s=await j(`SEARCH::${e}::${n}`,()=>A.API.actions.search(e,!1,n));if(!(t.query.q!==e||t.query.page&&Number(t.query.page)!==n)&&(u.value=!1,!!s)){if(s.error)return q(s.msg,"ERROR");r.value[n]=s.result.posts,g.value={pages:s.result.pages,page:s.result.page,total:s.result.total}}}function w(e){t.query.q&&c(t.query.q,e)}return H(()=>t.query.q,e=>{e&&c(e,o.value)},{debounce:300,immediate:!0}),L(()=>t.query.page,e=>{v.value||(o.value=e?Number(e):1,t.query.q&&c(t.query.q,o.value))}),E(()=>{const{replaceLastRoute:e}=b;e(t.fullPath)}),(e,n)=>{var p;const s=R;return i(),f("div",D,[a(d)?!((p=a(r)[a(o)])!=null&&p.length)&&!a(u)?(i(),f("span",F,[y("h4",G,_(a(r)[a(o)]?e.$t("noResult"):e.$t("searchNow")),1)])):(i(),I(s,{key:2,id:"title-list-result",title:e.$t("searchResults"),aligned:"",icon:"ph:magnifying-glass-fill",style:{background:"bg-bg-12",foreground:"bg-bg-11",shadowBack:"shadow-bg-12",shadowFore:"shadow-bg-11"},"is-loading":a(u),data:a(r),"result-info":a(g),onPageChanged:w},null,8,["title","is-loading","data","result-info"])):(i(),f("span",T,[y("h4",z,_(e.$t("searchNow")),1)]))])}}});export{W as default};
