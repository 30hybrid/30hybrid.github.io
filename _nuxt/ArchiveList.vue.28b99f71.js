import{_ as A}from"./FormDropdown.vue.bd7300b4.js";import{d as w,b as S,$ as C,j as $,k as d,o as I,e as b,h as B,g as o,a8 as E,J as O,r as c,a9 as P,w as k,aa as x,N as D}from"./entry.386a7022.js";import{_ as L}from"./TitleList.vue.0f0d459a.js";import{u as N}from"./useArchiveIcon.18656aa1.js";const j=w({__name:"SortByDropdown",setup(f){const{t}=S(),r=C(),y=$(),n=d(()=>[{title:t("sortByRelevant"),value:"relevant"},{title:t("sortByUpdate"),value:"update"},{title:t("sortByYear"),value:"year"},{title:t("sortByFavorite"),value:"favorite"},{title:t("sortByImdbRate"),value:"imdb-rate"},{title:t("sortBy30namaRate"),value:"30nama-rate"}]),u=["relevant","update","year","favorite","imdb-rate","30nama-rate"],g=d(()=>r.query.sortBy&&u.includes(r.query.sortBy)?r.query.sortBy:n.value[0].value);function i(l){y.replace({query:{sortBy:l[0]}})}return(l,v)=>{const m=A;return I(),b("div",null,[B(m,{title:l.$t("sortBy"),list:o(n),"selected-option":o(g),style:{foreground:"bg-bg-11"},onOnChange:i},null,8,["title","list","selected-option"])])}}}),F={class:"flex min-h-full w-full flex-col"},J=w({__name:"ArchiveList",props:{slug:null},setup(f){const t=f,r=E(),y=O(),n=c(!0),u=C(),g=d(()=>{var e;return(e=[...r.categories,...r.genres].find(s=>s.slug===t.slug))==null?void 0:e.name}),i=c(),l=c(),v=d(()=>u.query.sortBy||"relevant"),m=u.query.stream==="true",_=c({}),h=c(v.value);async function R(e,s){var p;s!==h.value&&(_.value={},h.value=s),n.value=!0;const a=await x("ARCHIVE::"+[t.slug].join(",")+e+s+m,()=>D.API.actions.archive([t.slug],m,e,s));i.value=a,n.value=!1,a&&((p=i.value)!=null&&p.error&&y(i.value.msg,"ERROR"),_.value[e]=a.result.posts,l.value={pages:a.result.pages,page:a.result.page,total:a.result.total})}return P(()=>{const e=Number(u.query.page||"1");R(e,v.value)}),(e,s)=>{const a=j,p=L;return I(),b("div",F,[B(p,{"secondary-title-type":"",transparent:"",class:"min-h-full",title:o(g)||"",icon:("useArchiveIcon"in e?e.useArchiveIcon:o(N))(f.slug),"is-loading":o(n),data:o(_),"result-info":o(l),onPageChanged:s[0]||(s[0]=q=>R(q,o(v)))},{header:k(()=>[B(a)]),_:1},8,["title","icon","is-loading","data","result-info"])])}}});export{J as _};
