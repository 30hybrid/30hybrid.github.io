import{_ as se}from"./FormDropdown.vue.6d74cd5a.js";import{d as V,r as v,b as K,aF as ae,l as M,A as Q,B as W,Y as oe,o as e,e as l,g as s,f as t,N as j,J as z,K as A,t as m,v as h,h as o,w as f,D as I,s as F,E,G as R,ad as ne,H as Y,U as ie,V as re,m as X,T as de,aG as ce,a9 as ue,c as q,y as fe,a6 as ge,Q as me,p as pe,z as he,I as G,F as U}from"./entry.b2e8da82.js";import{_ as ee}from"./nuxt-link.9048600c.js";/* empty css                       *//* empty css                           */import"./FormInput.2436ae24.js";import"./welcome.vue.4eddde78.js";/* empty css                               */import"./splide-extension-grid.esm.436de4e4.js";/* empty css                        *//* empty css                             */import"./SidebarMain.vue.da3a336f.js";/* empty css                              *//* empty css                                  *//* empty css                    */import{_ as _e}from"./ContentPop-v2.vue.84ec585d.js";import{u as J}from"./useBackground.6aaa7843.js";const H=a=>(ie("data-v-c6fba5e4"),a=a(),re(),a),xe={key:0,class:"__skeleton-2 bg-bg-10 h-[4.5em] w-full rounded-2xl"},we={key:1,class:"bg-bg-10 h-[4.5em] w-full rounded-2xl"},ve={key:2,class:"flex flex-col items-center"},be={class:"bg-bg-10 relative w-full rounded-2xl"},ye={class:"absolute top-1/2 flex h-full -translate-y-1/2 items-center justify-center gap-4"},ke=H(()=>t("svg",{class:"fill-bg-11 h-[70%] max-h-[12em] ltr:left-0 ltr:rotate-180 rtl:right-0",viewBox:"0 0 4 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M4 4.34215C-3.15591 9.50124 0.854026 15.3132 4 17.3685L4 4.34215Z"}),t("path",{d:"M1.745 15.3421C2.49667 16.0175 4 18.2947 4 22L4 17.3684L1.745 15.3421Z"}),t("path",{d:"M1.745 6.36853C2.49666 5.69309 4 3.47378 4 7.77245e-05L4 4.3422L1.745 6.36853Z"})],-1)),$e={class:"flex w-full flex-row items-center"},Le={class:"flex max-w-full flex-1 flex-row items-center gap-4 overflow-x-auto ltr:ml-12 rtl:mr-12"},Be={class:"text-primary-500 font-bold"},De={key:0,class:"font-bold text-red-500 drop-shadow-[0_0_5px]"},Ce={key:1,class:"font-bold text-yellow-500 drop-shadow-[0_0_5px]"},Pe={class:"flex flex-row flex-wrap items-center gap-4 p-4"},Ie={key:0,class:"bg-bg-12/50 hover:bg-bg-12 flex shrink-0 items-center justify-center rounded-xl p-2 text-xl transition-colors"},je={key:1,class:"bg-bg-12/50 hover:bg-bg-12 flex shrink-0 items-center justify-center rounded-xl p-2 text-xl transition-colors"},Se={class:"flex flex-row gap-2"},ze={key:2,class:"bg-bg-12/50 hover:bg-bg-12 flex shrink-0 cursor-pointer items-center justify-center rounded-xl p-2 text-xl transition-colors"},Ae={key:0,class:"bg-bg-10 relative flex flex-col gap-8 self-center rounded-b-2xl p-4 sm:w-[90%] xl:w-[95%]"},Ne=H(()=>t("span",{class:"absolute top-0 h-[1em] w-[1em] overflow-hidden ltr:right-full rtl:left-full"},[t("span",{class:"shadow-bg-10 absolute top-0 h-[200%] w-[200%] rounded-[100%] shadow-[0_0_0_200px] ltr:right-0 rtl:left-0"})],-1)),Me=H(()=>t("span",{class:"absolute top-0 h-[1em] w-[1em] overflow-hidden ltr:left-full rtl:right-full"},[t("span",{class:"shadow-bg-10 absolute top-0 h-[200%] w-[200%] rounded-[100%] shadow-[0_0_0_200px] ltr:left-0 rtl:right-0"})],-1)),Te={class:"flex flex-1 flex-row flex-wrap justify-center gap-4"},Fe={class:"absolute top-1/2 flex h-full -translate-y-1/2 items-center justify-center gap-2"},Ee=H(()=>t("svg",{class:"fill-bg-10 h-[70%] max-h-[12em] ltr:left-0 ltr:rotate-180 rtl:right-0",viewBox:"0 0 4 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M4 4.34215C-3.15591 9.50124 0.854026 15.3132 4 17.3685L4 4.34215Z"}),t("path",{d:"M1.745 15.3421C2.49667 16.0175 4 18.2947 4 22L4 17.3684L1.745 15.3421Z"}),t("path",{d:"M1.745 6.36853C2.49666 5.69309 4 3.47378 4 7.77245e-05L4 4.3422L1.745 6.36853Z"})],-1)),He={class:"flex w-full ltr:pl-8 rtl:pr-8"},Oe={class:"local-numbers line-clamp-1 w-full transition-transform duration-300 will-change-transform ltr:group-hover:translate-x-1 rtl:group-hover:-translate-x-1"},Ve={class:"class flex flex-row gap-2 px-4"},Re=["onClick"],Ze={key:1,class:"flex"},qe={key:0,class:"bg-bg-12 h-48 rounded-xl p-4"},Ge=["value"],Ue=V({__name:"SinglePageDownloadBar",props:{data:null,isLoading:{type:Boolean}},setup(a){const g=a,$=v(!1),{t:_}=K(),S=ae(),k=v(!1),C=v(),P=v(!1),D=v();function x(i,d){var p;(p=D.value)==null||p.showLightBox(i,d)}const b=M(()=>{var i,d,p,n,c,y,r,u;return{total_episode:{name:"total_episode",title:_("singleDetails.totalEpisode"),data:(i=g.data)==null?void 0:i.total_episode},last_episode:{name:"last_episode",title:_("singleDetails.lastEpisode"),data:(d=g.data)==null?void 0:d.last_episode},quality:{name:"quality",title:_("singleDetails.quality"),data:(p=g.data)==null?void 0:p.quality},size:{name:"size",title:_("singleDetails.size"),data:(n=g.data)==null?void 0:n.size},resolution:{name:"resolution",title:_("singleDetails.resolution"),data:(c=g.data)==null?void 0:c.resolution},encoder:{name:"encoder",title:_("singleDetails.encoder"),data:(y=g.data)==null?void 0:y.encoder},version:{name:"version",title:_("singleDetails.version"),data:(r=g.data)==null?void 0:r.version},note:{name:"note",title:_("singleDetails.note"),data:(u=g.data)==null?void 0:u.note}}}),L=M(()=>{var i;if(!(!g.data||!g.data.link))return(i=g.data)==null?void 0:i.link.map(d=>d.dl).join(`
`)});let w=null;return Q(()=>{const i=document.getElementById("main-scroller");w=new IntersectionObserver(d=>P.value=d[0].isIntersecting,{root:i,rootMargin:"100% 0px 0px 0px"}),w.observe(C.value)}),W(()=>w==null?void 0:w.disconnect()),oe(P,()=>{P.value===!1&&($.value=!1)}),(i,d)=>{const p=R,n=ne,c=ee,y=Y;return e(),l("section",{ref_key:"downloadBar",ref:C,class:"flex w-full flex-col"},[a.isLoading?(e(),l("div",xe)):s(P)?a.data?(e(),l("div",ve,[t("div",be,[t("div",ye,[ke,t("span",{class:j(["bg-secondary-500 shadow-secondary-500 h-[50%] max-h-[6em] w-1 rounded-full shadow-[0_0_8px_0]",{"!bg-red-500 !shadow-red-500":s(b).encoder.data==="30nama","!bg-yellow-500 !shadow-yellow-500":a.data.tags&&a.data.tags.includes("P2P")}])},null,2)]),t("div",$e,[t("ul",Le,[(e(!0),l(z,null,A(s(b),r=>(e(),l("li",{key:r.name,class:j(["text-sm",{hidden:!r.data}])},[r.data?(e(),l("div",{key:0,class:j(["flex flex-row items-center gap-2 whitespace-nowrap py-2",{"local-numbers":r.name==="total_episode"||r.name==="last_episode"}])},[t("p",Be,m(r.title)+": ",1),t("p",{class:j({"ltr-dir":r.name==="size"})},m(r.data),3)],2)):h("",!0)],2))),128)),s(b).encoder.data==="30nama"?(e(),l("li",De,m(i.$t("30nama")),1)):h("",!0),a.data.tags&&a.data.tags.includes("P2P")?(e(),l("li",Ce,"P2P")):h("",!0)]),t("div",Pe,[a.data.source?(e(),l("div",Ie,[o(p,{name:"ph:file-fill"}),o(n,{delay:500,placement:"top"},{default:f(()=>[I(m(a.data.source),1)]),_:1})])):h("",!0),a.data.tags.length?(e(),l("div",je,[o(p,{name:"ph:tag-fill"}),o(n,{delay:500,placement:"top",class:"tracking-widest"},{default:f(()=>[t("div",Se,[(e(!0),l(z,null,A(a.data.tags,r=>(e(),l("p",{key:r},m(r),1))),128))])]),_:1})])):h("",!0),a.data.screenshot?(e(),l("div",ze,[o(p,{name:"ph:image-fill",onClick:d[0]||(d[0]=r=>{var u;return x(!0,(u=a.data)==null?void 0:u.screenshot)})}),o(n,{delay:500,placement:"top"},{default:f(()=>[I(m(i.$t("singleDetails.screenShot")),1)]),_:1})])):h("",!0),a.data.mediainfo?(e(),l("div",{key:3,class:"bg-bg-12/50 hover:bg-bg-12 flex shrink-0 cursor-pointer items-center justify-center rounded-xl p-2 text-xl transition-colors",onClick:d[1]||(d[1]=r=>{var u;return x(!1,(u=a.data)==null?void 0:u.mediainfo)})},[o(p,{name:"ph:info-fill"}),o(n,{delay:500,placement:"top"},{default:f(()=>[I(m(i.$t("singleDetails.mediaInfo")),1)]),_:1})])):h("",!0),a.data.persian_subtitle?(e(),F(c,{key:4,to:a.data.persian_subtitle,external:"",class:"bg-bg-12/50 hover:bg-bg-12 flex shrink-0 cursor-pointer items-center justify-center rounded-xl p-2 text-xl transition-colors"},{default:f(()=>[o(p,{name:"ph:closed-captioning-fill"}),o(n,{delay:500,placement:"top"},{default:f(()=>[I(m(i.$t("singleDetails.persianSubtitle")),1)]),_:1})]),_:1},8,["to"])):h("",!0),a.data.dl?(e(),F(c,{key:5,target:"_blank",external:"",to:a.data.dl},{default:f(()=>[o(y,{class:j(["btn-secondary text-sm",{"!bg-red-500 hover:!bg-red-600":s(b).encoder.data==="30nama","!bg-yellow-500 hover:!bg-yellow-600":a.data.tags&&a.data.tags.includes("P2P")}])},{default:f(()=>[I(m(i.$t("download")),1)]),_:1},8,["class"])]),_:1},8,["to"])):a.data.link?(e(),F(y,{key:6,class:j(["btn-secondary text-sm",{"!bg-red-500 hover:!bg-red-600":s(b).encoder.data==="30nama","!bg-yellow-500 hover:!bg-yellow-600":a.data.tags&&a.data.tags.includes("P2P")}]),onClick:d[2]||(d[2]=r=>$.value=!s($))},{default:f(()=>[I(m(s($)?i.$t("close"):i.$t("singleDetails.downloadLinks")),1)]),_:1},8,["class"])):h("",!0)])])]),o(E,{name:"links"},{default:f(()=>{var r;return[s($)?(e(),l("div",Ae,[Ne,Me,t("ul",Te,[(e(!0),l(z,null,A((r=g.data)==null?void 0:r.link,u=>(e(),l("li",{key:u.id,class:"link bg-bg-12/50 hover:bg-bg-12 group flex min-w-[16em] max-w-[32em] flex-row items-center gap-1 rounded-xl"},[o(c,{class:"relative flex flex-1 py-4 transition-all",to:u.dl,target:"_blank"},{default:f(()=>[t("div",Fe,[Ee,t("span",{class:j(["bg-secondary-500 shadow-secondary-500 rtl:group-hover:shadow-secondary-500 ltr:group-hover:shadow-secondary-500 h-[50%] max-h-[6em] w-1 rounded-full shadow-[0_0_8px_0] transition-all ltr:group-hover:shadow-[4px_0_20px_2px] rtl:group-hover:shadow-[-4px_0_20px_2px]",{"!bg-red-500 !shadow-red-500 group-hover:!shadow-red-500":s(b).encoder.data==="30nama","!bg-yellow-500 !shadow-yellow-500 group-hover:!shadow-yellow-500":a.data.tags&&a.data.tags.includes("P2P")}])},null,2)]),t("div",He,[t("p",Oe,m(`${i.$t("episode")} ${u.episode}`),1)])]),_:2},1032,["to"]),t("ul",Ve,[u.mediainfo?(e(),l("li",{key:0,class:"bg-bg-10 cursor-pointer rounded-md px-1",onClick:T=>x(!1,u.mediainfo)},[o(p,{name:"ph:info-fill"}),o(n,{delay:600,class:"z-10",placement:"top"},{default:f(()=>[I(m(i.$t("singleDetails.mediaInfo")),1)]),_:1})],8,Re)):h("",!0),u.persian_subtitle?(e(),l("li",Ze,[o(c,{to:u.persian_subtitle,target:"_blank",class:"bg-bg-10 z-10 rounded-md px-1"},{default:f(()=>[o(p,{name:"ph:closed-captioning-fill"}),o(n,{delay:600,class:"z-10",placement:"top"},{default:f(()=>[I(m(i.$t("singleDetails.persianSubtitle")),1)]),_:1})]),_:2},1032,["to"])])):h("",!0)])]))),128))]),o(E,{name:"copyLinks"},{default:f(()=>[s(k)?(e(),l("section",qe,[t("div",{class:"flex h-full flex-col overflow-y-auto px-4 text-left",onClick:d[3]||(d[3]=u=>s(S).copy(s(L)??""))},[t("textarea",{class:"h-full resize-none",readonly:"",value:s(L),dir:"ltr"},null,8,Ge)])])):h("",!0)]),_:1}),o(y,{class:j(["btn-secondary w-full self-center text-sm",{"!bg-red-500":s(b).encoder.data==="30nama","!bg-yellow-500":a.data.tags&&a.data.tags.includes("P2P")}]),onClick:d[4]||(d[4]=u=>k.value=!s(k))},{default:f(()=>[I(m(s(k)?i.$t("close"):i.$t("singleDetails.allDownloadLinks")),1)]),_:1},8,["class"])])):h("",!0)]}),_:1}),o(s(at),{ref_key:"lightBox",ref:D},null,512)])):h("",!0):(e(),l("div",we))],512)}}}),Je=X(Ue,[["__scopeId","data-v-c6fba5e4"]]),Ke={key:0,class:"bg-bg-13/10 fixed inset-0 z-50 backdrop-blur-md"},Qe={class:"absolute z-10 p-12"},We={class:"flex h-full w-full items-center justify-center overflow-auto"},Ye={key:"loader",class:"flex flex-col items-center justify-center gap-4 text-3xl"},Xe={key:"error",class:"text-xl text-red-400"},et={key:2,class:"h-screen w-screen overflow-auto"},tt=["src"],lt=["innerHTML"],st=V({__name:"SinglePageLightBox",setup(a,{expose:g}){const $=v(!1),_=v(!1),S=v(),k=v(),C=v(""),P=v(!1);function D(L,w){if($.value=!0,!L)return b(w);k.value=w}function x(){$.value=!1,S.value=null,k.value=null}async function b(L){_.value=!0,C.value="";const w=await ce(L,"$H3ZwHjMnVn");if(!w.data.value){C.value="مشکلی در اتصال",_.value=!1;return}S.value=w.data.value,_.value=!1}return g({showLightBox:D,hideLightBox:x}),(L,w)=>{const i=R,d=ue;return e(),F(de,{to:"body"},[o(E,{name:"fade-preset"},{default:f(()=>[s($)?(e(),l("div",Ke,[t("header",Qe,[o(i,{name:"ph:x-fill",class:"cursor-pointer text-[3em]",onClick:x})]),t("div",We,[o(E,{name:"fade-preset"},{default:f(()=>[s(_)?(e(),l("div",Ye,[o(d,{type:"triangle"}),t("p",null,m(L.$t("loading")),1)])):s(C)?(e(),l("h3",Xe,m(s(C)),1)):s(k)?(e(),l("div",et,[t("img",{key:"img",class:j([{"relative block !h-auto !w-auto  object-contain":s(P)},"absolute inset-0 h-full w-full cursor-zoom-in object-contain"]),src:s(k),onClick:w[0]||(w[0]=p=>P.value=!s(P))},null,10,tt)])):(e(),l("div",{key:"contnet",class:"media-info h-full overflow-y-auto !pt-[8em]",innerHTML:s(S)},null,8,lt))]),_:1})])])):h("",!0)]),_:1})])}}}),at=X(st,[["__scopeId","data-v-ad9208ee"]]),ot={"aria-label":"download links",class:"flex min-h-full w-full flex-col"},nt={class:"flex h-full w-full flex-col"},it={key:0},rt={key:0,class:"flex w-full flex-col items-center justify-center gap-4"},dt={key:1,class:"w-full"},ct={class:"flex w-full flex-col py-12"},ut={class:"flex flex-col gap-4 px-6"},ft={key:2,class:"w-full pb-8"},gt={key:0,class:"relative flex h-24 w-full items-center"},mt={class:"flex w-full flex-row flex-nowrap items-center gap-4 ltr:ml-12 rtl:mr-12"},pt={class:"local-numbers text-2xl font-semibold"},ht=t("span",{class:"bg-bg-12 block h-2 w-[10%] overflow-hidden rounded-full ltr:origin-left rtl:origin-right"},null,-1),_t={class:"flex flex-col gap-4 px-6"},xt={key:3,class:"w-full"},wt={class:"flex w-full flex-col py-12"},vt={class:"flex flex-col gap-4 px-6"},Ft=V({__name:"download",setup(a){const{t:g}=K();q({title:()=>`${g("seo.30nama")} | ${g("seo.downloadLinks")}`});const $=fe(),_=v(!1),S=ge(),k=me(),C=pe(),P=he();q({title:()=>`${g("seo.30nama")} | ${g("seo.subtitleLinks")}`});const D=M(()=>k.params.id);typeof D.value!="string"&&C.replace("/");const x=v(),b=v(),L=v(!0);async function w(){var n,c,y;x.value=await G("SINGLE::"+D.value,()=>U.API.actions.single(Number(D.value))),(n=x.value)!=null&&n.error&&P(x.value.msg,"ERROR"),(y=(c=x.value)==null?void 0:c.result)!=null&&y.image.cover.webp&&J(x.value.result.image.cover.webp)}Q(async()=>{var c;const n=k.query.free==="true";if(!n&&!$.user){S.ignoreNextRoute(),C.push("/auth/login");return}if(!n&&!((c=$.user)!=null&&c.user_allowed_to_download)){L.value=!1;return}_.value=!0,typeof D.value=="string"&&(w(),b.value=await G("DOWNLOAD::"+D.value+k.query.free,()=>U.API.actions.download(Number(D.value),n)),L.value=!1)});const i=M(()=>{var c;const n=(c=b.value)==null?void 0:c.result.download;if(!n)return[];if(!Array.isArray(n)&&p.value!=="ALL"){const y={};for(const[r,u]of Object.entries(n))u.some(T=>T.season_int===Number(p.value))&&(y[r]=u);return y}return n});W(()=>J(""));const d=M(()=>{if(!x.value||!b.value||!x.value.result.options.is_series)return;const n=b.value.result.download;if(!Array.isArray(n))return Object.values(n).map(c=>({title:c[0].season_name||`${g("season")} ${c[0].season}`,value:c[0].season_int.toString()}))}),p=v("ALL");return(n,c)=>{const y=se,r=R,u=Y,T=ee,O=Je,te=_e;return e(),l("section",ot,[t("div",nt,[o(te,{icon:"ph:download-simple-fill",title:n.$t("singleDetails.downloadLinks"),"shadow-background":"shadow-bg-11",foreground:"bg-bg-11","wide-background":"",class:"h-full"},{header:f(()=>{var N;return[(N=s(x))!=null&&N.result&&s(d)?(e(),l("div",it,[o(y,{title:n.$t("season"),list:s(d),searchable:"","has-default-all":"",style:{foreground:"bg-bg-10"},onOnChange:c[0]||(c[0]=B=>p.value=B[0])},null,8,["title","list"])])):h("",!0)]}),content:f(()=>{var N;return[s(_)?s(L)?(e(),l("div",dt,[t("section",ct,[t("ul",ut,[(e(),l(z,null,A(12,B=>t("li",{key:B},[o(O,{"is-loading":""})])),64))])])])):(N=s(x))!=null&&N.result.options.is_series?(e(),l("div",ft,[(e(!0),l(z,null,A(s(i),(B,le)=>(e(),l("section",{key:le,class:"flex w-full flex-col"},[Array.isArray(B)?(e(),l("div",gt,[t("div",mt,[t("span",pt,m(B[0].season_name?B[0].season_name:` ${n.$t("season")} ${B[0].season}`),1),ht])])):h("",!0),t("ul",_t,[(e(!0),l(z,null,A(B,Z=>(e(),l("li",{key:Z.id},[o(O,{data:Z},null,8,["data"])]))),128))])]))),128))])):(e(),l("div",xt,[t("section",wt,[t("ul",vt,[(e(!0),l(z,null,A(s(i),B=>(e(),l("li",{key:B.id},[o(O,{data:B},null,8,["data"])]))),128))])])])):(e(),l("div",rt,[o(r,{name:"ph:warning-fill",class:"text-bg-10 text-[7em]"}),t("h4",null,m(n.$t("notAllowedToDownload")),1),o(T,{to:"https://30nama.com/pricing",external:"",target:"_blank",class:"min-w-[12em]"},{default:f(()=>[o(u,{class:"btn-primary-outline w-full text-sm"},{default:f(()=>[o(r,{name:"ph:shopping-cart-fill"}),I(" "+m(n.$t("pricing.buyNow")),1)]),_:1})]),_:1})]))]}),_:1},8,["title"])])])}}});export{Ft as default};
