import{at as je,d as R,n as S,o as N,au as Ce,g as b,h as k,k as F,y as C,z,j as p,i as j,w as V,q as y,C as Z,T as Q,B as A,P as Y,_ as Ie,D as ve,G as te,H as ae,I as J,ae as Ae,ai as I,b as le,v as O,F as q,r as U,al as M,m as Be,c as D,ak as re,am as Ee,an as De,p as ee,f as Fe,A as Le,$ as Ne}from"./entry.19d94800.js";function be(){return{removeFocus:f=>{const t=document.getElementById(f);if(!t)return console.error(`Element with id ${f} not found`);t.setAttribute("tabindex","-1"),t.querySelectorAll("*").forEach(w=>w.setAttribute("tabindex","-1"))}}}async function me(){console.log("30nama Player v6.0.0"),await je(()=>import("./jwplayer.8.27.1.22b8f9e1.js"),[],import.meta.url);const u=window.jwplayer;return window.jwplayer.key="Pha4C3UB2JzMWjqT8w1F793Ujv6hTVbk+3KoY/G7Gn4=",u}const _e={controls:!0,fullscreen:"true",displaytitle:!0,renderCaptionsNatively:!1,autostart:!1,width:"100%",horizontalVolumeSlider:!0,aboutlink:"https://30nama.com",abouttext:"30nama",safarihlsjs:!0,pipIcon:"disabled",skin:{name:"30nama"}},ge={fa:{airplay:"ایرپلی",audioTracks:"کانال های صوتی",auto:"خودکار",buffer:"بافر",captionsStyles:"سبک‌های زیرنویس",cast:"پخش",cc:"زیرنویس",close:"بستن",displayHeading:"نمایش سربرگ",exitFullscreen:"خروج از حالت تمام صفحه",fullscreen:"تمام صفحه",hd:"HD",liveBroadcast:"پخش زنده",logo:"لوگو",mute:"سکوت",next:"بعدی",nextUp:"قسمت بعد",notLive:"زنده نیست",off:"خاموش",pause:"توقف",pipIcon:"تصویر در تصویر",play:"پخش",playback:"پخش مجدد",playbackRates:"سرعت پخش",player:"پخش کننده",poweredBy:"قدرت گرفته از",prev:"قبلی",related:"مرتبط",replay:"پخش مجدد",rewind:"بازگرداندن",settings:"تنظیمات",slider:"اسلایدر",stop:"توقف",unmute:"باز کردن صدا",videoInfo:"اطلاعات ویدئو",volume:"صدا",volumeSlider:"اسلایدر صدا",advertising:{admessage:"پیام تبلیغاتی",cuetext:"متن راهنما",podmessage:"پیام پادکست",skipmessage:"پیام رد کردن",skiptext:"رد کردن"},shortcuts:{captionsToggle:"تغییر زیرنویس",decreaseVolume:"کاهش صدا",fullscreenToggle:"تغییر حالت تمام صفحه",increaseVolume:"افزایش صدا",keyboardShortcuts:"میانبرهای صفحه کلید",playPause:"پخش / توقف",seekBackward:"پرش به عقب",seekForward:"پرش به جلو",seekPercent:"درصد زمان ویدیو",spacebar:"space",volumeToggle:"تغییر صدا"},sharing:{heading:"اشتراک گذاری",link:"لینک"},errors:{badConnection:"اتصال بد",cantLoadPlayer:"بارگذاری پخش کننده ممکن نیست",cantPlayInBrowser:"پخش در این مرورگر ممکن نیست",cantPlayVideo:"پخش ویدئو ممکن نیست",errorCode:"کد خطا",liveStreamDown:"پخش زنده خاموش است",protectedContent:"محتوای محافظت شده",technicalError:"خطای فنی"}}},he=u=>(te("data-v-1dd8d818"),u=u(),ae(),u),Ve={class:"relative h-full w-full"},Oe=he(()=>y("div",{id:"jwplayer-main-ads",class:"h-full w-full jwplayer-main-ads"},null,-1)),qe=he(()=>y("span",{class:"shadow"},null,-1)),Ue={key:0,class:"content"},Re={key:0,class:"local-numbers w-4 text-left"},ze=R({__name:"Player2Ads",props:{adTitle:{},skip:{},video:{},callbackUrl:{}},emits:["onVideoEnded","onPlay","onPause","onPlayerReady","reloadPlayer","playNextEpisode","onSeek","onProgress"],setup(u,{emit:f}){const t=u,{removeFocus:s}=be();function w(){l.value=this.setup({..._e,title:t.adTitle,sources:[{file:t.video,label:"AUTO"}],intl:ge,autostart:!0})}async function h(){await Y(),s("jwplayer-main-ads"),o.value=!0,f("onPlayerReady")}function m(){w.bind(this)()}const o=S(!1),c=S(0),n=S(!1),l=S();N(async()=>{const v=(await me())("jwplayer-main-ads");w.bind(v)(),v.on("ready",h.bind(v)),v.on("complete",()=>f("onVideoEnded")),v.on("play",()=>f("onPlay")),v.on("pause",()=>f("onPause")),v.on("seek",e=>{var _;n.value=Math.round(e.offset)!==Math.round(c.value),n.value?(_=l.value)==null||_.seek(c.value):n.value=!1,f("onSeek",e)}),v.on("time",e=>{e.currentTime&&t.skip&&(i.value=Math.floor(e.currentTime/t.skip*100)),n.value||(c.value=e.currentTime),f("onProgress",e)}),v.on("fullscreen",e=>{var _;return!e.fullscreen&&((_=document.getElementById("main-scroller"))==null?void 0:_.scrollTo({top:0}))}),v.on("error",e=>{console.log("error",e),e.code===233001&&m.bind(v)(),e.code===333001&&m.bind(v)(),e.code>=333400&&e.code<=333599&&m.bind(v)(),e.code>=233400&&e.code<=233599&&m.bind(v)()})}),Ce(()=>{l.value&&(l.value.stop(),l.value.remove())});const i=S(0);return(g,v)=>{const e=Ie,_=ve;return b(),k("div",Ve,[Oe,g.callbackUrl?(b(),F(e,{key:0,class:"absolute inset-0 top-0 h-2/3 cursor-pointer",to:g.callbackUrl,external:"",target:"_blank"},null,8,["to"])):C("",!0),g.skip?(b(),k("div",{key:1,class:z(["absolute bottom-32 z-50 mx-8",{"pointer-events-none opacity-50":p(i)<100}])},[j(Q,{name:"actions",appear:""},{default:V(()=>[g.skip?(b(),k("span",{key:"intro",class:"action",onClick:v[0]||(v[0]=a=>f("onVideoEnded"))},[y("span",{class:"bar",style:Z(`transform: scaleX(${p(i)/100})`)},null,4),qe,p(l)?(b(),k("div",Ue,[j(Q,{name:"fade-preset",mode:"out-in"},{default:V(()=>{var a;return[p(i)<100?(b(),k("p",Re,A(g.skip-Math.floor(((a=p(l))==null?void 0:a.getPosition())||0)),1)):(b(),F(_,{key:"icon",name:"ph:skip-forward-bold"}))]}),_:1}),y("p",null,A(g.$t("skip")),1)])):C("",!0)])):C("",!0)]),_:1})],2)):C("",!0)])}}});const Qe=J(ze,[["__scopeId","data-v-1dd8d818"]]);var we={exports:{}};(function(u,f){var t=function(){var s={};s.fromVtt=function(o,c,n){var l=!!n;o=o.replace(/\r/g,"");var i=/(\d+)?\n?(\d{2}:\d{2}:\d{2}[,.]\d{3}) --> (\d{2}:\d{2}:\d{2}[,.]\d{3}).*\n/g;o=o.split(i),o.shift();for(var g=[],v=0;v<o.length;v+=4){var e=o[v+3];l&&(e=e.split(`
`),e.shift(),e=e.join(`
`)),e.trim().length!==0&&g.push({id:o[v]?+o[v].trim():g.length+1,startTime:w(o[v+1].trim(),c),endTime:w(o[v+2].trim(),c),text:e.trim()})}return g},s.toVtt=function(o){if(!o instanceof Array)return"";for(var c="",n=0;n<o.length;n++){var l=o[n];!isNaN(l.startTime)&&!isNaN(l.endTime)&&(l.startTime=m(parseInt(l.startTime,10)),l.endTime=m(parseInt(l.endTime,10))),c+=l.id+`\r
`,c+=l.startTime+" --> "+l.endTime+`\r
`,c+=l.text.replace(`
`,`\r
`)+`\r
\r
`}return c};var w=function(o,c){return c==="ms"?h(o):c==="s"?h(o)/1e3:o},h=function(o){var c=/(\d+):(\d{2}):(\d{2})[,.](\d{3})/,n=c.exec(o);if(n===null)return 0;for(var l=1;l<5;l++)n[l]=parseInt(n[l],10),isNaN(n[l])&&(n[l]=0);return n[1]*36e5+n[2]*6e4+n[3]*1e3+n[4]},m=function(o){var c=[36e5,6e4,1e3],n=[];for(var l in c){var i=(o/c[l]>>0).toString();i.length<2&&(i="0"+i),o%=c[l],n.push(i)}var g=o.toString();if(g.length<3)for(l=0;l<=3-g.length;l++)g="0"+g;return n.join(":")+","+g};return s}();u.exports=t})(we);var Me=we.exports;const He=Ae(Me),Xe={class:"jw-text-track-container jw-reset !absolute !m-[1.5%]"},Ge={key:0,class:"jw-text-track-display fa"},Ye={class:"flex flex-col items-center gap-1"},Je=["innerHTML"],Ke={key:1,class:"jw-text-track-display en"},We={class:"flex flex-col items-center gap-1"},Ze=["innerHTML"],et=R({__name:"Player2Subtitles",props:{playerData:{},playerId:{}},setup(u){const f=u,t=I("preferredLanguage","fa"),s=I("preferredSize","0.75"),w=I("preferredColor","#FFF"),h=I("preferredBackground","acrylic"),{t:m}=le(),o=window.jwplayer("jwplayer-main"),c=[];N(()=>{const e=f.playerData.subtitle;e&&(e.en&&c.push({file:e.en,label:m("subtitle.english"),kind:"captions",language:"en",default:t.value==="en"}),e.fa&&c.push({file:e.fa,label:m("subtitle.persian"),kind:"captions",language:"fa",default:t.value==="fa"}),i())});const n=S({fa:[],en:[]}),l=S(o.getPosition()*1e3||0);async function i(){for(const e of c){if(!e.language)continue;const _=await $fetch(e.file),a=He.fromVtt(_,"ms");n.value[e.language]=a}v.value=new Date().getTime()}o.on("time",e=>l.value=Math.round(e.currentTime*1e3));function g(e){const _=e.find(a=>a.startTime<=l.value&&a.endTime>=l.value);return _!=null&&_.text.includes(`
`)?_.text.split(`
`):[_==null?void 0:_.text]}const v=S(new Date().getTime());return O([h,w,s,t],()=>v.value=new Date().getTime()),(e,_)=>(b(),F(M,{key:p(v),to:`#${e.playerId} .jw-captions`},[y("div",Xe,[p(t)==="fa"||p(t)==="fa+en"?(b(),k("div",Ge,[y("div",Ye,[(b(!0),k(q,null,U(g(p(n).fa),a=>(b(),k("pre",{key:a,class:"font-IRANSansX jw-text-track-cue empty:invisible",innerHTML:a},null,8,Je))),128))])])):C("",!0),p(t)==="en"||p(t)==="fa+en"?(b(),k("div",Ke,[y("div",We,[(b(!0),k(q,null,U(g(p(n).en),a=>(b(),k("pre",{key:a,class:"font-IRANSansX jw-text-track-cue empty:invisible",innerHTML:a},null,8,Ze))),128))])])):C("",!0)])],8,["to"]))}}),tt=u=>(te("data-v-5e1a5fa3"),u=u(),ae(),u),at={key:0,title:"",class:"child-item auto-dir bg-bg-13/50 border-bg-1/10 absolute bottom-full -right-[8em] z-20 mb-7 flex h-[18rem] w-[35rem] cursor-default rounded-xl border-2 p-4 backdrop-blur-lg"},lt={class:"flex flex-col flex-nowrap gap-8 overflow-y-auto px-2 w-full"},nt=["aria-label"],st={class:"flex w-full flex-row flex-nowrap items-center gap-2"},ot={class:"!text-fonts-200 whitespace-nowrap font-semibold"},rt=tt(()=>y("span",{class:"bg-bg-10 h-1 w-full rounded-full"},null,-1)),it={class:"flex flex-row flex-wrap items-center gap-4 !text-xs"},ut=["onClick"],fe=".jw-subtitles-icon",ct=R({__name:"Player2SubtitlesSettings",props:{playerData:{},playerId:{}},setup(u){const f=u,{t}=le(),{disableBackdrop:s}=Be(),w=D(()=>[{title:t("subtitle.subtitle"),lable:"subtitle",selectedOption:h.value,select:e=>h.value=e,options:[{title:t("subtitle.persian"),value:"fa"},{title:t("subtitle.english"),value:"en"},{title:t("subtitle.persianAndEnglish"),value:"fa+en"},{title:t("subtitle.withoutSubtitle"),value:"none"}].filter(e=>{var _,a,P,$;return e.value==="fa+en"?((_=f.playerData.subtitle)==null?void 0:_.fa)&&((a=f.playerData.subtitle)==null?void 0:a.en):e.value==="fa"?(P=f.playerData.subtitle)==null?void 0:P.fa:e.value==="en"?($=f.playerData.subtitle)==null?void 0:$.en:!0})},{title:t("subtitle.subtitleSize"),lable:"subtitle size",selectedOption:m.value,select:e=>m.value=e,options:[{title:t("subtitle.small"),value:"0.5"},{title:t("subtitle.medium"),value:"0.75"},{title:t("subtitle.huge"),value:"1.25"},{title:t("subtitle.veryHuge"),value:"1.50"}]},{title:t("subtitle.subtitleColor"),lable:"subtitle text color",selectedOption:o.value,select:e=>o.value=e,options:[{title:t("subtitle.yellow"),value:"#FF0"},{title:t("subtitle.white"),value:"#FFF"},{title:t("subtitle.cyan"),value:"#0FF"},{title:t("subtitle.purple"),value:"#F0F"}]},{title:t("subtitle.subtitleBackground"),lable:"subtitle background color",selectedOption:c.value,select:e=>c.value=e,options:[{title:t("subtitle.transparent"),value:"0"},...s.value?[]:[{title:t("subtitle.acrylic"),value:"acrylic"}],{title:t("subtitle.dimedBlack"),value:"0.5"},{title:t("subtitle.black"),value:"1"}]}]),h=I("preferredLanguage","fa"),m=I("preferredSize","0.75"),o=I("preferredColor","#FFF"),c=I("preferredBackground","acrylic"),n=S(!1),l=document.querySelector(fe);re(l,()=>n.value=!1);const i=window.jwplayer("jwplayer-main");N(()=>{g()});function g(){const e=document.querySelector(".jw-captions");c.value==="acrylic"?e==null||e.classList.add("acrylic"):e==null||e.classList.remove("acrylic"),c.value==="acrylic"&&s.value&&(console.log("hello?"),e==null||e.classList.remove("acrylic"),c.value="0");try{i.setCaptions({color:o.value,fontSize:16*Number(m.value),backgroundOpacity:Number(c.value)*100})}catch(_){console.error("updateCaptionStyle",_)}}function v(e){try{const _=i.getCaptionsList().findIndex(a=>(a.language||"none")===e);i.setCurrentCaptions(_)}catch(_){console.error("changeCaptionLanguage",_)}}return O(h,v),O([c,o,m],g),(e,_)=>(b(),F(M,{to:`#${e.playerId} ${fe}`},[y("div",{class:"flex inset-0 absolute",onClick:_[0]||(_[0]=a=>n.value=!p(n))}),j(Q,{name:"player-options"},{default:V(()=>[p(n)?(b(),k("div",at,[y("div",lt,[(b(!0),k(q,null,U(p(w),a=>(b(),k("section",{key:a.lable,"aria-label":a.lable,class:"flex w-full flex-col gap-8 text-base"},[y("header",st,[y("h6",ot,A(a.title),1),rt]),y("ul",it,[(b(!0),k(q,null,U(a.options,P=>(b(),k("li",{key:P.title,class:z(["local-numbers bg-bg-11/50 hover:bg-bg-11 flex min-w-[9em] !cursor-pointer justify-center rounded-xl p-2 transition-colors",{"!bg-primary-500 !hover:bg-bg-primary-500 !cursor-default":a.selectedOption===P.value}]),onClick:$=>a.select(P.value)},A(P.title),11,ut))),128))])],8,nt))),128))])])):C("",!0)]),_:1})],8,["to"]))}});const dt=J(ct,[["__scopeId","data-v-5e1a5fa3"]]),pt=u=>(te("data-v-3ba9e72a"),u=u(),ae(),u),ft={key:0,title:"",class:"child-item auto-dir bg-bg-13/50 border-bg-1/10 absolute bottom-full -right-[10.8rem] z-20 mb-7 flex h-[18rem] w-[35rem] cursor-default rounded-xl border-2 p-4 backdrop-blur-lg"},yt={class:"flex flex-col flex-nowrap gap-8 overflow-y-auto px-2 w-full"},vt=["aria-label"],bt={class:"flex w-full flex-row flex-nowrap items-center gap-2"},mt={class:"!text-fonts-200 whitespace-nowrap font-semibold"},_t=pt(()=>y("span",{class:"bg-bg-10 h-1 w-full rounded-full"},null,-1)),gt={class:"flex flex-row flex-wrap items-center gap-4 !text-xs"},ht=["onClick"],ye=".jw-settings-icon",wt=R({__name:"Player2Settings",props:{playerData:{},playerId:{}},emits:["reloadPlayer"],setup(u,{emit:f}){const t=u,{t:s}=le(),w=D(()=>t.playerData.file.m3u8.some(a=>Object.keys(a).includes("2ch"))),h=D(()=>t.playerData.file.m3u8.some(a=>Object.keys(a).includes("6ch"))),m=S([]),o=D(()=>[...m.value.length>1?[{title:s("language"),label:"Audio track",selectedOption:l.value,select:a=>l.value=a,options:m.value.map(a=>({title:s(`langCode.${a.language}`),value:a.language}))}]:[],...w.value||h.value?[{title:s("playerSettings.audioChannels"),label:"Audio channel",selectedOption:c.value,select:a=>c.value=a,options:[{title:s("playerSettings.auto"),value:"default"},...h.value?[{title:s("playerSettings.6Channels"),value:"6ch"}]:[],...w.value?[{title:s("playerSettings.2Channels"),value:"2ch"}]:[]]}]:[],{title:s("playerSettings.playbackSpeed"),label:"Playback speed",selectedOption:n.value,select:a=>n.value=a,options:[{title:"0.5",value:"0.5"},{title:s("playerSettings.normal"),value:"1"},{title:"1.5",value:"1.5"},{title:"2",value:"2"}]}]),c=I("preferredAudioChannel","default"),n=I("preferredPlaybackSpeed","1"),l=I("preferredAudioTrack","en"),i=S(!1),g=document.querySelector(ye);re(g,()=>i.value=!1);const v=window.jwplayer("jwplayer-main");N(()=>e()),N(()=>{const a=v.getAudioTracks();a.length&&(m.value=a)}),v.on("audioTracks",async a=>{m.value=a.tracks;const P=m.value.findIndex($=>$.language===l.value);P===-1||a.currentTrack===P||(await Y(),v.setCurrentAudioTrack(P))});function e(){try{v.setPlaybackRate(Number(n.value))}catch(a){console.error("updatePlaybackSpeed",a)}}function _(){const a=m.value.findIndex(P=>P.language===l.value);try{v.setCurrentAudioTrack(a)}catch(P){console.error("updateAudioTrack",P)}}return O(c,()=>setTimeout(()=>f("reloadPlayer"),100)),O(n,()=>e()),O(l,()=>_()),(a,P)=>(b(),F(M,{to:`#${a.playerId} ${ye}`},[y("div",{class:"flex inset-0 absolute",onClick:P[0]||(P[0]=$=>i.value=!p(i))}),j(Q,{name:"player-options"},{default:V(()=>[p(i)?(b(),k("div",ft,[y("div",yt,[(b(!0),k(q,null,U(p(o),$=>(b(),k("section",{key:$.label,"aria-label":$.label,class:"flex w-full flex-col gap-8 text-base"},[y("header",bt,[y("h6",mt,A($.title),1),_t]),y("ul",gt,[(b(!0),k(q,null,U($.options,x=>(b(),k("li",{key:x.title,class:z(["local-numbers bg-bg-11/50 hover:bg-bg-11 flex min-w-[9em] !cursor-pointer justify-center rounded-xl p-2 transition-colors",{"!bg-primary-500 !hover:bg-bg-primary-500 !cursor-default":$.selectedOption===x.value}]),onClick:E=>$.select(x.value)},A(x.title),11,ht))),128))])],8,vt))),128))])])):C("",!0)]),_:1})],8,["to"]))}});const kt=J(wt,[["__scopeId","data-v-3ba9e72a"]]),ie=u=>(te("data-v-9c452e8c"),u=u(),ae(),u),xt={class:"absolute bottom-32 right-4 flex flex-col gap-2 font-IRANSansX"},St=ie(()=>y("span",{class:"shadow"},null,-1)),Pt={class:"content"},Tt=ie(()=>y("span",{class:"shadow"},null,-1)),$t={class:"content"},jt=ie(()=>y("span",{class:"shadow"},null,-1)),Ct={class:"content"},It={class:"content"},At=R({__name:"Player2SideActions",props:{options:{},playerId:{}},emits:["play-next-episode"],setup(u,{emit:f}){const t=u,s=window.jwplayer("jwplayer-main"),w=D(()=>{if(t.options.intro_start)return g(t.options.intro_start)}),h=D(()=>{if(t.options.intro_end)return g(t.options.intro_end)}),m=D(()=>{if(t.options.previously_start)return g(t.options.previously_start)}),o=D(()=>{if(t.options.previously_end)return g(t.options.previously_end)}),c=D(()=>{if(t.options.end)return g(t.options.end)}),n=S({visible:!1,progress:0}),l=S({visible:!1,progress:0}),i=S({visible:!1,progress:0});N(()=>s.on("time",Ee(x=>v(Math.floor(x.currentTime)),1e3)));function g(x){const[E,L,H]=x.split(":");return parseInt(E)*3600+parseInt(L)*60+parseInt(H)}function v(x){typeof w.value=="number"&&typeof h.value=="number"&&(x>=w.value&&x<=h.value?(n.value.visible=!0,n.value.progress=(x-w.value)/(h.value-w.value)):n.value.visible=!1),typeof m.value=="number"&&typeof o.value=="number"&&(x>=m.value&&x<=o.value?(l.value.visible=!0,l.value.progress=(x-m.value)/(o.value-m.value)):l.value.visible=!1),typeof c.value=="number"&&!t.options.isLastEpisode&&(x>=c.value?_():i.value.visible=!1)}const e=S({token:t.options.token,cancelled:!1,busy:!1});async function _(){if(e.value.busy||e.value.cancelled)return;i.value.visible=!0,e.value.busy=!0;const x=()=>{e.value.cancelled=!0,i.value.progress=0,e.value.busy=!1};for(let E=0;E<50;E++){if(e.value.cancelled||(await ee.core.delay(100),s.getState()==="paused"))return x();i.value.progress=E/50}if(e.value.cancelled)return x();await ee.core.delay(1100),f("play-next-episode")}function a(){typeof h.value=="number"&&s.seek(h.value)}function P(){typeof o.value=="number"&&s.seek(o.value)}function $(){typeof c.value=="number"&&f("play-next-episode")}return(x,E)=>{const L=ve;return b(),F(M,{to:`#${x.playerId}`},[y("div",xt,[j(De,{name:"actions",appear:""},{default:V(()=>[p(n).visible?(b(),k("span",{key:"intro",class:"action",onClick:a},[y("span",{class:"bar",style:Z(`transform: scaleX(${p(n).progress})`)},null,4),St,y("div",Pt,[j(L,{name:"ph:arrow-clockwise-bold"}),y("p",null,A(x.$t("skipIntro")),1)])])):C("",!0),p(l).visible?(b(),k("span",{key:"previous",class:"action",onClick:P},[y("span",{class:"bar",style:Z(`transform: scaleX(${p(l).progress})`)},null,4),Tt,y("div",$t,[j(L,{name:"ph:arrow-clockwise-bold"}),y("p",null,A(x.$t("skipPreviously")),1)])])):C("",!0),p(i).visible?(b(),k("span",{key:"next-episode",class:"action",onClick:$,onMouseenter:E[0]||(E[0]=H=>p(e).cancelled=!0)},[y("span",{class:z(["bar",{"!hidden":p(e).cancelled===!0}]),style:Z(`transform: scaleX(${p(i).progress})`)},null,6),jt,y("div",Ct,[j(L,{name:"ph:skip-forward-bold"}),y("p",It,A(x.$t("nextEpisode")),1)])],32)):C("",!0)]),_:1})])],8,["to"])}}});const Bt=J(At,[["__scopeId","data-v-9c452e8c"]]),Et={class:"relative h-full flex items-center"},Dt={key:0,class:"auto-label flex px-2 py-[0.1rem] text-[10px] rounded-full bg-primary-500 absolute -top-[0.5rem] font-bold -right-[1rem]"},Ft={class:"font-semibold"},Lt={key:0,title:"",class:"child-item auto-dir bg-bg-13/50 border-bg-1/10 absolute bottom-full right-1/2 translate-x-1/2 z-[100] mb-7 flex min-h-[10em] w-[13em] cursor-default rounded-xl border-2 py-4 backdrop-blur-lg"},Nt={class:"flex w-full flex-col flex-nowrap gap-8 overflow-y-auto"},Vt={class:"flex w-full flex-col gap-4 text-base"},Ot={class:"flex flex-col gap-2"},qt=["onClick"],Ut={class:"relative"},oe=".jw-quality-selector-icon",Rt=R({__name:"Player2Quality",props:{playerData:{},playerId:{}},emits:["reloadPlayer"],setup(u){const f=window.jwplayer("jwplayer-main"),t=I("preferredQuality","AUTO"),s=S([]),w=S(t.value!=="AUTO"?t.value:"720p");function h(n){const l=n===-1?0:n;if(o.value=!1,!f)return;const i=s.value[l];t.value=i.label,f.setCurrentQuality(l)}function m(n){s.value=n.map(i=>({label:i.label.includes("p")?i.label:"AUTO",bitrate:i.bitrate,width:i.width,height:i.height}));const l=s.value.findIndex(i=>i.label===t.value);h(l)}f.on("levels",n=>{m(n.levels)}),N(()=>{const n=f.getQualityLevels();n&&n.length&&m(n)}),f.on("visualQuality",n=>{if(!n.level)return;const l=s.value[n.level.index];w.value=l.label});const o=S(!1),c=document.querySelector(oe);return re(c,()=>o.value=!1),(n,l)=>(b(),F(M,{to:`#${n.playerId} ${oe}`},[y("div",{class:"flex inset-0 absolute z-10",onClick:l[0]||(l[0]=i=>o.value=!p(o))}),(b(),F(M,{to:oe},[y("div",Et,[p(t)==="AUTO"?(b(),k("span",Dt,A(n.$t("auto")),1)):C("",!0),y("span",Ft,A(p(w)),1)])])),j(Q,{name:"player-options"},{default:V(()=>[p(o)?(b(),k("div",Lt,[y("div",Nt,[y("section",Vt,[y("ul",Ot,[(b(!0),k(q,null,U(p(s),i=>(b(),k("li",{key:i.label,class:z(["hover:bg-bg-1/10 hover:!text-fonts-50 !text-fonts-200 relative flex w-full min-w-[9em] cursor-pointer items-center justify-center gap-2 p-3 transition-colors",{"!bg-bg-1/10 !hover:bg-bg-1/20 !text-fonts-50 !cursor-default":i.label===p(t)}]),onClick:g=>h(p(s).indexOf(i))},[y("span",{class:z(["bg-primary-500 shadow-primary-500 absolute left-2 top-1/2 h-1/2 w-[2px] -translate-y-1/2 rounded-full opacity-0 shadow-[0_0_8px_1px]",{"!opacity-100":i.label===p(t)}])},null,2),y("div",Ut,A(i.label.replace("AUTO",n.$t("auto"))),1)],10,qt))),128))])])])])):C("",!0)]),_:1})],8,["to"]))}});const zt=J(Rt,[["__scopeId","data-v-8fc2616d"]]),Qt=""+new URL("Settings.2d4e702a.svg",import.meta.url).href;function Mt({t:u}){return this.addButton(Qt,u("settings.settings"),()=>{},"jw-settings","clickable-btn jw-settings-icon")}function Ht({t:u}){const f=()=>{};return this.addButton("",u("qualitySelector"),f,"jw-quality-selector","clickable-btn jw-quality-selector-icon")}const Xt=""+new URL("ClosedCaptioning.9039dab5.svg",import.meta.url).href;function Gt({t:u}){const f=()=>{};return this.addButton(Xt,u("subtitleSettings"),f,"jw-subtitles","clickable-btn jw-subtitles-icon")}const Yt=""+new URL("Cards.1c7501fb.svg",import.meta.url).href;function Jt({t:u,playerData:f}){const t=()=>{this.pause(),this.getFullscreen()&&this.setFullscreen(!1),setTimeout(()=>{var s;return(s=document.querySelector(".selected-episode"))==null?void 0:s.scrollIntoView({behavior:"smooth",block:"center"})},100)};return this.addButton(Yt,u("episodeSelector"),t,"jw-episode-selector",`clickable-btn jw-episode-selector-icon ${f.info.isSeries?"":"jw-hidden"}`)}const Kt=""+new URL("SkipForward.26508f6e.svg",import.meta.url).href;function Wt({t:u,$emit:f,playerData:t}){var m;const s=()=>f("playNextEpisode");this.addButton(Kt,u("nextEpisode"),s,"jw-skip-episode","jw-skip-episode-icon");const w=document.querySelector(".jw-skip-episode-icon");if(!w)return;w.style.display=t.options.isLastEpisode||!t.info.isSeries?"none":"inherit";const h=document.querySelector(".jw-icon-volume");(m=h==null?void 0:h.parentElement)==null||m.insertBefore(w,h==null?void 0:h.previousSibling)}const Zt=""+new URL("ArrowClockwise.985ddcef.svg",import.meta.url).href;function ea({t:u}){var h,m;const f=()=>this.seek(this.getPosition()+10);this.addButton(Zt,u("forward"),f,"jw-forward","jw-forward-icon");const t=document.querySelector(".jw-icon-playback"),s=document.querySelector(".jw-skip-episode-icon"),w=document.querySelector(".jw-forward-icon");t&&s&&((h=t.parentNode)==null||h.insertBefore(t,s)),s&&w&&((m=s.parentNode)==null||m.insertBefore(w,s))}const ta=[Jt,Ht,Gt,Mt,Wt,ea];function aa(u){ta.forEach(f=>f.bind(this)(u))}const la={class:"flex w-full h-full relative"},na={key:"ads-player",class:"absolute z-40 h-full w-full"},sa=y("div",{id:"jwplayer-main",class:"h-full"},null,-1),ra=R({__name:"Player2Main",props:{playerData:{}},emits:["onVideoEnded","onPlay","onPause","onPlayerReady","reloadPlayer","playNextEpisode","onSeek","onProgress"],setup(u,{expose:f,emit:t}){const s=u,{t:w}=le(),{removeFocus:h}=be(),m=I("preferredAudioChannel","default"),o=I("preferredQuality","AUTO"),c=I("_nad",0);function n(){this.play();const r=document.querySelector(".jw-skip-episode-icon");r&&(r.style.display=s.playerData.options.isLastEpisode||!s.playerData.info.isSeries?"none":"inherit")}function l(r,d){const T={title:r.info.isSeries?r.info.title:r.info.displayName,description:r.info.isSeries?r.info.displayName:"",image:r.image.cover_webp||r.image.cover,sources:r.file.m3u8.map(B=>({file:B[m.value]||B.default,label:B.label.replace("خودکار","AUTO").toUpperCase(),default:B.label.replace("خودکار","AUTO").toUpperCase()===o.value}))};if(d!=null&&d.episodeChanged)return this.load([{...T}]),t("onPlayerReady"),this.once("meta",()=>this.seek(d.position)),n.bind(this)();a.value=this.setup({..._e,...T,intl:ge,autostart:!0}),this.once("meta",v.bind(this))}async function i(){await Y();const r=aa.bind(this),d={$emit:t,playerData:s.playerData,t:w};r(d),h("jwplayer-main"),_.value=!0,t("onPlayerReady")}function g(){const r=s.playerData.ads;r&&c.value!==-1&&(c.value>new Date().getTime()||ke.bind(this)(r))}function v(){s.playerData.info.time&&this.seek(s.playerData.info.time)}function e(r=0){l.bind(this)(s.playerData,{episodeChanged:!0,position:r})}const _=S(!1),a=S(),P=S();N(async()=>{W();const d=(await me())("jwplayer-main");l.bind(d)(s.playerData),d.on("ready",i.bind(d)),d.on("complete",()=>t("onVideoEnded")),d.on("play",()=>{g.bind(d)(),t("onPlay")}),d.on("pause",()=>t("onPause")),d.on("seek",T=>t("onSeek",T)),d.on("time",T=>{console.log(T.currentTime),t("onProgress",T)}),d.on("fullscreen",T=>{var B;return!T.fullscreen&&((B=document.getElementById("main-scroller"))==null?void 0:B.scrollTo({top:0}))}),d.on("error",async T=>{var B;console.log("error",T),T.code===233001&&e.bind(d)(d.getPosition()),T.code===333001&&e.bind(d)(d.getPosition()),T.code>=333400&&T.code<=333599&&e.bind(d)(d.getPosition()),T.code>=233400&&T.code<=233599&&e.bind(d)(d.getPosition()),await Y(),(B=document.querySelector(".jw-error-msg"))==null||B.append(P.value)})}),Fe(()=>{a.value&&(a.value.stop(),a.value.remove())});const $=()=>{var r;return(r=a.value)==null?void 0:r.play()},x=()=>{var r;return(r=a.value)==null?void 0:r.pause()},E=r=>{var d;return(d=a.value)==null?void 0:d.seek(r)},L=r=>{var d;return(d=a.value)==null?void 0:d.setFullscreen(r)},H=()=>{var r;return(r=a.value)==null?void 0:r.getFullscreen()};f({play:$,pause:x,seek:E,isFullscreen:H,setFullscreen:L,updatePlayerData:l,playerInstance:a});const X=S(!1);O(X,async()=>{var d;if(X.value===!1)return;const r=((d=a.value)==null?void 0:d.getState())!=="playing";for(;X.value;)x(),H()&&L(!1),await ee.core.delay(250);r||$()});const ne=S(!1),K=S(),ue=S(),ce=S(),de=S(""),pe=S("#");function W(r){r&&(c.value=new Date().getTime()+864e5),ne.value=!1,X.value=!1}async function ke(r){for(W(),await Y(),X.value=!0,ne.value=!0,pe.value=r.link,ce.value=r.skipAfter,ue.value=r.title,de.value=r.video;!document.getElementById("ad-player");)await ee.core.delay(50);this.pause(),K.value=document.getElementById("ad-player"),K.value.src=r.video,K.value.play(),K.value.onended=()=>W(!0)}return(r,d)=>{const T=Qe,B=et,xe=dt,Se=kt,Pe=Bt,Te=zt,$e=Ne;return b(),k("div",la,[j(Q,{name:"fade-preset"},{default:V(()=>[p(ne)?(b(),k("div",na,[r.playerData.ads?(b(),F(T,{key:0,"ad-title":p(ue),video:p(de),"callback-url":p(pe),skip:p(ce),onOnVideoEnded:d[0]||(d[0]=se=>W(!0))},null,8,["ad-title","video","callback-url","skip"])):C("",!0)])):C("",!0)]),_:1}),sa,p(_)?(b(),k("span",{key:r.playerData.info.file_id},[j(B,{"player-data":r.playerData,"player-id":"jwplayer-main"},null,8,["player-data"]),j(xe,{"player-data":r.playerData,"player-id":"jwplayer-main"},null,8,["player-data"]),j(Se,{"player-id":"jwplayer-main","player-data":r.playerData,onReloadPlayer:d[1]||(d[1]=se=>{var G;return e.bind(p(a))((G=p(a))==null?void 0:G.getPosition())})},null,8,["player-data"]),j(Pe,{options:r.playerData.options,"player-id":"jwplayer-main",onPlayNextEpisode:d[2]||(d[2]=se=>t("playNextEpisode"))},null,8,["options"]),j(Te,{"player-data":r.playerData,"player-id":"jwplayer-main"},null,8,["player-data"]),y("div",{ref_key:"errorButton",ref:P,class:"retry hidden"},[j($e,{class:"btn-primary text-sm ms-8 whitespace-nowrap",onClick:d[3]||(d[3]=se=>{var G;return e.bind(p(a))((G=p(a))==null?void 0:G.getPosition())})},{default:V(()=>[Le(A(r.$t("retry")),1)]),_:1})],512)])):C("",!0)])}}});export{ra as _};
