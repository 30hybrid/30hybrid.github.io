import{at as je,d as O,n as x,o as R,au as $e,g as m,h as k,k as A,y as j,z,j as f,i as $,w as N,q as v,C as J,T as Q,B as T,P as ae,_ as Ce,D as ye,G as W,H as Z,I as G,ae as Te,ai as C,b as ee,v as M,F as U,r as q,al as X,m as Ie,c as V,ak as se,am as Ee,an as Ae,p as K,f as Be}from"./entry.93e74cd5.js";function ve(){return{removeFocus:c=>{const e=document.getElementById(c);if(!e)return console.error(`Element with id ${c} not found`);e.setAttribute("tabindex","-1"),e.querySelectorAll("*").forEach(w=>w.setAttribute("tabindex","-1"))}}}async function be(){console.log("30nama Player v6.0.0"),await je(()=>import("./jwplayer.8.27.1.22b8f9e1.js"),[],import.meta.url);const o=window.jwplayer;return window.jwplayer.key="Pha4C3UB2JzMWjqT8w1F793Ujv6hTVbk+3KoY/G7Gn4=",o}const me={controls:!0,fullscreen:"true",displaytitle:!0,renderCaptionsNatively:!1,autostart:!1,width:"100%",horizontalVolumeSlider:!0,aboutlink:"https://30nama.com",abouttext:"30nama",safarihlsjs:!0,pipIcon:"disabled",skin:{name:"30nama"}},_e={fa:{airplay:"ایرپلی",audioTracks:"کانال های صوتی",auto:"خودکار",buffer:"بافر",captionsStyles:"سبک‌های زیرنویس",cast:"پخش",cc:"زیرنویس",close:"بستن",displayHeading:"نمایش سربرگ",exitFullscreen:"خروج از حالت تمام صفحه",fullscreen:"تمام صفحه",hd:"HD",liveBroadcast:"پخش زنده",logo:"لوگو",mute:"سکوت",next:"بعدی",nextUp:"قسمت بعد",notLive:"زنده نیست",off:"خاموش",pause:"توقف",pipIcon:"تصویر در تصویر",play:"پخش",playback:"پخش مجدد",playbackRates:"سرعت پخش",player:"پخش کننده",poweredBy:"قدرت گرفته از",prev:"قبلی",related:"مرتبط",replay:"پخش مجدد",rewind:"بازگرداندن",settings:"تنظیمات",slider:"اسلایدر",stop:"توقف",unmute:"باز کردن صدا",videoInfo:"اطلاعات ویدئو",volume:"صدا",volumeSlider:"اسلایدر صدا",advertising:{admessage:"پیام تبلیغاتی",cuetext:"متن راهنما",podmessage:"پیام پادکست",skipmessage:"پیام رد کردن",skiptext:"رد کردن"},shortcuts:{captionsToggle:"تغییر زیرنویس",decreaseVolume:"کاهش صدا",fullscreenToggle:"تغییر حالت تمام صفحه",increaseVolume:"افزایش صدا",keyboardShortcuts:"میانبرهای صفحه کلید",playPause:"پخش / توقف",seekBackward:"پرش به عقب",seekForward:"پرش به جلو",seekPercent:"درصد زمان ویدیو",spacebar:"space",volumeToggle:"تغییر صدا"},sharing:{heading:"اشتراک گذاری",link:"لینک"},errors:{badConnection:"اتصال بد",cantLoadPlayer:"بارگذاری پخش کننده ممکن نیست",cantPlayInBrowser:"پخش در این مرورگر ممکن نیست",cantPlayVideo:"پخش ویدئو ممکن نیست",errorCode:"کد خطا",liveStreamDown:"پخش زنده خاموش است",protectedContent:"محتوای محافظت شده",technicalError:"خطای فنی"}}},ge=o=>(W("data-v-1dd8d818"),o=o(),Z(),o),Fe={class:"relative h-full w-full"},De=ge(()=>v("div",{id:"jwplayer-main-ads",class:"h-full w-full jwplayer-main-ads"},null,-1)),Le=ge(()=>v("span",{class:"shadow"},null,-1)),Ve={key:0,class:"content"},Ne={key:0,class:"local-numbers w-4 text-left"},Ue=O({__name:"Player2Ads",props:{adTitle:{},skip:{},video:{},callbackUrl:{}},emits:["onVideoEnded","onPlay","onPause","onPlayerReady","reloadPlayer","playNextEpisode","onSeek","onProgress"],setup(o,{emit:c}){const e=o,{removeFocus:r}=ve();function w(){l.value=this.setup({...me,title:e.adTitle,sources:[{file:e.video,label:"AUTO"}],intl:_e,autostart:!0})}async function _(){await ae(),r("jwplayer-main-ads"),s.value=!0,c("onPlayerReady")}function g(){w.bind(this)()}const s=x(!1),i=x(0),a=x(!1),l=x();R(async()=>{const b=(await be())("jwplayer-main-ads");w.bind(b)(),b.on("ready",_.bind(b)),b.on("complete",()=>c("onVideoEnded")),b.on("play",()=>c("onPlay")),b.on("pause",()=>c("onPause")),b.on("seek",t=>{var h;a.value=Math.round(t.offset)!==Math.round(i.value),a.value?(h=l.value)==null||h.seek(i.value):a.value=!1,c("onSeek",t)}),b.on("time",t=>{t.currentTime&&e.skip&&(u.value=Math.floor(t.currentTime/e.skip*100)),a.value||(i.value=t.currentTime),c("onProgress",t)}),b.on("fullscreen",t=>{var h;return!t.fullscreen&&((h=document.getElementById("main-scroller"))==null?void 0:h.scrollTo({top:0}))}),b.on("error",t=>{console.log("error",t),t.code===233001&&g.bind(b)(),t.code===333001&&g.bind(b)(),t.code>=333400&&t.code<=333599&&g.bind(b)(),t.code>=233400&&t.code<=233599&&g.bind(b)()})}),$e(()=>{l.value&&(l.value.stop(),l.value.remove())});const u=x(0);return(y,b)=>{const t=Ce,h=ye;return m(),k("div",Fe,[De,y.callbackUrl?(m(),A(t,{key:0,class:"absolute inset-0 top-0 h-2/3 cursor-pointer",to:y.callbackUrl,external:"",target:"_blank"},null,8,["to"])):j("",!0),y.skip?(m(),k("div",{key:1,class:z(["absolute bottom-32 z-50 mx-8",{"pointer-events-none opacity-50":f(u)<100}])},[$(Q,{name:"actions",appear:""},{default:N(()=>[y.skip?(m(),k("span",{key:"intro",class:"action",onClick:b[0]||(b[0]=d=>c("onVideoEnded"))},[v("span",{class:"bar",style:J(`transform: scaleX(${f(u)/100})`)},null,4),Le,f(l)?(m(),k("div",Ve,[$(Q,{name:"fade-preset",mode:"out-in"},{default:N(()=>{var d;return[f(u)<100?(m(),k("p",Ne,T(y.skip-Math.floor(((d=f(l))==null?void 0:d.getPosition())||0)),1)):(m(),A(h,{key:"icon",name:"ph:skip-forward-bold"}))]}),_:1}),v("p",null,T(y.$t("skip")),1)])):j("",!0)])):j("",!0)]),_:1})],2)):j("",!0)])}}});const qe=G(Ue,[["__scopeId","data-v-1dd8d818"]]);var he={exports:{}};(function(o,c){var e=function(){var r={};r.fromVtt=function(s,i,a){var l=!!a;s=s.replace(/\r/g,"");var u=/(\d+)?\n?(\d{2}:\d{2}:\d{2}[,.]\d{3}) --> (\d{2}:\d{2}:\d{2}[,.]\d{3}).*\n/g;s=s.split(u),s.shift();for(var y=[],b=0;b<s.length;b+=4){var t=s[b+3];l&&(t=t.split(`
`),t.shift(),t=t.join(`
`)),t.trim().length!==0&&y.push({id:s[b]?+s[b].trim():y.length+1,startTime:w(s[b+1].trim(),i),endTime:w(s[b+2].trim(),i),text:t.trim()})}return y},r.toVtt=function(s){if(!s instanceof Array)return"";for(var i="",a=0;a<s.length;a++){var l=s[a];!isNaN(l.startTime)&&!isNaN(l.endTime)&&(l.startTime=g(parseInt(l.startTime,10)),l.endTime=g(parseInt(l.endTime,10))),i+=l.id+`\r
`,i+=l.startTime+" --> "+l.endTime+`\r
`,i+=l.text.replace(`
`,`\r
`)+`\r
\r
`}return i};var w=function(s,i){return i==="ms"?_(s):i==="s"?_(s)/1e3:s},_=function(s){var i=/(\d+):(\d{2}):(\d{2})[,.](\d{3})/,a=i.exec(s);if(a===null)return 0;for(var l=1;l<5;l++)a[l]=parseInt(a[l],10),isNaN(a[l])&&(a[l]=0);return a[1]*36e5+a[2]*6e4+a[3]*1e3+a[4]},g=function(s){var i=[36e5,6e4,1e3],a=[];for(var l in i){var u=(s/i[l]>>0).toString();u.length<2&&(u="0"+u),s%=i[l],a.push(u)}var y=s.toString();if(y.length<3)for(l=0;l<=3-y.length;l++)y="0"+y;return a.join(":")+","+y};return r}();o.exports=e})(he);var Oe=he.exports;const Re=Te(Oe),ze={class:"jw-text-track-container jw-reset !absolute !m-[1.5%]"},Qe={key:0,class:"jw-text-track-display fa"},Me={class:"flex flex-col items-center gap-1"},Xe={key:1,class:"jw-text-track-display en"},Ge={class:"flex flex-col items-center gap-1"},He=O({__name:"Player2Subtitles",props:{playerData:{},playerId:{}},setup(o){const c=o,e=C("preferredLanguage","fa"),r=C("preferredSize","0.75"),w=C("preferredColor","#FFF"),_=C("preferredBackground","acrylic"),{t:g}=ee(),s=window.jwplayer("jwplayer-main"),i=[];R(()=>{const t=c.playerData.subtitle;t&&(t.en&&i.push({file:t.en,label:g("subtitle.english"),kind:"captions",language:"en",default:e.value==="en"}),t.fa&&i.push({file:t.fa,label:g("subtitle.persian"),kind:"captions",language:"fa",default:e.value==="fa"}),u())});const a=x({fa:[],en:[]}),l=x(s.getPosition()*1e3||0);async function u(){for(const t of i){if(!t.language)continue;const h=await $fetch(t.file),d=Re.fromVtt(h,"ms");a.value[t.language]=d}b.value=new Date().getTime()}s.on("time",t=>l.value=Math.round(t.currentTime*1e3));function y(t){const h=t.find(d=>d.startTime<=l.value&&d.endTime>=l.value);return h!=null&&h.text.includes(`
`)?h.text.split(`
`):[h==null?void 0:h.text]}const b=x(new Date().getTime());return M([_,w,r,e],()=>b.value=new Date().getTime()),(t,h)=>(m(),A(X,{key:f(b),to:`#${t.playerId} .jw-captions`},[v("div",ze,[f(e)==="fa"||f(e)==="fa+en"?(m(),k("div",Qe,[v("div",Me,[(m(!0),k(U,null,q(y(f(a).fa),d=>(m(),k("pre",{key:d,class:"font-Main jw-text-track-cue empty:invisible"},T(d),1))),128))])])):j("",!0),f(e)==="en"||f(e)==="fa+en"?(m(),k("div",Xe,[v("div",Ge,[(m(!0),k(U,null,q(y(f(a).en),d=>(m(),k("pre",{key:d,class:"font-Main jw-text-track-cue empty:invisible"},T(d),1))),128))])])):j("",!0)])],8,["to"]))}}),Ye=o=>(W("data-v-899bd3ec"),o=o(),Z(),o),Je={key:0,title:"",class:"child-item auto-dir bg-bg-13/50 border-bg-1/10 absolute bottom-full -right-[8em] z-20 mb-7 flex h-[18rem] w-[35rem] cursor-default rounded-xl border-2 p-4 backdrop-blur-lg"},Ke={class:"flex flex-col flex-nowrap gap-8 overflow-y-auto px-2 w-full"},We=["aria-label"],Ze={class:"flex w-full flex-row flex-nowrap items-center gap-2"},et={class:"!text-fonts-200 whitespace-nowrap font-semibold"},tt=Ye(()=>v("span",{class:"bg-bg-10 h-1 w-full rounded-full"},null,-1)),lt={class:"flex flex-row flex-wrap items-center gap-4 !text-xs"},at=["onClick"],pe=".jw-subtitles-icon",st=O({__name:"Player2SubtitlesSettings",props:{playerData:{},playerId:{}},setup(o){const c=o,{t:e}=ee(),{disableBackdrop:r}=Ie(),w=V(()=>[{title:e("subtitle.subtitle"),lable:"subtitle",selectedOption:_.value,select:t=>_.value=t,options:[{title:e("subtitle.persian"),value:"fa"},{title:e("subtitle.english"),value:"en"},{title:e("subtitle.persianAndEnglish"),value:"fa+en"},{title:e("subtitle.withoutSubtitle"),value:"none"}].filter(t=>{var h,d,I,B;return t.value==="fa+en"?((h=c.playerData.subtitle)==null?void 0:h.fa)&&((d=c.playerData.subtitle)==null?void 0:d.en):t.value==="fa"?(I=c.playerData.subtitle)==null?void 0:I.fa:t.value==="en"?(B=c.playerData.subtitle)==null?void 0:B.en:!0})},{title:e("subtitle.subtitleSize"),lable:"subtitle size",selectedOption:g.value,select:t=>g.value=t,options:[{title:e("subtitle.small"),value:"0.5"},{title:e("subtitle.medium"),value:"0.75"},{title:e("subtitle.huge"),value:"1.25"},{title:e("subtitle.veryHuge"),value:"1.50"}]},{title:e("subtitle.subtitleColor"),lable:"subtitle text color",selectedOption:s.value,select:t=>s.value=t,options:[{title:e("subtitle.yellow"),value:"#FF0"},{title:e("subtitle.white"),value:"#FFF"},{title:e("subtitle.cyan"),value:"#0FF"},{title:e("subtitle.purple"),value:"#F0F"}]},{title:e("subtitle.subtitleBackground"),lable:"subtitle background color",selectedOption:i.value,select:t=>i.value=t,options:[{title:e("subtitle.transparent"),value:"0"},...r.value?[]:[{title:e("subtitle.acrylic"),value:"acrylic"}],{title:e("subtitle.dimedBlack"),value:"0.5"},{title:e("subtitle.black"),value:"1"}]}]),_=C("preferredLanguage","fa"),g=C("preferredSize","0.75"),s=C("preferredColor","#FFF"),i=C("preferredBackground","acrylic"),a=x(!1),l=document.querySelector(pe);se(l,()=>a.value=!1);const u=window.jwplayer("jwplayer-main");R(()=>{y()});function y(){const t=document.querySelector(".jw-captions");i.value==="acrylic"?t==null||t.classList.add("acrylic"):t==null||t.classList.remove("acrylic"),i.value==="acrylic"&&r.value&&(console.log("hello?"),t==null||t.classList.remove("acrylic"),i.value="0");try{u.setCaptions({color:s.value,fontSize:20*Number(g.value),backgroundOpacity:Number(i.value)*100})}catch(h){console.error("updateCaptionStyle",h)}}function b(t){try{const h=u.getCaptionsList().findIndex(d=>(d.language||"none")===t);u.setCurrentCaptions(h)}catch(h){console.error("changeCaptionLanguage",h)}}return M(_,b),M([i,s,g],y),(t,h)=>(m(),A(X,{to:`#${t.playerId} ${pe}`},[v("div",{class:"flex inset-0 absolute",onClick:h[0]||(h[0]=d=>a.value=!f(a))}),$(Q,{name:"player-options"},{default:N(()=>[f(a)?(m(),k("div",Je,[v("div",Ke,[(m(!0),k(U,null,q(f(w),d=>(m(),k("section",{key:d.lable,"aria-label":d.lable,class:"flex w-full flex-col gap-8 text-base"},[v("header",Ze,[v("h6",et,T(d.title),1),tt]),v("ul",lt,[(m(!0),k(U,null,q(d.options,I=>(m(),k("li",{key:I.title,class:z(["local-numbers bg-bg-11/50 hover:bg-bg-11 flex min-w-[9em] !cursor-pointer justify-center rounded-xl p-2 transition-colors",{"!bg-primary-500 !hover:bg-bg-primary-500 !cursor-default":d.selectedOption===I.value}]),onClick:B=>d.select(I.value)},T(I.title),11,at))),128))])],8,We))),128))])])):j("",!0)]),_:1})],8,["to"]))}});const nt=G(st,[["__scopeId","data-v-899bd3ec"]]),ot=o=>(W("data-v-0e5f549f"),o=o(),Z(),o),rt={key:0,title:"",class:"child-item auto-dir bg-bg-13/50 border-bg-1/10 absolute bottom-full -right-[10.8rem] z-20 mb-7 flex h-[18rem] w-[35rem] cursor-default rounded-xl border-2 p-4 backdrop-blur-lg"},it={class:"flex flex-col flex-nowrap gap-8 overflow-y-auto px-2 w-full"},ut=["aria-label"],ct={class:"flex w-full flex-row flex-nowrap items-center gap-2"},dt={class:"!text-fonts-200 whitespace-nowrap font-semibold"},pt=ot(()=>v("span",{class:"bg-bg-10 h-1 w-full rounded-full"},null,-1)),ft={class:"flex flex-row flex-wrap items-center gap-4 !text-xs"},yt=["onClick"],fe=".jw-settings-icon",vt=O({__name:"Player2Settings",props:{playerId:{}},emits:["reloadPlayer"],setup(o,{emit:c}){const{t:e}=ee(),r=V(()=>[{title:e("playerSettings.audioChannels"),label:"Audio channel",selectedOption:w.value,select:l=>w.value=l,options:[{title:e("playerSettings.auto"),value:"default"},{title:e("playerSettings.6Channels"),value:"6ch"},{title:e("playerSettings.2Channels"),value:"2ch"}]},{title:e("playerSettings.playbackSpeed"),label:"Playback speed",selectedOption:_.value,select:l=>_.value=l,options:[{title:"0.5",value:"0.5"},{title:e("playerSettings.normal"),value:"1"},{title:"1.5",value:"1.5"},{title:"2",value:"2"}]}]),w=C("preferredAudioChannel","default"),_=C("preferredPlaybackSpeed","1"),g=x(!1),s=document.querySelector(fe);se(s,()=>g.value=!1);const i=window.jwplayer("jwplayer-main");R(()=>{a()});function a(){try{i.setPlaybackRate(Number(_.value))}catch(l){console.error("updatePlaybackSpeed",l)}}return M(w,()=>setTimeout(()=>c("reloadPlayer"),100)),M(_,()=>a()),(l,u)=>(m(),A(X,{to:`#${l.playerId} ${fe}`},[v("div",{class:"flex inset-0 absolute",onClick:u[0]||(u[0]=y=>g.value=!f(g))}),$(Q,{name:"player-options"},{default:N(()=>[f(g)?(m(),k("div",rt,[v("div",it,[(m(!0),k(U,null,q(f(r),y=>(m(),k("section",{key:y.label,"aria-label":y.label,class:"flex w-full flex-col gap-8 text-base"},[v("header",ct,[v("h6",dt,T(y.title),1),pt]),v("ul",ft,[(m(!0),k(U,null,q(y.options,b=>(m(),k("li",{key:b.title,class:z(["local-numbers bg-bg-11/50 hover:bg-bg-11 flex min-w-[9em] !cursor-pointer justify-center rounded-xl p-2 transition-colors",{"!bg-primary-500 !hover:bg-bg-primary-500 !cursor-default":y.selectedOption===b.value}]),onClick:t=>y.select(b.value)},T(b.title),11,yt))),128))])],8,ut))),128))])])):j("",!0)]),_:1})],8,["to"]))}});const bt=G(vt,[["__scopeId","data-v-0e5f549f"]]),ne=o=>(W("data-v-9c452e8c"),o=o(),Z(),o),mt={class:"absolute bottom-32 right-4 flex flex-col gap-2 font-IRANSansX"},_t=ne(()=>v("span",{class:"shadow"},null,-1)),gt={class:"content"},ht=ne(()=>v("span",{class:"shadow"},null,-1)),wt={class:"content"},kt=ne(()=>v("span",{class:"shadow"},null,-1)),xt={class:"content"},St={class:"content"},Pt=O({__name:"Player2SideActions",props:{options:{},playerId:{}},emits:["play-next-episode"],setup(o,{emit:c}){const e=o,r=window.jwplayer("jwplayer-main"),w=V(()=>{if(e.options.intro_start)return y(e.options.intro_start)}),_=V(()=>{if(e.options.intro_end)return y(e.options.intro_end)}),g=V(()=>{if(e.options.previously_start)return y(e.options.previously_start)}),s=V(()=>{if(e.options.previously_end)return y(e.options.previously_end)}),i=V(()=>{if(e.options.end)return y(e.options.end)}),a=x({visible:!1,progress:0}),l=x({visible:!1,progress:0}),u=x({visible:!1,progress:0});R(()=>r.on("time",Ee(S=>b(Math.floor(S.currentTime)),1e3)));function y(S){const[E,F,D]=S.split(":");return parseInt(E)*3600+parseInt(F)*60+parseInt(D)}function b(S){typeof w.value=="number"&&typeof _.value=="number"&&(S>=w.value&&S<=_.value?(a.value.visible=!0,a.value.progress=(S-w.value)/(_.value-w.value)):a.value.visible=!1),typeof g.value=="number"&&typeof s.value=="number"&&(S>=g.value&&S<=s.value?(l.value.visible=!0,l.value.progress=(S-g.value)/(s.value-g.value)):l.value.visible=!1),typeof i.value=="number"&&!e.options.isLastEpisode&&(S>=i.value?h():u.value.visible=!1)}const t=x({token:e.options.token,cancelled:!1,busy:!1});async function h(){if(t.value.busy||t.value.cancelled)return;u.value.visible=!0,t.value.busy=!0;const S=()=>{t.value.cancelled=!0,u.value.progress=0,t.value.busy=!1};for(let E=0;E<50;E++){if(t.value.cancelled||(await K.core.delay(100),r.getState()==="paused"))return S();u.value.progress=E/50}if(t.value.cancelled)return S();await K.core.delay(1100),c("play-next-episode")}function d(){typeof _.value=="number"&&r.seek(_.value)}function I(){typeof s.value=="number"&&r.seek(s.value)}function B(){typeof i.value=="number"&&c("play-next-episode")}return(S,E)=>{const F=ye;return m(),A(X,{to:`#${S.playerId}`},[v("div",mt,[$(Ae,{name:"actions",appear:""},{default:N(()=>[f(a).visible?(m(),k("span",{key:"intro",class:"action",onClick:d},[v("span",{class:"bar",style:J(`transform: scaleX(${f(a).progress})`)},null,4),_t,v("div",gt,[$(F,{name:"ph:arrow-clockwise-bold"}),v("p",null,T(S.$t("skipIntro")),1)])])):j("",!0),f(l).visible?(m(),k("span",{key:"previous",class:"action",onClick:I},[v("span",{class:"bar",style:J(`transform: scaleX(${f(l).progress})`)},null,4),ht,v("div",wt,[$(F,{name:"ph:arrow-clockwise-bold"}),v("p",null,T(S.$t("skipPreviously")),1)])])):j("",!0),f(u).visible?(m(),k("span",{key:"next-episode",class:"action",onClick:B,onMouseenter:E[0]||(E[0]=D=>f(t).cancelled=!0)},[v("span",{class:z(["bar",{"!hidden":f(t).cancelled===!0}]),style:J(`transform: scaleX(${f(u).progress})`)},null,6),kt,v("div",xt,[$(F,{name:"ph:skip-forward-bold"}),v("p",St,T(S.$t("nextEpisode")),1)])],32)):j("",!0)]),_:1})])],8,["to"])}}});const jt=G(Pt,[["__scopeId","data-v-9c452e8c"]]),$t={class:"relative h-full flex items-center"},Ct={key:0,class:"auto-label flex px-2 py-[0.1rem] text-[10px] rounded-full bg-primary-500 absolute -top-[0.5rem] font-bold -right-[1rem]"},Tt={class:"font-semibold"},It={key:0,title:"",class:"child-item auto-dir bg-bg-13/50 border-bg-1/10 absolute bottom-full right-1/2 translate-x-1/2 z-[100] mb-7 flex min-h-[10em] w-[13em] cursor-default rounded-xl border-2 py-4 backdrop-blur-lg"},Et={class:"flex w-full flex-col flex-nowrap gap-8 overflow-y-auto"},At={class:"flex w-full flex-col gap-4 text-base"},Bt={class:"flex flex-col gap-2"},Ft=["onClick"],Dt={class:"relative"},le=".jw-quality-selector-icon",Lt=O({__name:"Player2Quality",props:{playerData:{},playerId:{}},emits:["reloadPlayer"],setup(o){const c=window.jwplayer("jwplayer-main"),e=C("preferredQuality","AUTO"),r=x([]),w=x(e.value!=="AUTO"?e.value:"720p");function _(a){if(s.value=!1,!c)return;const l=r.value[a];e.value=l.label,c.setCurrentQuality(a)}function g(a){r.value=a.map(u=>({label:u.label.includes("p")?u.label:"AUTO",bitrate:u.bitrate,width:u.width,height:u.height}));const l=r.value.findIndex(u=>u.label===e.value);_(l)}c.on("levels",a=>{g(a.levels)}),R(()=>{const a=c.getQualityLevels();a&&a.length&&g(a)}),c.on("visualQuality",a=>{if(!a.level)return;const l=r.value[a.level.index];w.value=l.label});const s=x(!1),i=document.querySelector(le);return se(i,()=>s.value=!1),(a,l)=>(m(),A(X,{to:`#${a.playerId} ${le}`},[v("div",{class:"flex inset-0 absolute z-10",onClick:l[0]||(l[0]=u=>s.value=!f(s))}),(m(),A(X,{to:le},[v("div",$t,[f(e)==="AUTO"?(m(),k("span",Ct,T(a.$t("auto")),1)):j("",!0),v("span",Tt,T(f(w)),1)])])),$(Q,{name:"player-options"},{default:N(()=>[f(s)?(m(),k("div",It,[v("div",Et,[v("section",At,[v("ul",Bt,[(m(!0),k(U,null,q(f(r),u=>(m(),k("li",{key:u.label,class:z(["hover:bg-bg-1/10 hover:!text-fonts-50 !text-fonts-200 relative flex w-full min-w-[9em] cursor-pointer items-center justify-center gap-2 p-3 transition-colors",{"!bg-bg-1/10 !hover:bg-bg-1/20 !text-fonts-50 !cursor-default":u.label===f(e)}]),onClick:y=>_(f(r).indexOf(u))},[v("span",{class:z(["bg-primary-500 shadow-primary-500 absolute left-2 top-1/2 h-1/2 w-[2px] -translate-y-1/2 rounded-full opacity-0 shadow-[0_0_8px_1px]",{"!opacity-100":u.label===f(e)}])},null,2),v("div",Dt,T(u.label.replace("AUTO",a.$t("auto"))),1)],10,Ft))),128))])])])])):j("",!0)]),_:1})],8,["to"]))}});const Vt=G(Lt,[["__scopeId","data-v-ee7e2125"]]),Nt=""+new URL("Settings.2d4e702a.svg",import.meta.url).href;function Ut({t:o}){return this.addButton(Nt,o("settings.settings"),()=>{},"jw-settings","clickable-btn jw-settings-icon")}function qt({t:o}){const c=()=>{};return this.addButton("",o("qualitySelector"),c,"jw-quality-selector","clickable-btn jw-quality-selector-icon")}const Ot=""+new URL("ClosedCaptioning.9039dab5.svg",import.meta.url).href;function Rt({t:o}){const c=()=>{};return this.addButton(Ot,o("subtitleSettings"),c,"jw-subtitles","clickable-btn jw-subtitles-icon")}const zt=""+new URL("Cards.1c7501fb.svg",import.meta.url).href;function Qt({t:o,playerData:c}){const e=()=>{this.pause(),this.getFullscreen()&&this.setFullscreen(!1),setTimeout(()=>{var r;return(r=document.querySelector(".selected-episode"))==null?void 0:r.scrollIntoView({behavior:"smooth",block:"center"})},100)};return this.addButton(zt,o("episodeSelector"),e,"jw-episode-selector",`clickable-btn jw-episode-selector-icon ${c.info.isSeries?"":"jw-hidden"}`)}const Mt=""+new URL("SkipForward.26508f6e.svg",import.meta.url).href;function Xt({t:o,$emit:c,playerData:e}){var g;const r=()=>c("playNextEpisode");this.addButton(Mt,o("nextEpisode"),r,"jw-skip-episode","jw-skip-episode-icon");const w=document.querySelector(".jw-skip-episode-icon");if(!w)return;w.style.display=e.options.isLastEpisode||!e.info.isSeries?"none":"inherit";const _=document.querySelector(".jw-icon-volume");(g=_==null?void 0:_.parentElement)==null||g.insertBefore(w,_==null?void 0:_.previousSibling)}const Gt=""+new URL("ArrowClockwise.985ddcef.svg",import.meta.url).href;function Ht({t:o}){var _,g;const c=()=>this.seek(this.getPosition()+10);this.addButton(Gt,o("forward"),c,"jw-forward","jw-forward-icon");const e=document.querySelector(".jw-icon-playback"),r=document.querySelector(".jw-skip-episode-icon"),w=document.querySelector(".jw-forward-icon");e&&r&&((_=e.parentNode)==null||_.insertBefore(e,r)),r&&w&&((g=r.parentNode)==null||g.insertBefore(w,r))}const Yt=[Qt,qt,Rt,Ut,Xt,Ht];function Jt(o){Yt.forEach(c=>c.bind(this)(o))}const Kt={class:"flex w-full h-full relative"},Wt={key:"ads-player",class:"absolute z-40 h-full w-full"},Zt=v("div",{id:"jwplayer-main",class:"h-full"},null,-1),tl=O({__name:"Player2Main",props:{playerData:{}},emits:["onVideoEnded","onPlay","onPause","onPlayerReady","reloadPlayer","playNextEpisode","onSeek","onProgress"],setup(o,{expose:c,emit:e}){const r=o,{t:w}=ee(),{removeFocus:_}=ve(),g=C("preferredAudioChannel","default"),s=C("preferredQuality","AUTO"),i=C("_nad",0);function a(){this.play();const n=document.querySelector(".jw-skip-episode-icon");n&&(n.style.display=r.playerData.options.isLastEpisode||!r.playerData.info.isSeries?"none":"inherit")}function l(n,p){const P={title:n.info.isSeries?n.info.title:n.info.displayName,description:n.info.isSeries?n.info.displayName:"",image:n.image.cover_webp||n.image.cover,sources:n.file.m3u8.map(L=>({file:L[g.value],label:L.label.replace("خودکار","AUTO").toUpperCase(),default:L.label.replace("خودکار","AUTO").toUpperCase()===s.value}))};if(p!=null&&p.episodeChanged)return this.load([{...P}]),e("onPlayerReady"),this.once("meta",()=>this.seek(p.position)),a.bind(this)();d.value=this.setup({...me,...P,intl:_e,autostart:!0}),this.once("meta",b.bind(this))}async function u(){await ae();const n=Jt.bind(this),p={$emit:e,playerData:r.playerData,t:w};n(p),_("jwplayer-main"),h.value=!0,e("onPlayerReady")}function y(){const n=r.playerData.ads;n&&i.value!==-1&&(i.value>new Date().getTime()||we.bind(this)(n))}function b(){r.playerData.info.time&&this.seek(r.playerData.info.time)}function t(n=0){l.bind(this)(r.playerData,{episodeChanged:!0,position:n})}const h=x(!1),d=x();R(async()=>{Y();const p=(await be())("jwplayer-main");l.bind(p)(r.playerData),p.on("ready",u.bind(p)),p.on("complete",()=>e("onVideoEnded")),p.on("play",()=>{y.bind(p)(),e("onPlay")}),p.on("pause",()=>e("onPause")),p.on("seek",P=>e("onSeek",P)),p.on("time",P=>e("onProgress",P)),p.on("fullscreen",P=>{var L;return!P.fullscreen&&((L=document.getElementById("main-scroller"))==null?void 0:L.scrollTo({top:0}))}),p.on("error",P=>{console.log("error",P),P.code===233001&&t.bind(p)(p.getPosition()),P.code===333001&&t.bind(p)(p.getPosition()),P.code>=333400&&P.code<=333599&&t.bind(p)(p.getPosition()),P.code>=233400&&P.code<=233599&&t.bind(p)(p.getPosition())})}),Be(()=>{d.value&&(d.value.stop(),d.value.remove())});const I=()=>{var n;return(n=d.value)==null?void 0:n.play()},B=()=>{var n;return(n=d.value)==null?void 0:n.pause()},S=n=>{var p;return(p=d.value)==null?void 0:p.seek(n)},E=n=>{var p;return(p=d.value)==null?void 0:p.setFullscreen(n)},F=()=>{var n;return(n=d.value)==null?void 0:n.getFullscreen()};c({play:I,pause:B,seek:S,isFullscreen:F,setFullscreen:E,updatePlayerData:l,playerInstance:d});const D=x(!1);M(D,async()=>{var p;if(D.value===!1)return;const n=((p=d.value)==null?void 0:p.getState())!=="playing";for(;D.value;)B(),F()&&E(!1),await K.core.delay(250);n||I()});const te=x(!1),H=x(),oe=x(),re=x(),ie=x(""),ue=x("#");function Y(n){n&&(i.value=new Date().getTime()+864e5),te.value=!1,D.value=!1}async function we(n){for(Y(),await ae(),D.value=!0,te.value=!0,ue.value=n.link,re.value=n.skipAfter,oe.value=n.title,ie.value=n.video;!document.getElementById("ad-player");)await K.core.delay(50);this.pause(),H.value=document.getElementById("ad-player"),H.value.src=n.video,H.value.play(),H.value.onended=()=>Y(!0)}return(n,p)=>{const P=qe,L=He,ke=nt,xe=bt,Se=jt,Pe=Vt;return m(),k("div",Kt,[$(Q,{name:"fade-preset"},{default:N(()=>[f(te)?(m(),k("div",Wt,[n.playerData.ads?(m(),A(P,{key:0,"ad-title":f(oe),video:f(ie),"callback-url":f(ue),skip:f(re),onOnVideoEnded:p[0]||(p[0]=ce=>Y(!0))},null,8,["ad-title","video","callback-url","skip"])):j("",!0)])):j("",!0)]),_:1}),Zt,f(h)?(m(),k("span",{key:n.playerData.info.file_id},[$(L,{"player-data":n.playerData,"player-id":"jwplayer-main"},null,8,["player-data"]),$(ke,{"player-data":n.playerData,"player-id":"jwplayer-main"},null,8,["player-data"]),$(xe,{"player-id":"jwplayer-main",onReloadPlayer:p[1]||(p[1]=ce=>{var de;return t.bind(f(d))((de=f(d))==null?void 0:de.getPosition())})}),$(Se,{options:n.playerData.options,"player-id":"jwplayer-main",onPlayNextEpisode:p[2]||(p[2]=ce=>e("playNextEpisode"))},null,8,["options"]),$(Pe,{"player-data":n.playerData,"player-id":"jwplayer-main"},null,8,["player-data"])])):j("",!0)])}}});export{tl as _};
