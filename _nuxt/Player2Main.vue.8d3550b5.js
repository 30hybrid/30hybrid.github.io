import{at as Pe,d as R,n as x,o as q,au as $e,g as b,h as w,k as A,y as $,z,j as v,i as j,w as N,q as f,C as J,T as Q,B as T,P as se,_ as je,D as fe,G as W,H as Z,I as G,ae as Ce,ai as C,b as ee,v as M,F as U,r as O,al as X,m as Te,c as V,ak as ne,am as Ie,an as Ee,p as K,f as Ae}from"./entry.cf656d67.js";function ye(){return{removeFocus:c=>{const t=document.getElementById(c);if(!t)return console.error(`Element with id ${c} not found`);t.setAttribute("tabindex","-1"),t.querySelectorAll("*").forEach(k=>k.setAttribute("tabindex","-1"))}}}async function ve(){console.log("30nama Player v6.0.0"),await Pe(()=>import("./jwplayer.8.27.1.22b8f9e1.js"),[],import.meta.url);const r=window.jwplayer;return window.jwplayer.key="Pha4C3UB2JzMWjqT8w1F793Ujv6hTVbk+3KoY/G7Gn4=",r}const be={controls:!0,fullscreen:"true",displaytitle:!0,renderCaptionsNatively:!1,autostart:!1,width:"100%",horizontalVolumeSlider:!0,aboutlink:"https://30nama.com",abouttext:"30nama",safarihlsjs:!0,pipIcon:"disabled",skin:{name:"30nama"}},me={fa:{airplay:"ایرپلی",audioTracks:"کانال های صوتی",auto:"خودکار",buffer:"بافر",captionsStyles:"سبک‌های زیرنویس",cast:"پخش",cc:"زیرنویس",close:"بستن",displayHeading:"نمایش سربرگ",exitFullscreen:"خروج از حالت تمام صفحه",fullscreen:"تمام صفحه",hd:"HD",liveBroadcast:"پخش زنده",logo:"لوگو",mute:"سکوت",next:"بعدی",nextUp:"قسمت بعد",notLive:"زنده نیست",off:"خاموش",pause:"توقف",pipIcon:"تصویر در تصویر",play:"پخش",playback:"پخش مجدد",playbackRates:"سرعت پخش",player:"پخش کننده",poweredBy:"قدرت گرفته از",prev:"قبلی",related:"مرتبط",replay:"پخش مجدد",rewind:"بازگرداندن",settings:"تنظیمات",slider:"اسلایدر",stop:"توقف",unmute:"باز کردن صدا",videoInfo:"اطلاعات ویدئو",volume:"صدا",volumeSlider:"اسلایدر صدا",advertising:{admessage:"پیام تبلیغاتی",cuetext:"متن راهنما",podmessage:"پیام پادکست",skipmessage:"پیام رد کردن",skiptext:"رد کردن"},shortcuts:{captionsToggle:"تغییر زیرنویس",decreaseVolume:"کاهش صدا",fullscreenToggle:"تغییر حالت تمام صفحه",increaseVolume:"افزایش صدا",keyboardShortcuts:"میانبرهای صفحه کلید",playPause:"پخش / توقف",seekBackward:"پرش به عقب",seekForward:"پرش به جلو",seekPercent:"درصد زمان ویدیو",spacebar:"space",volumeToggle:"تغییر صدا"},sharing:{heading:"اشتراک گذاری",link:"لینک"},errors:{badConnection:"اتصال بد",cantLoadPlayer:"بارگذاری پخش کننده ممکن نیست",cantPlayInBrowser:"پخش در این مرورگر ممکن نیست",cantPlayVideo:"پخش ویدئو ممکن نیست",errorCode:"کد خطا",liveStreamDown:"پخش زنده خاموش است",protectedContent:"محتوای محافظت شده",technicalError:"خطای فنی"}}},_e=r=>(W("data-v-1dd8d818"),r=r(),Z(),r),Fe={class:"relative h-full w-full"},Be=_e(()=>f("div",{id:"jwplayer-main-ads",class:"h-full w-full jwplayer-main-ads"},null,-1)),De=_e(()=>f("span",{class:"shadow"},null,-1)),Le={key:0,class:"content"},Ve={key:0,class:"local-numbers w-4 text-left"},Ne=R({__name:"Player2Ads",props:{adTitle:{},skip:{},video:{},callbackUrl:{}},emits:["onVideoEnded","onPlay","onPause","onPlayerReady","reloadPlayer","playNextEpisode","onSeek","onProgress"],setup(r,{emit:c}){const t=r,{removeFocus:m}=ye();function k(){l.value=this.setup({...be,title:t.adTitle,sources:[{file:t.video,label:"AUTO"}],intl:me,autostart:!0})}async function g(){await se(),m("jwplayer-main-ads"),s.value=!0,c("onPlayerReady")}function h(){k.bind(this)()}const s=x(!1),i=x(0),a=x(!1),l=x();q(async()=>{const y=(await ve())("jwplayer-main-ads");k.bind(y)(),y.on("ready",g.bind(y)),y.on("complete",()=>c("onVideoEnded")),y.on("play",()=>c("onPlay")),y.on("pause",()=>c("onPause")),y.on("seek",e=>{var _;a.value=Math.round(e.offset)!==Math.round(i.value),a.value?(_=l.value)==null||_.seek(i.value):a.value=!1,c("onSeek",e)}),y.on("time",e=>{e.currentTime&&t.skip&&(u.value=Math.floor(e.currentTime/t.skip*100)),a.value||(i.value=e.currentTime),c("onProgress",e)}),y.on("fullscreen",e=>{var _;return!e.fullscreen&&((_=document.getElementById("main-scroller"))==null?void 0:_.scrollTo({top:0}))}),y.on("error",e=>{console.log("error",e),e.code===233001&&h.bind(y)(),e.code===333001&&h.bind(y)(),e.code>=333400&&e.code<=333599&&h.bind(y)(),e.code>=233400&&e.code<=233599&&h.bind(y)()})}),$e(()=>{l.value&&(l.value.stop(),l.value.remove())});const u=x(0);return(d,y)=>{const e=je,_=fe;return b(),w("div",Fe,[Be,d.callbackUrl?(b(),A(e,{key:0,class:"absolute inset-0 top-0 h-2/3 cursor-pointer",to:d.callbackUrl,external:"",target:"_blank"},null,8,["to"])):$("",!0),d.skip?(b(),w("div",{key:1,class:z(["absolute bottom-32 z-50 mx-8",{"pointer-events-none opacity-50":v(u)<100}])},[j(Q,{name:"actions",appear:""},{default:N(()=>[d.skip?(b(),w("span",{key:"intro",class:"action",onClick:y[0]||(y[0]=p=>c("onVideoEnded"))},[f("span",{class:"bar",style:J(`transform: scaleX(${v(u)/100})`)},null,4),De,v(l)?(b(),w("div",Le,[j(Q,{name:"fade-preset",mode:"out-in"},{default:N(()=>{var p;return[v(u)<100?(b(),w("p",Ve,T(d.skip-Math.floor(((p=v(l))==null?void 0:p.getPosition())||0)),1)):(b(),A(_,{key:"icon",name:"ph:skip-forward-bold"}))]}),_:1}),f("p",null,T(d.$t("skip")),1)])):$("",!0)])):$("",!0)]),_:1})],2)):$("",!0)])}}});const Ue=G(Ne,[["__scopeId","data-v-1dd8d818"]]);var ge={exports:{}};(function(r,c){var t=function(){var m={};m.fromVtt=function(s,i,a){var l=!!a;s=s.replace(/\r/g,"");var u=/(\d+)?\n?(\d{2}:\d{2}:\d{2}[,.]\d{3}) --> (\d{2}:\d{2}:\d{2}[,.]\d{3}).*\n/g;s=s.split(u),s.shift();for(var d=[],y=0;y<s.length;y+=4){var e=s[y+3];l&&(e=e.split(`
`),e.shift(),e=e.join(`
`)),e.trim().length!==0&&d.push({id:s[y]?+s[y].trim():d.length+1,startTime:k(s[y+1].trim(),i),endTime:k(s[y+2].trim(),i),text:e.trim()})}return d},m.toVtt=function(s){if(!s instanceof Array)return"";for(var i="",a=0;a<s.length;a++){var l=s[a];!isNaN(l.startTime)&&!isNaN(l.endTime)&&(l.startTime=h(parseInt(l.startTime,10)),l.endTime=h(parseInt(l.endTime,10))),i+=l.id+`\r
`,i+=l.startTime+" --> "+l.endTime+`\r
`,i+=l.text.replace(`
`,`\r
`)+`\r
\r
`}return i};var k=function(s,i){return i==="ms"?g(s):i==="s"?g(s)/1e3:s},g=function(s){var i=/(\d+):(\d{2}):(\d{2})[,.](\d{3})/,a=i.exec(s);if(a===null)return 0;for(var l=1;l<5;l++)a[l]=parseInt(a[l],10),isNaN(a[l])&&(a[l]=0);return a[1]*36e5+a[2]*6e4+a[3]*1e3+a[4]},h=function(s){var i=[36e5,6e4,1e3],a=[];for(var l in i){var u=(s/i[l]>>0).toString();u.length<2&&(u="0"+u),s%=i[l],a.push(u)}var d=s.toString();if(d.length<3)for(l=0;l<=3-d.length;l++)d="0"+d;return a.join(":")+","+d};return m}();r.exports=t})(ge);var Oe=ge.exports;const Re=Ce(Oe),qe={class:"jw-text-track-container jw-reset !absolute !m-[1.5%]"},ze={key:0,class:"jw-text-track-display fa"},Qe={class:"flex flex-col items-center gap-1"},Me={key:1,class:"jw-text-track-display en"},Xe={class:"flex flex-col items-center gap-1"},Ge=R({__name:"Player2Subtitles",props:{playerData:{},playerId:{}},setup(r){const c=r,t=C("preferredLanguage","fa"),m=C("preferredSize","0.75"),k=C("preferredColor","#FFF"),g=C("preferredBackground","acrylic"),{t:h}=ee(),s=window.jwplayer("jwplayer-main"),i=[];q(()=>{const e=c.playerData.subtitle;e&&(e.en&&i.push({file:e.en,label:h("subtitle.english"),kind:"captions",language:"en",default:t.value==="en"}),e.fa&&i.push({file:e.fa,label:h("subtitle.persian"),kind:"captions",language:"fa",default:t.value==="fa"}),u())});const a=x({fa:[],en:[]}),l=x(s.getPosition()*1e3||0);async function u(){for(const e of i){if(!e.language)continue;const _=await $fetch(e.file),p=Re.fromVtt(_,"ms");a.value[e.language]=p}y.value=new Date().getTime()}s.on("time",e=>l.value=Math.round(e.currentTime*1e3));function d(e){const _=e.find(p=>p.startTime<=l.value&&p.endTime>=l.value);return _!=null&&_.text.includes(`
`)?_.text.split(`
`):[_==null?void 0:_.text]}const y=x(new Date().getTime());return M([g,k,m,t],()=>y.value=new Date().getTime()),(e,_)=>(b(),A(X,{key:v(y),to:`#${e.playerId} .jw-captions`},[f("div",qe,[v(t)==="fa"||v(t)==="fa+en"?(b(),w("div",ze,[f("div",Qe,[(b(!0),w(U,null,O(d(v(a).fa),p=>(b(),w("pre",{key:p,class:"font-Main jw-text-track-cue empty:invisible"},T(p),1))),128))])])):$("",!0),v(t)==="en"||v(t)==="fa+en"?(b(),w("div",Me,[f("div",Xe,[(b(!0),w(U,null,O(d(v(a).en),p=>(b(),w("pre",{key:p,class:"font-Main jw-text-track-cue empty:invisible"},T(p),1))),128))])])):$("",!0)])],8,["to"]))}}),He=r=>(W("data-v-899bd3ec"),r=r(),Z(),r),Ye={key:0,title:"",class:"child-item auto-dir bg-bg-13/50 border-bg-1/10 absolute bottom-full -right-[8em] z-20 mb-7 flex h-[18rem] w-[35rem] cursor-default rounded-xl border-2 p-4 backdrop-blur-lg"},Je={class:"flex flex-col flex-nowrap gap-8 overflow-y-auto px-2 w-full"},Ke=["aria-label"],We={class:"flex w-full flex-row flex-nowrap items-center gap-2"},Ze={class:"!text-fonts-200 whitespace-nowrap font-semibold"},et=He(()=>f("span",{class:"bg-bg-10 h-1 w-full rounded-full"},null,-1)),tt={class:"flex flex-row flex-wrap items-center gap-4 !text-xs"},lt=["onClick"],de=".jw-subtitles-icon",at=R({__name:"Player2SubtitlesSettings",props:{playerData:{},playerId:{}},setup(r){const c=r,{t}=ee(),{disableBackdrop:m}=Te(),k=V(()=>[{title:t("subtitle.subtitle"),lable:"subtitle",selectedOption:g.value,select:e=>g.value=e,options:[{title:t("subtitle.persian"),value:"fa"},{title:t("subtitle.english"),value:"en"},{title:t("subtitle.persianAndEnglish"),value:"fa+en"},{title:t("subtitle.withoutSubtitle"),value:"none"}].filter(e=>{var _,p,I,F;return e.value==="fa+en"?((_=c.playerData.subtitle)==null?void 0:_.fa)&&((p=c.playerData.subtitle)==null?void 0:p.en):e.value==="fa"?(I=c.playerData.subtitle)==null?void 0:I.fa:e.value==="en"?(F=c.playerData.subtitle)==null?void 0:F.en:!0})},{title:t("subtitle.subtitleSize"),lable:"subtitle size",selectedOption:h.value,select:e=>h.value=e,options:[{title:t("subtitle.small"),value:"0.5"},{title:t("subtitle.medium"),value:"0.75"},{title:t("subtitle.huge"),value:"1.25"},{title:t("subtitle.veryHuge"),value:"1.50"}]},{title:t("subtitle.subtitleColor"),lable:"subtitle text color",selectedOption:s.value,select:e=>s.value=e,options:[{title:t("subtitle.yellow"),value:"#FF0"},{title:t("subtitle.white"),value:"#FFF"},{title:t("subtitle.cyan"),value:"#0FF"},{title:t("subtitle.purple"),value:"#F0F"}]},{title:t("subtitle.subtitleBackground"),lable:"subtitle background color",selectedOption:i.value,select:e=>i.value=e,options:[{title:t("subtitle.transparent"),value:"0"},...m.value?[]:[{title:t("subtitle.acrylic"),value:"acrylic"}],{title:t("subtitle.dimedBlack"),value:"0.5"},{title:t("subtitle.black"),value:"1"}]}]),g=C("preferredLanguage","fa"),h=C("preferredSize","0.75"),s=C("preferredColor","#FFF"),i=C("preferredBackground","acrylic"),a=x(!1),l=document.querySelector(de);ne(l,()=>a.value=!1);const u=window.jwplayer("jwplayer-main");q(()=>{d()});function d(){const e=document.querySelector(".jw-captions");i.value==="acrylic"?e==null||e.classList.add("acrylic"):e==null||e.classList.remove("acrylic"),i.value==="acrylic"&&m.value&&(console.log("hello?"),e==null||e.classList.remove("acrylic"),i.value="0");try{u.setCaptions({color:s.value,fontSize:20*Number(h.value),backgroundOpacity:Number(i.value)*100})}catch(_){console.error("updateCaptionStyle",_)}}function y(e){try{const _=u.getCaptionsList().findIndex(p=>(p.language||"none")===e);u.setCurrentCaptions(_)}catch(_){console.error("changeCaptionLanguage",_)}}return M(g,y),M([i,s,h],d),(e,_)=>(b(),A(X,{to:`#${e.playerId} ${de}`},[f("div",{class:"flex inset-0 absolute",onClick:_[0]||(_[0]=p=>a.value=!v(a))}),j(Q,{name:"player-options"},{default:N(()=>[v(a)?(b(),w("div",Ye,[f("div",Je,[(b(!0),w(U,null,O(v(k),p=>(b(),w("section",{key:p.lable,"aria-label":p.lable,class:"flex w-full flex-col gap-8 text-base"},[f("header",We,[f("h6",Ze,T(p.title),1),et]),f("ul",tt,[(b(!0),w(U,null,O(p.options,I=>(b(),w("li",{key:I.title,class:z(["local-numbers bg-bg-11/50 hover:bg-bg-11 flex min-w-[9em] !cursor-pointer justify-center rounded-xl p-2 transition-colors",{"!bg-primary-500 !hover:bg-bg-primary-500 !cursor-default":p.selectedOption===I.value}]),onClick:F=>p.select(I.value)},T(I.title),11,lt))),128))])],8,Ke))),128))])])):$("",!0)]),_:1})],8,["to"]))}});const st=G(at,[["__scopeId","data-v-899bd3ec"]]),nt=r=>(W("data-v-0e5f549f"),r=r(),Z(),r),ot={key:0,title:"",class:"child-item auto-dir bg-bg-13/50 border-bg-1/10 absolute bottom-full -right-[10.8rem] z-20 mb-7 flex h-[18rem] w-[35rem] cursor-default rounded-xl border-2 p-4 backdrop-blur-lg"},rt={class:"flex flex-col flex-nowrap gap-8 overflow-y-auto px-2 w-full"},it=["aria-label"],ut={class:"flex w-full flex-row flex-nowrap items-center gap-2"},ct={class:"!text-fonts-200 whitespace-nowrap font-semibold"},dt=nt(()=>f("span",{class:"bg-bg-10 h-1 w-full rounded-full"},null,-1)),pt={class:"flex flex-row flex-wrap items-center gap-4 !text-xs"},ft=["onClick"],pe=".jw-settings-icon",yt=R({__name:"Player2Settings",props:{playerId:{}},emits:["reloadPlayer"],setup(r,{emit:c}){const{t}=ee(),m=V(()=>[{title:t("playerSettings.audioChannels"),label:"Audio channel",selectedOption:k.value,select:l=>k.value=l,options:[{title:t("playerSettings.auto"),value:"default"},{title:t("playerSettings.6Channels"),value:"6ch"},{title:t("playerSettings.2Channels"),value:"2ch"}]},{title:t("playerSettings.playbackSpeed"),label:"Playback speed",selectedOption:g.value,select:l=>g.value=l,options:[{title:"0.5",value:"0.5"},{title:t("playerSettings.normal"),value:"1"},{title:"1.5",value:"1.5"},{title:"2",value:"2"}]}]),k=C("preferredAudioChannel","default"),g=C("preferredPlaybackSpeed","1"),h=x(!1),s=document.querySelector(pe);ne(s,()=>h.value=!1);const i=window.jwplayer("jwplayer-main");q(()=>{a()});function a(){try{i.setPlaybackRate(Number(g.value))}catch(l){console.error("updatePlaybackSpeed",l)}}return M(k,()=>setTimeout(()=>c("reloadPlayer"),100)),M(g,()=>a()),(l,u)=>(b(),A(X,{to:`#${l.playerId} ${pe}`},[f("div",{class:"flex inset-0 absolute",onClick:u[0]||(u[0]=d=>h.value=!v(h))}),j(Q,{name:"player-options"},{default:N(()=>[v(h)?(b(),w("div",ot,[f("div",rt,[(b(!0),w(U,null,O(v(m),d=>(b(),w("section",{key:d.label,"aria-label":d.label,class:"flex w-full flex-col gap-8 text-base"},[f("header",ut,[f("h6",ct,T(d.title),1),dt]),f("ul",pt,[(b(!0),w(U,null,O(d.options,y=>(b(),w("li",{key:y.title,class:z(["local-numbers bg-bg-11/50 hover:bg-bg-11 flex min-w-[9em] !cursor-pointer justify-center rounded-xl p-2 transition-colors",{"!bg-primary-500 !hover:bg-bg-primary-500 !cursor-default":d.selectedOption===y.value}]),onClick:e=>d.select(y.value)},T(y.title),11,ft))),128))])],8,it))),128))])])):$("",!0)]),_:1})],8,["to"]))}});const vt=G(yt,[["__scopeId","data-v-0e5f549f"]]),oe=r=>(W("data-v-9c452e8c"),r=r(),Z(),r),bt={class:"absolute bottom-32 right-4 flex flex-col gap-2 font-IRANSansX"},mt=oe(()=>f("span",{class:"shadow"},null,-1)),_t={class:"content"},gt=oe(()=>f("span",{class:"shadow"},null,-1)),ht={class:"content"},wt=oe(()=>f("span",{class:"shadow"},null,-1)),kt={class:"content"},xt={class:"content"},St=R({__name:"Player2SideActions",props:{options:{},playerId:{}},emits:["play-next-episode"],setup(r,{emit:c}){const t=r,m=window.jwplayer("jwplayer-main"),k=V(()=>{if(t.options.intro_start)return d(t.options.intro_start)}),g=V(()=>{if(t.options.intro_end)return d(t.options.intro_end)}),h=V(()=>{if(t.options.previously_start)return d(t.options.previously_start)}),s=V(()=>{if(t.options.previously_end)return d(t.options.previously_end)}),i=V(()=>{if(t.options.end)return d(t.options.end)}),a=x({visible:!1,progress:0}),l=x({visible:!1,progress:0}),u=x({visible:!1,progress:0});q(()=>m.on("time",Ie(S=>y(Math.floor(S.currentTime)),1e3)));function d(S){const[E,B,D]=S.split(":");return parseInt(E)*3600+parseInt(B)*60+parseInt(D)}function y(S){typeof k.value=="number"&&typeof g.value=="number"&&(S>=k.value&&S<=g.value?(a.value.visible=!0,a.value.progress=(S-k.value)/(g.value-k.value)):a.value.visible=!1),typeof h.value=="number"&&typeof s.value=="number"&&(S>=h.value&&S<=s.value?(l.value.visible=!0,l.value.progress=(S-h.value)/(s.value-h.value)):l.value.visible=!1),typeof i.value=="number"&&!t.options.isLastEpisode&&(S>=i.value?_():u.value.visible=!1)}const e=x({token:t.options.token,cancelled:!1,busy:!1});async function _(){if(e.value.busy||e.value.cancelled)return;u.value.visible=!0,e.value.busy=!0;const S=()=>{e.value.cancelled=!0,u.value.progress=0,e.value.busy=!1};for(let E=0;E<50;E++){if(e.value.cancelled||(await K.core.delay(100),m.getState()==="paused"))return S();u.value.progress=E/50}if(e.value.cancelled)return S();await K.core.delay(1100),c("play-next-episode")}function p(){typeof g.value=="number"&&m.seek(g.value)}function I(){typeof s.value=="number"&&m.seek(s.value)}function F(){typeof i.value=="number"&&c("play-next-episode")}return(S,E)=>{const B=fe;return b(),A(X,{to:`#${S.playerId}`},[f("div",bt,[j(Ee,{name:"actions",appear:""},{default:N(()=>[v(a).visible?(b(),w("span",{key:"intro",class:"action",onClick:p},[f("span",{class:"bar",style:J(`transform: scaleX(${v(a).progress})`)},null,4),mt,f("div",_t,[j(B,{name:"ph:arrow-clockwise-bold"}),f("p",null,T(S.$t("skipIntro")),1)])])):$("",!0),v(l).visible?(b(),w("span",{key:"previous",class:"action",onClick:I},[f("span",{class:"bar",style:J(`transform: scaleX(${v(l).progress})`)},null,4),gt,f("div",ht,[j(B,{name:"ph:arrow-clockwise-bold"}),f("p",null,T(S.$t("skipPreviously")),1)])])):$("",!0),v(u).visible?(b(),w("span",{key:"next-episode",class:"action",onClick:F,onMouseenter:E[0]||(E[0]=D=>v(e).cancelled=!0)},[f("span",{class:z(["bar",{"!hidden":v(e).cancelled===!0}]),style:J(`transform: scaleX(${v(u).progress})`)},null,6),wt,f("div",kt,[j(B,{name:"ph:skip-forward-bold"}),f("p",xt,T(S.$t("nextEpisode")),1)])],32)):$("",!0)]),_:1})])],8,["to"])}}});const Pt=G(St,[["__scopeId","data-v-9c452e8c"]]),$t={class:"relative h-full flex items-center"},jt={key:0,class:"auto-label flex px-2 py-[0.1rem] text-[10px] rounded-full bg-primary-500 absolute -top-[0.5rem] font-bold -right-[1rem]"},Ct={class:"font-semibold"},Tt={key:0,title:"",class:"child-item auto-dir bg-bg-13/50 border-bg-1/10 absolute bottom-full right-1/2 translate-x-1/2 z-[100] mb-7 flex min-h-[10em] w-[13em] cursor-default rounded-xl border-2 py-4 backdrop-blur-lg"},It={class:"flex w-full flex-col flex-nowrap gap-8 overflow-y-auto"},Et={class:"flex w-full flex-col gap-4 text-base"},At={class:"flex flex-col gap-2"},Ft=["onClick"],Bt={class:"relative"},ae=".jw-quality-selector-icon",Dt=R({__name:"Player2Quality",props:{playerData:{},playerId:{}},emits:["reloadPlayer"],setup(r){const c=window.jwplayer("jwplayer-main"),t=C("preferredQuality","AUTO"),m=x([]),k=x(t.value!=="AUTO"?t.value:"720p");function g(a){if(s.value=!1,!c)return;const l=m.value[a];t.value=l.label,c.setCurrentQuality(a)}function h(a){m.value=a.map(u=>({label:u.label.includes("p")?u.label:"AUTO",bitrate:u.bitrate,width:u.width,height:u.height}));const l=m.value.findIndex(u=>u.label===t.value);g(l)}c.on("levels",a=>{h(a.levels)}),q(()=>{const a=c.getQualityLevels();a&&a.length&&h(a)}),c.on("visualQuality",a=>{if(!a.level)return;const l=m.value[a.level.index];k.value=l.label});const s=x(!1),i=document.querySelector(ae);return ne(i,()=>s.value=!1),(a,l)=>(b(),A(X,{to:`#${a.playerId} ${ae}`},[f("div",{class:"flex inset-0 absolute z-10",onClick:l[0]||(l[0]=u=>s.value=!v(s))}),(b(),A(X,{to:ae},[f("div",$t,[v(t)==="AUTO"?(b(),w("span",jt,T(a.$t("auto")),1)):$("",!0),f("span",Ct,T(v(k)),1)])])),j(Q,{name:"player-options"},{default:N(()=>[v(s)?(b(),w("div",Tt,[f("div",It,[f("section",Et,[f("ul",At,[(b(!0),w(U,null,O(v(m),u=>(b(),w("li",{key:u.label,class:z(["hover:bg-bg-1/10 hover:!text-fonts-50 !text-fonts-200 relative flex w-full min-w-[9em] cursor-pointer items-center justify-center gap-2 p-3 transition-colors",{"!bg-bg-1/10 !hover:bg-bg-1/20 !text-fonts-50 !cursor-default":u.label===v(t)}]),onClick:d=>g(v(m).indexOf(u))},[f("span",{class:z(["bg-primary-500 shadow-primary-500 absolute left-2 top-1/2 h-1/2 w-[2px] -translate-y-1/2 rounded-full opacity-0 shadow-[0_0_8px_1px]",{"!opacity-100":u.label===v(t)}])},null,2),f("div",Bt,T(u.label.replace("AUTO",a.$t("auto"))),1)],10,Ft))),128))])])])])):$("",!0)]),_:1})],8,["to"]))}});const Lt=G(Dt,[["__scopeId","data-v-ee7e2125"]]),Vt=""+new URL("Settings.2d4e702a.svg",import.meta.url).href;function Nt({t:r}){return this.addButton(Vt,r("settings.settings"),()=>{},"jw-settings","clickable-btn jw-settings-icon")}function Ut({t:r}){const c=()=>{};return this.addButton("",r("qualitySelector"),c,"jw-quality-selector","clickable-btn jw-quality-selector-icon")}const Ot=""+new URL("ClosedCaptioning.9039dab5.svg",import.meta.url).href;function Rt({t:r}){const c=()=>{};return this.addButton(Ot,r("subtitleSettings"),c,"jw-subtitles","clickable-btn jw-subtitles-icon")}const qt=""+new URL("Cards.1c7501fb.svg",import.meta.url).href;function zt({t:r,playerData:c}){const t=()=>{this.pause(),this.getFullscreen()&&this.setFullscreen(!1),setTimeout(()=>{var m;return(m=document.querySelector(".selected-episode"))==null?void 0:m.scrollIntoView({behavior:"smooth",block:"center"})},100)};return this.addButton(qt,r("episodeSelector"),t,"jw-episode-selector",`clickable-btn jw-episode-selector-icon ${c.info.isSeries?"":"jw-hidden"}`)}const Qt=""+new URL("SkipForward.26508f6e.svg",import.meta.url).href;function Mt({t:r,$emit:c,playerData:t}){var h;const m=()=>c("playNextEpisode");this.addButton(Qt,r("nextEpisode"),m,"jw-skip-episode","jw-skip-episode-icon");const k=document.querySelector(".jw-skip-episode-icon");if(!k)return;k.style.display=t.options.isLastEpisode?"none":"inherit";const g=document.querySelector(".jw-icon-volume");(h=g==null?void 0:g.parentElement)==null||h.insertBefore(k,g==null?void 0:g.previousSibling)}const Xt=[zt,Ut,Rt,Nt,Mt];function Gt(r){Xt.forEach(c=>c.bind(this)(r))}const Ht={class:"flex w-full h-full relative"},Yt={key:"ads-player",class:"absolute z-40 h-full w-full"},Jt=f("div",{id:"jwplayer-main",class:"h-full"},null,-1),Wt=R({__name:"Player2Main",props:{playerData:{}},emits:["onVideoEnded","onPlay","onPause","onPlayerReady","reloadPlayer","playNextEpisode","onSeek","onProgress"],setup(r,{expose:c,emit:t}){const m=r,{t:k}=ee(),{removeFocus:g}=ye(),h=C("preferredAudioChannel","default"),s=C("preferredQuality","AUTO"),i=C("_nad",0);function a(){this.play();const n=document.querySelector(".jw-skip-episode-icon");n&&(n.style.display=m.playerData.options.isLastEpisode?"none":"inherit")}function l(n,o){const P={title:n.info.isSeries?n.info.title:n.info.displayName,description:n.info.isSeries?n.info.displayName:"",image:n.image.cover_webp||n.image.cover,sources:n.file.m3u8.map(L=>({file:L[h.value],label:L.label.replace("خودکار","AUTO").toUpperCase(),default:L.label.replace("خودکار","AUTO").toUpperCase()===s.value}))};if(o!=null&&o.episodeChanged)return this.load([{...P}]),t("onPlayerReady"),this.once("meta",()=>this.seek(o.position)),a.bind(this)();p.value=this.setup({...be,...P,intl:me,autostart:!0}),this.once("meta",y.bind(this))}async function u(){await se();const n=Gt.bind(this),o={$emit:t,playerData:m.playerData,t:k};n(o),g("jwplayer-main"),_.value=!0,t("onPlayerReady")}function d(){const n=m.playerData.ads;n&&i.value!==-1&&(i.value>new Date().getTime()||he.bind(this)(n))}function y(){m.playerData.info.time&&this.seek(m.playerData.info.time)}function e(n=0){l.bind(this)(m.playerData,{episodeChanged:!0,position:n})}const _=x(!1),p=x();q(async()=>{Y();const o=(await ve())("jwplayer-main");l.bind(o)(m.playerData),o.on("ready",u.bind(o)),o.on("complete",()=>t("onVideoEnded")),o.on("play",()=>{d.bind(o)(),t("onPlay")}),o.on("pause",()=>t("onPause")),o.on("seek",P=>t("onSeek",P)),o.on("time",P=>t("onProgress",P)),o.on("fullscreen",P=>{var L;return!P.fullscreen&&((L=document.getElementById("main-scroller"))==null?void 0:L.scrollTo({top:0}))}),o.on("error",P=>{console.log("error",P),P.code===233001&&e.bind(o)(o.getPosition()),P.code===333001&&e.bind(o)(o.getPosition()),P.code>=333400&&P.code<=333599&&e.bind(o)(o.getPosition()),P.code>=233400&&P.code<=233599&&e.bind(o)(o.getPosition())})}),Ae(()=>{p.value&&(p.value.stop(),p.value.remove())});const I=()=>{var n;return(n=p.value)==null?void 0:n.play()},F=()=>{var n;return(n=p.value)==null?void 0:n.pause()},S=n=>{var o;return(o=p.value)==null?void 0:o.seek(n)},E=n=>{var o;return(o=p.value)==null?void 0:o.setFullscreen(n)},B=()=>{var n;return(n=p.value)==null?void 0:n.getFullscreen()};c({play:I,pause:F,seek:S,isFullscreen:B,setFullscreen:E,updatePlayerData:l,playerInstance:p});const D=x(!1);M(D,async()=>{var o;if(D.value===!1)return;const n=((o=p.value)==null?void 0:o.getState())!=="playing";for(;D.value;)F(),B()&&E(!1),await K.core.delay(250);n||I()});const te=x(!1),H=x(),re=x(),ie=x(),ue=x(""),ce=x("#");function Y(n){n&&(i.value=new Date().getTime()+864e5),te.value=!1,D.value=!1}async function he(n){for(Y(),await se(),D.value=!0,te.value=!0,ce.value=n.link,ie.value=n.skipAfter,re.value=n.title,ue.value=n.video;!document.getElementById("ad-player");)await K.core.delay(50);this.pause(),H.value=document.getElementById("ad-player"),H.value.src=n.video,H.value.play(),H.value.onended=()=>Y(!0)}return(n,o)=>{const P=Ue,L=Ge,we=st,ke=vt,xe=Pt,Se=Lt;return b(),w("div",Ht,[j(Q,{name:"fade-preset"},{default:N(()=>[v(te)?(b(),w("div",Yt,[n.playerData.ads?(b(),A(P,{key:0,"ad-title":v(re),video:v(ue),"callback-url":v(ce),skip:v(ie),onOnVideoEnded:o[0]||(o[0]=le=>Y(!0))},null,8,["ad-title","video","callback-url","skip"])):$("",!0)])):$("",!0)]),_:1}),Jt,v(_)?(b(),w("span",{key:n.playerData.info.file_id},[j(L,{"player-data":n.playerData,"player-id":"jwplayer-main"},null,8,["player-data"]),j(we,{"player-data":n.playerData,"player-id":"jwplayer-main"},null,8,["player-data"]),j(ke,{"player-id":"jwplayer-main",onReloadPlayer:o[1]||(o[1]=le=>t("reloadPlayer"))}),j(xe,{options:n.playerData.options,"player-id":"jwplayer-main",onPlayNextEpisode:o[2]||(o[2]=le=>t("playNextEpisode"))},null,8,["options"]),j(Se,{"player-data":n.playerData,"player-id":"jwplayer-main",onReloadPlayer:o[3]||(o[3]=le=>t("reloadPlayer"))},null,8,["player-data"])])):$("",!0)])}}});export{Wt as _};
